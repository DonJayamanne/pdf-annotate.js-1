{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///dist/pdf-annotate.min.js","webpack:///webpack/bootstrap 7befe8d2a1e31d4efe09","webpack:///./index.js","webpack:///./src/PDFJSAnnotate.js","webpack:///./src/adapter/StoreAdapter.js","webpack:///./src/utils/abstractFunction.js","webpack:///./src/UI/event.js","webpack:///./~/events/events.js","webpack:///./src/UI/utils.js","webpack:///./~/create-stylesheet/index.js","webpack:///./src/render/appendChild.js","webpack:///./~/object-assign/index.js","webpack:///./src/render/renderLine.js","webpack:///./src/utils/setAttributes.js","webpack:///./src/utils/normalizeColor.js","webpack:///./src/render/renderPath.js","webpack:///./src/render/renderPoint.js","webpack:///./src/render/renderRect.js","webpack:///./src/render/renderText.js","webpack:///./src/render/renderCircle.js","webpack:///./src/render/renderArrow.js","webpack:///./src/utils/mathUtils.js","webpack:///./src/adapter/LocalStoreAdapter.js","webpack:///./src/utils/uuid.js","webpack:///./src/render/index.js","webpack:///./src/a11y/renderScreenReaderHints.js","webpack:///./src/a11y/insertScreenReaderHint.js","webpack:///./src/a11y/createScreenReaderOnly.js","webpack:///./src/a11y/insertElementWithinChildren.js","webpack:///./src/config.js","webpack:///./src/a11y/insertElementWithinElement.js","webpack:///./src/a11y/renderScreenReaderComments.js","webpack:///./src/a11y/insertScreenReaderComment.js","webpack:///./src/a11y/initEventHandlers.js","webpack:///./src/UI/index.js","webpack:///./src/UI/edit.js","webpack:///./src/UI/pen.js","webpack:///./src/UI/arrow.js","webpack:///./src/UI/point.js","webpack:///./src/UI/rect.js","webpack:///./src/UI/text.js","webpack:///./src/UI/page.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_PDFJSAnnotate","_PDFJSAnnotate2","_StoreAdapter","_StoreAdapter2","_LocalStoreAdapter","_LocalStoreAdapter2","_render","_render2","_UI","_UI2","_config","_config2","_uuid","_uuid2","_utils","findAnnotationAtPoint","findSVGContainer","StoreAdapter","LocalStoreAdapter","__storeAdapter","getStoreAdapter","setStoreAdapter","adapter","UI","render","getAnnotations","documentId","pageNumber","_getStoreAdapter","apply","arguments","config","uuid","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_abstractFunction","_abstractFunction2","_event","_this","definition","undefined","keys","forEach","annotationId","annotation","content","commentId","get","__getAnnotations","set","fn","then","annotations","a","__addAnnotation","fireEvent","__editAnnotation","__deleteAnnotation","success","__addComment","comment","__deleteComment","abstractFunction","name","Error","emitter","emit","addEventListener","on","removeEventListener","removeListener","_events","_events2","clickNode","document","e","findSVGAtPoint","clientX","clientY","EventEmitter","_maxListeners","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","n","isNaN","type","er","handler","len","args","listeners","error","err","context","Array","slice","addListener","listener","newListener","push","warned","console","trace","once","g","fired","list","position","splice","removeAllListeners","ret","listenerCount","evlistener","node","parentNode","nodeName","toUpperCase","getAttribute","x","y","elements","querySelectorAll","l","el","rect","getBoundingClientRect","pointIntersectsRect","svg","top","bottom","left","right","getOffsetAnnotationRect","_getOffset","getOffset","offsetLeft","offsetTop","width","height","getAnnotationRect","h","w","LINE_OFFSET","toLowerCase","minX","maxX","minY","maxY","replace","split","s","map","parseInt","_getOffset2","minX1","maxX1","minY1","maxY1","result","includes","scaleUp","_getMetadata","getMetadata","viewport","scale","screenToPdf","_getMetadata2","xform","trans","_appendChild","getTranslation","_mathUtils","rotate","rotation","translate","pt1","pt2","applyInverseTransform","Math","abs","convertToSvgPoint","pt","_getMetadata3","offset","convertToScreenPoint","_getMetadata4","applyTransform","scaleDown","_getMetadata5","getScroll","scrollTop","scrollLeft","disableUserSelect","userSelectStyleSheet","head","appendChild","enableUserSelect","removeChild","JSON","parse","BORDER_COLOR","_createStylesheet","_createStylesheet2","body","-webkit-user-select","-moz-user-select","-ms-user-select","user-select","setAttribute","processRuleSet","selector","block","processDeclarationBlock","prop","processDeclaration","join","hyphenate","match","blocks","style","createElement","text","createTextNode","transform","isFirefox","path","querySelector","_objectAssign2","child","_renderRect2","_renderCircle2","_renderLine2","_renderPoint2","_renderText2","_renderPath2","_renderArrow2","transformChild","_objectAssign","_renderLine","_renderPath","_renderPoint","_renderRect","_renderText","_renderCircle","_renderArrow","test","navigator","userAgent","toObject","val","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","order2","test3","letter","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","source","from","symbols","to","getOwnPropertySymbols","renderLine","group","createElementNS","_setAttributes2","stroke","_normalizeColor2","color","strokeWidth","rectangles","r","line","x1","y1","x2","y2","_setAttributes","_normalizeColor","setAttributes","attributes","keyCase","UPPER_REGEX","BLACKLIST","indexOf","normalizeColor","REGEX_HASHLESS_HEX","renderPath","d","lines","p1","p2","fill","renderPoint","outerSVG","innerSVG","SIZE","viewBox","D","renderRect","createRect","_ret","fillOpacity","v","_typeof","Symbol","iterator","constructor","renderText","size","fontSize","innerHTML","renderCircle","circle","createCircle","stroke-width","cx","cy","renderArrow","arrow","p3","p4","p0","k","deltaX","dist","sqrt","xt","yt","m1","m2","angle","PI","cosValue","cos","sinValue","sin","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","_getAnnotations","localStorage","getItem","updateAnnotations","setItem","stringify","findAnnotation","index","_StoreAdapter3","getPrototypeOf","Promise","resolve","reject","filter","page","getAnnotation","addAnnotation","editAnnotation","deleteAnnotation","getComments","addComment","class","deleteComment","replacement","random","toString","PATTERN","REGEXP","data","removeAttribute","isArray","_renderScreenReaderHints","renderScreenReaderHints","SORT_TYPES","sortBy","sort","_insertScreenReaderHint2","sortByPoint","b","sortByRectPoint","sortByLinePoint","lineA","lineB","_insertScreenReaderHint","_initEventHandlers","_initEventHandlers2","highlight","strikeout","drawing","textbox","point","area","insertScreenReaderHint","num","rects","first","last","_insertElementWithinElement2","_createScreenReaderOnly2","_insertElementWithinChildren2","COMMENT_TYPES","_renderScreenReaderComments2","_createScreenReaderOnly","_insertElementWithinChildren","_insertElementWithinElement","_renderScreenReaderComments","createScreenReaderOnly","overflow","_toConsumableArray","arr","arr2","insertElementWithinChildren","nodes","concat","textClassQuery","insertBefore","textLayer","textRect","annotationLayerName","textLayerName","annotationSvgQuery","annotationClassQuery","insertElementWithinElement","OFFSET_ADJUST","max","textLayerElementFromPoint","temp","cloneNode","tail","unshift","pop","outerHTML","renderScreenReaderComments","comments","promise","getElementById","_insertScreenReaderComment2","_insertScreenReaderComment","insertScreenReaderComment","item","initEventHandlers","reorderAnnotationsByType","removeAnnotation","insertComment","removeComment","_renderScreenReaderHints2","removeElementById","elementId","_edit","_pen","_arrow","_point","_rect","_text","_page","disableEdit","enableEdit","disablePen","enablePen","setPen","disablePoint","enablePoint","disableRect","enableRect","disableArrow","enableArrow","disableText","enableText","setText","createPage","renderPage","createEditOverlay","destroyEditOverlay","overlay","anchor","styleLeft","OVERLAY_BORDER_SIZE","styleTop","boxSizing","border","borderRadius","background","padding","textAlign","textDecoration","handleDocumentClick","handleDocumentKeyup","handleDocumentMousedown","borderColor","boxShadow","isDragging","display","handleDocumentMousemove","handleDocumentMouseup","keyCode","dragOffsetX","dragOffsetY","dragStartX","dragStartY","cursor","offsetHeight","offsetWidth","attribX","attribY","modelStart","modelEnd","modelDelta","t","modelX","modelY","viewY","viewX","_annotation$lines$i","_slicedToArray","setTimeout","handleAnnotationClick","_enabled","sliceIterator","_arr","_n","_d","_e","_s","_i","next","done","_penSize","_penColor","savePoint","penSize","penColor","originX","originY","setArrow","input","handleInputBlur","handleInputKeyup","focus","closeInput","trim","getSelectionRects","selection","window","getSelection","range","getRangeAt","getClientRects","_type","saveRect","_svg","removeAllRanges","boundingRect","_textSize","saveText","_textColor","textSize","textColor","PAGE_TEMPLATE","children","canvas","mozOpaque","renderOptions","pdfDocument","all","getPage","_ref","_ref2","pdfPage","canvasContext","getContext","alpha","totalRotation","getViewport","scalePage","getTextContent","normalizeWhitespace","textContent","textLayerFactory","PDFJS","DefaultTextLayerFactory","textLayerBuilder","createTextLayerBuilder","setTextContent","wrapper","outputScale","getOutputScale","scaled","sx","sy","sfx","approximateFraction","sfy","visibility","roundToDivide","floor","xinv","limit","x_","q","ctx","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","div","round"],"mappings":"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","file":"dist/pdf-annotate.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PDFAnnotate\"] = factory();\n\telse\n\t\troot[\"PDFAnnotate\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PDFAnnotate\"] = factory();\n\telse\n\t\troot[\"PDFAnnotate\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\texports.default = _PDFJSAnnotate2.default;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _StoreAdapter = __webpack_require__(2);\n\t\n\tvar _StoreAdapter2 = _interopRequireDefault(_StoreAdapter);\n\t\n\tvar _LocalStoreAdapter = __webpack_require__(20);\n\t\n\tvar _LocalStoreAdapter2 = _interopRequireDefault(_LocalStoreAdapter);\n\t\n\tvar _render = __webpack_require__(22);\n\t\n\tvar _render2 = _interopRequireDefault(_render);\n\t\n\tvar _UI = __webpack_require__(32);\n\t\n\tvar _UI2 = _interopRequireDefault(_UI);\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _uuid = __webpack_require__(21);\n\t\n\tvar _uuid2 = _interopRequireDefault(_uuid);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t  findAnnotationAtPoint: _utils.findAnnotationAtPoint,\n\t  findSVGContainer: _utils.findSVGContainer,\n\t\n\t  /**\n\t   * Abstract class that needs to be defined so PDFJSAnnotate\n\t   * knows how to communicate with your server.\n\t   */\n\t  StoreAdapter: _StoreAdapter2.default,\n\t\n\t  /**\n\t   * Implementation of StoreAdapter that stores annotation data to localStorage.\n\t   */\n\t  LocalStoreAdapter: _LocalStoreAdapter2.default,\n\t\n\t  /**\n\t   * Abstract instance of StoreAdapter\n\t   */\n\t  __storeAdapter: new _StoreAdapter2.default(),\n\t\n\t  /**\n\t   * Getter for the underlying StoreAdapter property\n\t   *\n\t   * @return {StoreAdapter}\n\t   */\n\t  getStoreAdapter: function getStoreAdapter() {\n\t    return this.__storeAdapter;\n\t  },\n\t\n\t\n\t  /**\n\t   * Setter for the underlying StoreAdapter property\n\t   *\n\t   * @param {StoreAdapter} adapter The StoreAdapter implementation to be used.\n\t   */\n\t  setStoreAdapter: function setStoreAdapter(adapter) {\n\t    // TODO this throws an error when bundled\n\t    // if (!(adapter instanceof StoreAdapter)) {\n\t    //   throw new Error('adapter must be an instance of StoreAdapter');\n\t    // }\n\t\n\t    this.__storeAdapter = adapter;\n\t  },\n\t\n\t\n\t  /**\n\t   * UI is a helper for instrumenting UI interactions for creating,\n\t   * editing, and deleting annotations in the browser.\n\t   */\n\t  UI: _UI2.default,\n\t\n\t  /**\n\t   * Render the annotations for a page in the PDF Document\n\t   *\n\t   * @param {SVGElement} svg The SVG element that annotations should be rendered to\n\t   * @param {PageViewport} viewport The PDFPage.getViewport data\n\t   * @param {Object} data The StoreAdapter.getAnnotations data\n\t   * @return {Promise}\n\t   */\n\t  render: _render2.default,\n\t\n\t  /**\n\t   * Convenience method for getting annotation data\n\t   *\n\t   * @alias StoreAdapter.getAnnotations\n\t   * @param {String} documentId The ID of the document\n\t   * @param {String} pageNumber The page number\n\t   * @return {Promise}\n\t   */\n\t  getAnnotations: function getAnnotations(documentId, pageNumber) {\n\t    var _getStoreAdapter;\n\t\n\t    return (_getStoreAdapter = this.getStoreAdapter()).getAnnotations.apply(_getStoreAdapter, arguments);\n\t  },\n\t\n\t\n\t  config: _config2.default,\n\t\n\t  uuid: _uuid2.default\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _abstractFunction = __webpack_require__(3);\n\t\n\tvar _abstractFunction2 = _interopRequireDefault(_abstractFunction);\n\t\n\tvar _event = __webpack_require__(4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t// Adapter should never be invoked publicly\n\tvar StoreAdapter = function () {\n\t  /**\n\t   * Create a new StoreAdapter instance\n\t   *\n\t   * @param {Object} [definition] The definition to use for overriding abstract methods\n\t   */\n\t  function StoreAdapter() {\n\t    var _this = this;\n\t\n\t    var definition = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t    _classCallCheck(this, StoreAdapter);\n\t\n\t    // Copy each function from definition if it is a function we know about\n\t    Object.keys(definition).forEach(function (key) {\n\t      if (typeof definition[key] === 'function' && typeof _this[key] === 'function') {\n\t        _this[key] = definition[key];\n\t      }\n\t    });\n\t  }\n\t\n\t  /**\n\t   * Get all the annotations for a given document and page number.\n\t   *\n\t   * @param {String} documentId The ID for the document the annotations belong to\n\t   * @param {Number} pageNumber The number of the page the annotations belong to\n\t   * @return {Promise}\n\t   */\n\t\n\t\n\t  _createClass(StoreAdapter, [{\n\t    key: '__getAnnotations',\n\t    value: function __getAnnotations(documentId, pageNumber) {\n\t      (0, _abstractFunction2.default)('getAnnotations');\n\t    }\n\t  }, {\n\t    key: 'getAnnotation',\n\t\n\t\n\t    /**\n\t     * Get the definition for a specific annotation.\n\t     *\n\t     * @param {String} documentId The ID for the document the annotation belongs to\n\t     * @param {String} annotationId The ID for the annotation\n\t     * @return {Promise}\n\t     */\n\t    value: function getAnnotation(documentId, annotationId) {\n\t      (0, _abstractFunction2.default)('getAnnotation');\n\t    }\n\t\n\t    /**\n\t     * Add an annotation\n\t     *\n\t     * @param {String} documentId The ID for the document to add the annotation to\n\t     * @param {String} pageNumber The page number to add the annotation to\n\t     * @param {Object} annotation The definition for the new annotation\n\t     * @return {Promise}\n\t     */\n\t\n\t  }, {\n\t    key: '__addAnnotation',\n\t    value: function __addAnnotation(documentId, pageNumber, annotation) {\n\t      (0, _abstractFunction2.default)('addAnnotation');\n\t    }\n\t  }, {\n\t    key: '__editAnnotation',\n\t\n\t\n\t    /**\n\t     * Edit an annotation\n\t     *\n\t     * @param {String} documentId The ID for the document\n\t     * @param {String} pageNumber the page number of the annotation\n\t     * @param {Object} annotation The definition of the modified annotation\n\t     * @return {Promise}\n\t     */\n\t    value: function __editAnnotation(documentId, pageNumber, annotation) {\n\t      (0, _abstractFunction2.default)('editAnnotation');\n\t    }\n\t  }, {\n\t    key: '__deleteAnnotation',\n\t\n\t\n\t    /**\n\t     * Delete an annotation\n\t     *\n\t     * @param {String} documentId The ID for the document\n\t     * @param {String} annotationId The ID for the annotation\n\t     * @return {Promise}\n\t     */\n\t    value: function __deleteAnnotation(documentId, annotationId) {\n\t      (0, _abstractFunction2.default)('deleteAnnotation');\n\t    }\n\t  }, {\n\t    key: 'getComments',\n\t\n\t\n\t    /**\n\t     * Get all the comments for an annotation\n\t     *\n\t     * @param {String} documentId The ID for the document\n\t     * @param {String} annotationId The ID for the annotation\n\t     * @return {Promise}\n\t     */\n\t    value: function getComments(documentId, annotationId) {\n\t      (0, _abstractFunction2.default)('getComments');\n\t    }\n\t\n\t    /**\n\t     * Add a new comment\n\t     *\n\t     * @param {String} documentId The ID for the document\n\t     * @param {String} annotationId The ID for the annotation\n\t     * @param {Object} content The definition of the comment\n\t     * @return {Promise}\n\t     */\n\t\n\t  }, {\n\t    key: '__addComment',\n\t    value: function __addComment(documentId, annotationId, content) {\n\t      (0, _abstractFunction2.default)('addComment');\n\t    }\n\t  }, {\n\t    key: '__deleteComment',\n\t\n\t\n\t    /**\n\t     * Delete a comment\n\t     *\n\t     * @param {String} documentId The ID for the document\n\t     * @param {String} commentId The ID for the comment\n\t     * @return {Promise}\n\t     */\n\t    value: function __deleteComment(documentId, commentId) {\n\t      (0, _abstractFunction2.default)('deleteComment');\n\t    }\n\t  }, {\n\t    key: 'getAnnotations',\n\t    get: function get() {\n\t      return this.__getAnnotations;\n\t    },\n\t    set: function set(fn) {\n\t      this.__getAnnotations = function getAnnotations(documentId, pageNumber) {\n\t        return fn.apply(undefined, arguments).then(function (annotations) {\n\t          // TODO may be best to have this happen on the server\n\t          if (annotations.annotations) {\n\t            annotations.annotations.forEach(function (a) {\n\t              a.documentId = documentId;\n\t            });\n\t          }\n\t          return annotations;\n\t        });\n\t      };\n\t    }\n\t  }, {\n\t    key: 'addAnnotation',\n\t    get: function get() {\n\t      return this.__addAnnotation;\n\t    },\n\t    set: function set(fn) {\n\t      this.__addAnnotation = function addAnnotation(documentId, pageNumber, annotation) {\n\t        return fn.apply(undefined, arguments).then(function (annotation) {\n\t          (0, _event.fireEvent)('annotation:add', documentId, pageNumber, annotation);\n\t          return annotation;\n\t        });\n\t      };\n\t    }\n\t  }, {\n\t    key: 'editAnnotation',\n\t    get: function get() {\n\t      return this.__editAnnotation;\n\t    },\n\t    set: function set(fn) {\n\t      this.__editAnnotation = function editAnnotation(documentId, annotationId, annotation) {\n\t        return fn.apply(undefined, arguments).then(function (annotation) {\n\t          (0, _event.fireEvent)('annotation:edit', documentId, annotationId, annotation);\n\t          return annotation;\n\t        });\n\t      };\n\t    }\n\t  }, {\n\t    key: 'deleteAnnotation',\n\t    get: function get() {\n\t      return this.__deleteAnnotation;\n\t    },\n\t    set: function set(fn) {\n\t      this.__deleteAnnotation = function deleteAnnotation(documentId, annotationId) {\n\t        return fn.apply(undefined, arguments).then(function (success) {\n\t          if (success) {\n\t            (0, _event.fireEvent)('annotation:delete', documentId, annotationId);\n\t          }\n\t          return success;\n\t        });\n\t      };\n\t    }\n\t  }, {\n\t    key: 'addComment',\n\t    get: function get() {\n\t      return this.__addComment;\n\t    },\n\t    set: function set(fn) {\n\t      this.__addComment = function addComment(documentId, annotationId, content) {\n\t        return fn.apply(undefined, arguments).then(function (comment) {\n\t          (0, _event.fireEvent)('comment:add', documentId, annotationId, comment);\n\t          return comment;\n\t        });\n\t      };\n\t    }\n\t  }, {\n\t    key: 'deleteComment',\n\t    get: function get() {\n\t      return this.__deleteComment;\n\t    },\n\t    set: function set(fn) {\n\t      this.__deleteComment = function deleteComment(documentId, commentId) {\n\t        return fn.apply(undefined, arguments).then(function (success) {\n\t          if (success) {\n\t            (0, _event.fireEvent)('comment:delete', documentId, commentId);\n\t          }\n\t          return success;\n\t        });\n\t      };\n\t    }\n\t  }]);\n\t\n\t  return StoreAdapter;\n\t}();\n\t\n\texports.default = StoreAdapter;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = abstractFunction;\n\t/**\n\t * Throw an Error for an abstract function that hasn't been implemented.\n\t *\n\t * @param {String} name The name of the abstract function\n\t */\n\tfunction abstractFunction(name) {\n\t  throw new Error(name + ' is not implemented');\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.fireEvent = fireEvent;\n\texports.addEventListener = addEventListener;\n\texports.removeEventListener = removeEventListener;\n\t\n\tvar _events = __webpack_require__(5);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar emitter = new _events2.default();\n\t\n\tvar clickNode = void 0;\n\t\n\t/**\n\t * Handle document.click event\n\t *\n\t * @param {Event} e The DOM event to be handled\n\t */\n\tdocument.addEventListener('click', function handleDocumentClick(e) {\n\t  if (!(0, _utils.findSVGAtPoint)(e.clientX, e.clientY)) {\n\t    return;\n\t  }\n\t\n\t  var target = (0, _utils.findAnnotationAtPoint)(e.clientX, e.clientY);\n\t\n\t  // Emit annotation:blur if clickNode is no longer clicked\n\t  if (clickNode && clickNode !== target) {\n\t    emitter.emit('annotation:blur', clickNode);\n\t  }\n\t\n\t  // Emit annotation:click if target was clicked\n\t  if (target) {\n\t    emitter.emit('annotation:click', target);\n\t  }\n\t\n\t  clickNode = target;\n\t});\n\t\n\t// let mouseOverNode;\n\t// document.addEventListener('mousemove', function handleDocumentMousemove(e) {\n\t//   let target = findAnnotationAtPoint(e.clientX, e.clientY);\n\t//\n\t//   // Emit annotation:mouseout if target was mouseout'd\n\t//   if (mouseOverNode && !target) {\n\t//     emitter.emit('annotation:mouseout', mouseOverNode);\n\t//   }\n\t//\n\t//   // Emit annotation:mouseover if target was mouseover'd\n\t//   if (target && mouseOverNode !== target) {\n\t//     emitter.emit('annotation:mouseover', target);\n\t//   }\n\t//\n\t//   mouseOverNode = target;\n\t// });\n\t\n\tfunction fireEvent() {\n\t  emitter.emit.apply(emitter, arguments);\n\t};\n\tfunction addEventListener() {\n\t  emitter.on.apply(emitter, arguments);\n\t};\n\tfunction removeEventListener() {\n\t  emitter.removeListener.apply(emitter, arguments);\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\tfunction EventEmitter() {\n\t  this._events = this._events || {};\n\t  this._maxListeners = this._maxListeners || undefined;\n\t}\n\tmodule.exports = EventEmitter;\n\t\n\t// Backwards-compat with node 0.10.x\n\tEventEmitter.EventEmitter = EventEmitter;\n\t\n\tEventEmitter.prototype._events = undefined;\n\tEventEmitter.prototype._maxListeners = undefined;\n\t\n\t// By default EventEmitters will print a warning if more than 10 listeners are\n\t// added to it. This is a useful default which helps finding memory leaks.\n\tEventEmitter.defaultMaxListeners = 10;\n\t\n\t// Obviously not all Emitters should be limited to 10. This function allows\n\t// that to be increased. Set to zero for unlimited.\n\tEventEmitter.prototype.setMaxListeners = function(n) {\n\t  if (!isNumber(n) || n < 0 || isNaN(n))\n\t    throw TypeError('n must be a positive number');\n\t  this._maxListeners = n;\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.emit = function(type) {\n\t  var er, handler, len, args, i, listeners;\n\t\n\t  if (!this._events)\n\t    this._events = {};\n\t\n\t  // If there is no 'error' event listener then throw.\n\t  if (type === 'error') {\n\t    if (!this._events.error ||\n\t        (isObject(this._events.error) && !this._events.error.length)) {\n\t      er = arguments[1];\n\t      if (er instanceof Error) {\n\t        throw er; // Unhandled 'error' event\n\t      } else {\n\t        // At least give some kind of context to the user\n\t        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n\t        err.context = er;\n\t        throw err;\n\t      }\n\t    }\n\t  }\n\t\n\t  handler = this._events[type];\n\t\n\t  if (isUndefined(handler))\n\t    return false;\n\t\n\t  if (isFunction(handler)) {\n\t    switch (arguments.length) {\n\t      // fast cases\n\t      case 1:\n\t        handler.call(this);\n\t        break;\n\t      case 2:\n\t        handler.call(this, arguments[1]);\n\t        break;\n\t      case 3:\n\t        handler.call(this, arguments[1], arguments[2]);\n\t        break;\n\t      // slower\n\t      default:\n\t        args = Array.prototype.slice.call(arguments, 1);\n\t        handler.apply(this, args);\n\t    }\n\t  } else if (isObject(handler)) {\n\t    args = Array.prototype.slice.call(arguments, 1);\n\t    listeners = handler.slice();\n\t    len = listeners.length;\n\t    for (i = 0; i < len; i++)\n\t      listeners[i].apply(this, args);\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\tEventEmitter.prototype.addListener = function(type, listener) {\n\t  var m;\n\t\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  if (!this._events)\n\t    this._events = {};\n\t\n\t  // To avoid recursion in the case that type === \"newListener\"! Before\n\t  // adding it to the listeners, first emit \"newListener\".\n\t  if (this._events.newListener)\n\t    this.emit('newListener', type,\n\t              isFunction(listener.listener) ?\n\t              listener.listener : listener);\n\t\n\t  if (!this._events[type])\n\t    // Optimize the case of one listener. Don't need the extra array object.\n\t    this._events[type] = listener;\n\t  else if (isObject(this._events[type]))\n\t    // If we've already got an array, just append.\n\t    this._events[type].push(listener);\n\t  else\n\t    // Adding the second element, need to change to array.\n\t    this._events[type] = [this._events[type], listener];\n\t\n\t  // Check for listener leak\n\t  if (isObject(this._events[type]) && !this._events[type].warned) {\n\t    if (!isUndefined(this._maxListeners)) {\n\t      m = this._maxListeners;\n\t    } else {\n\t      m = EventEmitter.defaultMaxListeners;\n\t    }\n\t\n\t    if (m && m > 0 && this._events[type].length > m) {\n\t      this._events[type].warned = true;\n\t      console.error('(node) warning: possible EventEmitter memory ' +\n\t                    'leak detected. %d listeners added. ' +\n\t                    'Use emitter.setMaxListeners() to increase limit.',\n\t                    this._events[type].length);\n\t      if (typeof console.trace === 'function') {\n\t        // not supported in IE 10\n\t        console.trace();\n\t      }\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\t\n\tEventEmitter.prototype.once = function(type, listener) {\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  var fired = false;\n\t\n\t  function g() {\n\t    this.removeListener(type, g);\n\t\n\t    if (!fired) {\n\t      fired = true;\n\t      listener.apply(this, arguments);\n\t    }\n\t  }\n\t\n\t  g.listener = listener;\n\t  this.on(type, g);\n\t\n\t  return this;\n\t};\n\t\n\t// emits a 'removeListener' event iff the listener was removed\n\tEventEmitter.prototype.removeListener = function(type, listener) {\n\t  var list, position, length, i;\n\t\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  if (!this._events || !this._events[type])\n\t    return this;\n\t\n\t  list = this._events[type];\n\t  length = list.length;\n\t  position = -1;\n\t\n\t  if (list === listener ||\n\t      (isFunction(list.listener) && list.listener === listener)) {\n\t    delete this._events[type];\n\t    if (this._events.removeListener)\n\t      this.emit('removeListener', type, listener);\n\t\n\t  } else if (isObject(list)) {\n\t    for (i = length; i-- > 0;) {\n\t      if (list[i] === listener ||\n\t          (list[i].listener && list[i].listener === listener)) {\n\t        position = i;\n\t        break;\n\t      }\n\t    }\n\t\n\t    if (position < 0)\n\t      return this;\n\t\n\t    if (list.length === 1) {\n\t      list.length = 0;\n\t      delete this._events[type];\n\t    } else {\n\t      list.splice(position, 1);\n\t    }\n\t\n\t    if (this._events.removeListener)\n\t      this.emit('removeListener', type, listener);\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.removeAllListeners = function(type) {\n\t  var key, listeners;\n\t\n\t  if (!this._events)\n\t    return this;\n\t\n\t  // not listening for removeListener, no need to emit\n\t  if (!this._events.removeListener) {\n\t    if (arguments.length === 0)\n\t      this._events = {};\n\t    else if (this._events[type])\n\t      delete this._events[type];\n\t    return this;\n\t  }\n\t\n\t  // emit removeListener for all listeners on all events\n\t  if (arguments.length === 0) {\n\t    for (key in this._events) {\n\t      if (key === 'removeListener') continue;\n\t      this.removeAllListeners(key);\n\t    }\n\t    this.removeAllListeners('removeListener');\n\t    this._events = {};\n\t    return this;\n\t  }\n\t\n\t  listeners = this._events[type];\n\t\n\t  if (isFunction(listeners)) {\n\t    this.removeListener(type, listeners);\n\t  } else if (listeners) {\n\t    // LIFO order\n\t    while (listeners.length)\n\t      this.removeListener(type, listeners[listeners.length - 1]);\n\t  }\n\t  delete this._events[type];\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.listeners = function(type) {\n\t  var ret;\n\t  if (!this._events || !this._events[type])\n\t    ret = [];\n\t  else if (isFunction(this._events[type]))\n\t    ret = [this._events[type]];\n\t  else\n\t    ret = this._events[type].slice();\n\t  return ret;\n\t};\n\t\n\tEventEmitter.prototype.listenerCount = function(type) {\n\t  if (this._events) {\n\t    var evlistener = this._events[type];\n\t\n\t    if (isFunction(evlistener))\n\t      return 1;\n\t    else if (evlistener)\n\t      return evlistener.length;\n\t  }\n\t  return 0;\n\t};\n\t\n\tEventEmitter.listenerCount = function(emitter, type) {\n\t  return emitter.listenerCount(type);\n\t};\n\t\n\tfunction isFunction(arg) {\n\t  return typeof arg === 'function';\n\t}\n\t\n\tfunction isNumber(arg) {\n\t  return typeof arg === 'number';\n\t}\n\t\n\tfunction isObject(arg) {\n\t  return typeof arg === 'object' && arg !== null;\n\t}\n\t\n\tfunction isUndefined(arg) {\n\t  return arg === void 0;\n\t}\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.BORDER_COLOR = undefined;\n\texports.findSVGContainer = findSVGContainer;\n\texports.findSVGAtPoint = findSVGAtPoint;\n\texports.findAnnotationAtPoint = findAnnotationAtPoint;\n\texports.pointIntersectsRect = pointIntersectsRect;\n\texports.getOffsetAnnotationRect = getOffsetAnnotationRect;\n\texports.getAnnotationRect = getAnnotationRect;\n\texports.scaleUp = scaleUp;\n\texports.screenToPdf = screenToPdf;\n\texports.convertToSvgPoint = convertToSvgPoint;\n\texports.convertToScreenPoint = convertToScreenPoint;\n\texports.scaleDown = scaleDown;\n\texports.getScroll = getScroll;\n\texports.getOffset = getOffset;\n\texports.disableUserSelect = disableUserSelect;\n\texports.enableUserSelect = enableUserSelect;\n\texports.getMetadata = getMetadata;\n\t\n\tvar _createStylesheet = __webpack_require__(7);\n\t\n\tvar _createStylesheet2 = _interopRequireDefault(_createStylesheet);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _mathUtils = __webpack_require__(19);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar BORDER_COLOR = exports.BORDER_COLOR = '#00BFFF';\n\t\n\tvar userSelectStyleSheet = (0, _createStylesheet2.default)({\n\t  body: {\n\t    '-webkit-user-select': 'none',\n\t    '-moz-user-select': 'none',\n\t    '-ms-user-select': 'none',\n\t    'user-select': 'none'\n\t  }\n\t});\n\tuserSelectStyleSheet.setAttribute('data-pdf-annotate-user-select', 'true');\n\t\n\t/**\n\t * Find the SVGElement that contains all the annotations for a page\n\t *\n\t * @param {Element} node An annotation within that container\n\t * @return {SVGElement} The container SVG or null if it can't be found\n\t */\n\tfunction findSVGContainer(node) {\n\t  var parentNode = node;\n\t\n\t  while ((parentNode = parentNode.parentNode) && parentNode !== document) {\n\t    if (parentNode.nodeName.toUpperCase() === 'SVG' && parentNode.getAttribute('data-pdf-annotate-container') === 'true') {\n\t      return parentNode;\n\t    }\n\t  }\n\t\n\t  return null;\n\t}\n\t\n\t/**\n\t * Find an SVGElement container at a given point\n\t *\n\t * @param {Number} x The x coordinate of the point\n\t * @param {Number} y The y coordinate of the point\n\t * @return {SVGElement} The container SVG or null if one can't be found\n\t */\n\tfunction findSVGAtPoint(x, y) {\n\t  var elements = document.querySelectorAll('svg[data-pdf-annotate-container=\"true\"]');\n\t\n\t  for (var i = 0, l = elements.length; i < l; i++) {\n\t    var el = elements[i];\n\t    var rect = el.getBoundingClientRect();\n\t\n\t    if (pointIntersectsRect(x, y, rect)) {\n\t      return el;\n\t    }\n\t  }\n\t\n\t  return null;\n\t}\n\t\n\t/**\n\t * Find an Element that represents an annotation at a given point\n\t *\n\t * @param {Number} x The x coordinate of the point\n\t * @param {Number} y The y coordinate of the point\n\t * @return {Element} The annotation element or null if one can't be found\n\t */\n\tfunction findAnnotationAtPoint(x, y) {\n\t  var svg = findSVGAtPoint(x, y);\n\t  if (!svg) {\n\t    return;\n\t  }\n\t  var elements = svg.querySelectorAll('[data-pdf-annotate-type]');\n\t\n\t  // Find a target element within SVG\n\t  for (var i = 0, l = elements.length; i < l; i++) {\n\t    var el = elements[i];\n\t    if (pointIntersectsRect(x, y, el.getBoundingClientRect())) {\n\t      return el;\n\t    }\n\t  }\n\t\n\t  return null;\n\t}\n\t\n\t/**\n\t * Determine if a point intersects a rect\n\t *\n\t * @param {Number} x The x coordinate of the point\n\t * @param {Number} y The y coordinate of the point\n\t * @param {Object} rect The points of a rect (likely from getBoundingClientRect)\n\t * @return {Boolean} True if a collision occurs, otherwise false\n\t */\n\tfunction pointIntersectsRect(x, y, rect) {\n\t  return y >= rect.top && y <= rect.bottom && x >= rect.left && x <= rect.right;\n\t}\n\t\n\t/**\n\t * Get the rect of an annotation element accounting for offset.\n\t *\n\t * @param {Element} el The element to get the rect of\n\t * @return {Object} The dimensions of the element\n\t */\n\tfunction getOffsetAnnotationRect(el) {\n\t  var rect = el.getBoundingClientRect();\n\t\n\t  var _getOffset = getOffset(el);\n\t\n\t  var offsetLeft = _getOffset.offsetLeft;\n\t  var offsetTop = _getOffset.offsetTop;\n\t\n\t  return {\n\t    top: rect.top - offsetTop,\n\t    left: rect.left - offsetLeft,\n\t    right: rect.right - offsetLeft,\n\t    bottom: rect.bottom - offsetTop,\n\t    width: rect.width,\n\t    height: rect.height\n\t  };\n\t}\n\t\n\t/**\n\t * Get the rect of an annotation element.\n\t *\n\t * @param {Element} el The element to get the rect of\n\t * @return {Object} The dimensions of the element\n\t */\n\tfunction getAnnotationRect(el) {\n\t  // findSVGContainer(target)\n\t  var h = 0,\n\t      w = 0,\n\t      x = 0,\n\t      y = 0;\n\t  var rect = el.getBoundingClientRect();\n\t  // TODO this should be calculated somehow\n\t  var LINE_OFFSET = 16;\n\t\n\t  (function () {\n\t    switch (el.nodeName.toLowerCase()) {\n\t      case 'path':\n\t        var minX = void 0,\n\t            maxX = void 0,\n\t            minY = void 0,\n\t            maxY = void 0;\n\t\n\t        el.getAttribute('d').replace(/Z/, '').split('M').splice(1).forEach(function (p) {\n\t          var s = p.split(' ').map(function (i) {\n\t            return parseInt(i, 10);\n\t          });\n\t\n\t          if (typeof minX === 'undefined' || s[0] < minX) {\n\t            minX = s[0];\n\t          }\n\t          if (typeof maxX === 'undefined' || s[2] > maxX) {\n\t            maxX = s[2];\n\t          }\n\t          if (typeof minY === 'undefined' || s[1] < minY) {\n\t            minY = s[1];\n\t          }\n\t          if (typeof maxY === 'undefined' || s[3] > maxY) {\n\t            maxY = s[3];\n\t          }\n\t        });\n\t\n\t        h = maxY - minY;\n\t        w = maxX - minX;\n\t        x = minX;\n\t        y = minY;\n\t        break;\n\t\n\t      case 'line':\n\t        h = parseInt(el.getAttribute('y2'), 10) - parseInt(el.getAttribute('y1'), 10);\n\t        w = parseInt(el.getAttribute('x2'), 10) - parseInt(el.getAttribute('x1'), 10);\n\t        x = parseInt(el.getAttribute('x1'), 10);\n\t        y = parseInt(el.getAttribute('y1'), 10);\n\t\n\t        if (h === 0) {\n\t          h += LINE_OFFSET;\n\t          y -= LINE_OFFSET / 2;\n\t        }\n\t        break;\n\t\n\t      case 'text':\n\t        h = rect.height;\n\t        w = rect.width;\n\t        x = parseInt(el.getAttribute('x'), 10);\n\t        y = parseInt(el.getAttribute('y'), 10) - h;\n\t        break;\n\t\n\t      case 'g':\n\t        var _getOffset2 = getOffset(el);\n\t\n\t        var offsetLeft = _getOffset2.offsetLeft;\n\t        var offsetTop = _getOffset2.offsetTop;\n\t\n\t        h = rect.height;\n\t        w = rect.width;\n\t        x = rect.left - offsetLeft;\n\t        y = rect.top - offsetTop;\n\t\n\t        if (el.getAttribute('data-pdf-annotate-type') === 'strikeout') {\n\t          h += LINE_OFFSET;\n\t          y -= LINE_OFFSET / 2;\n\t        }\n\t        break;\n\t\n\t      case 'rect':\n\t      case 'svg':\n\t        h = parseInt(el.getAttribute('height'), 10);\n\t        w = parseInt(el.getAttribute('width'), 10);\n\t        x = parseInt(el.getAttribute('x'), 10);\n\t        y = parseInt(el.getAttribute('y'), 10);\n\t        break;\n\t\n\t      case 'circle':\n\t      case 'fillcircle':\n\t      case 'emptycircle':\n\t      case 'svg':\n\t        h = parseInt(el.getAttribute('r'), 10) * 2;\n\t        w = parseInt(el.getAttribute('r'), 10) * 2;\n\t        x = parseInt(el.getAttribute('cx'), 10) - h / 2;\n\t        y = parseInt(el.getAttribute('cy'), 10) - w / 2;\n\t        break;\n\t\n\t      case 'arrow':\n\t        var minX1 = void 0,\n\t            maxX1 = void 0,\n\t            minY1 = void 0,\n\t            maxY1 = void 0;\n\t\n\t        el.getAttribute('d').replace(/Z/, '').split('M').splice(1).forEach(function (p) {\n\t          var s = p.split(' ').map(function (i) {\n\t            return parseInt(i, 10);\n\t          });\n\t\n\t          if (typeof minX1 === 'undefined' || s[0] < minX1) {\n\t            minX1 = s[0];\n\t          }\n\t          if (typeof maxX1 === 'undefined' || s[2] > maxX1) {\n\t            maxX1 = s[2];\n\t          }\n\t          if (typeof minY1 === 'undefined' || s[1] < minY1) {\n\t            minY1 = s[1];\n\t          }\n\t          if (typeof maxY1 === 'undefined' || s[3] > maxY1) {\n\t            maxY1 = s[3];\n\t          }\n\t        });\n\t\n\t        h = maxY1 - minY1;\n\t        w = maxX1 - minX1;\n\t        x = minX1;\n\t        y = minY1;\n\t        break;\n\t    }\n\t\n\t    // Result provides same properties as getBoundingClientRect\n\t  })();\n\t\n\t  var result = {\n\t    top: y,\n\t    left: x,\n\t    width: w,\n\t    height: h,\n\t    right: x + w,\n\t    bottom: y + h\n\t  };\n\t\n\t  // For the case of nested SVG (point annotations) and grouped\n\t  // lines or rects no adjustment needs to be made for scale.\n\t  // I assume that the scale is already being handled\n\t  // natively by virtue of the `transform` attribute.\n\t  if (!['svg', 'g'].includes(el.nodeName.toLowerCase())) {\n\t    result = scaleUp(findSVGAtPoint(rect.left, rect.top), result);\n\t  }\n\t\n\t  return result;\n\t}\n\t\n\t/**\n\t * Adjust scale from normalized scale (100%) to rendered scale.\n\t *\n\t * @param {SVGElement} svg The SVG to gather metadata from\n\t * @param {Object} rect A map of numeric values to scale\n\t * @return {Object} A copy of `rect` with values scaled up\n\t */\n\tfunction scaleUp(svg, rect) {\n\t  var result = {};\n\t\n\t  var _getMetadata = getMetadata(svg);\n\t\n\t  var viewport = _getMetadata.viewport;\n\t\n\t\n\t  Object.keys(rect).forEach(function (key) {\n\t    result[key] = rect[key] * viewport.scale;\n\t  });\n\t\n\t  return result;\n\t}\n\t\n\tfunction screenToPdf(svg, rect) {\n\t  var result = {};\n\t\n\t  var _getMetadata2 = getMetadata(svg);\n\t\n\t  var viewport = _getMetadata2.viewport;\n\t\n\t\n\t  var xform = [1, 0, 0, 1, 0, 0];\n\t  var trans = (0, _appendChild.getTranslation)(viewport);\n\t  xform = (0, _mathUtils.scale)(xform, viewport.scale, viewport.scale);\n\t  xform = (0, _mathUtils.rotate)(xform, viewport.rotation);\n\t  xform = (0, _mathUtils.translate)(xform, trans.x, trans.y);\n\t\n\t  var pt1 = [rect.x, rect.y];\n\t  var pt2 = [rect.x + rect.width, rect.y + rect.height];\n\t\n\t  pt1 = (0, _mathUtils.applyInverseTransform)(pt1, xform);\n\t  pt2 = (0, _mathUtils.applyInverseTransform)(pt2, xform);\n\t\n\t  var width = Math.abs(pt2[0] - pt1[0]);\n\t  var height = Math.abs(pt2[1] - pt1[1]);\n\t\n\t  //result.x = pt1[0];\n\t  //result.y = pt1[1];\n\t\n\t  switch (viewport.rotation % 360) {\n\t    case 0:\n\t      result.x = pt1[0];\n\t      result.y = pt1[1];\n\t      break;\n\t    case 90:\n\t      result.x = pt1[0];\n\t      result.y = pt1[1] - height;\n\t      break;\n\t    case 180:\n\t      result.x = pt1[0] - width;\n\t      result.y = pt1[1] - height;\n\t      break;\n\t    case 270:\n\t      result.x = pt1[0] - width;\n\t      result.y = pt1[1];\n\t      break;\n\t  }\n\t\n\t  result.width = width;\n\t  result.height = height;\n\t\n\t  return result;\n\t}\n\t\n\tfunction convertToSvgPoint(pt, svg) {\n\t  var result = {};\n\t\n\t  var _getMetadata3 = getMetadata(svg);\n\t\n\t  var viewport = _getMetadata3.viewport;\n\t\n\t\n\t  var xform = [1, 0, 0, 1, 0, 0];\n\t  xform = (0, _mathUtils.scale)(xform, viewport.scale, viewport.scale);\n\t  xform = (0, _mathUtils.rotate)(xform, viewport.rotation);\n\t\n\t  var offset = (0, _appendChild.getTranslation)(viewport);\n\t  xform = (0, _mathUtils.translate)(xform, offset.x, offset.y);\n\t\n\t  return (0, _mathUtils.applyInverseTransform)(pt, xform);\n\t}\n\t\n\tfunction convertToScreenPoint(pt, svg) {\n\t  var result = {};\n\t\n\t  var _getMetadata4 = getMetadata(svg);\n\t\n\t  var viewport = _getMetadata4.viewport;\n\t\n\t\n\t  var xform = [1, 0, 0, 1, 0, 0];\n\t  xform = (0, _mathUtils.scale)(xform, viewport.scale, viewport.scale);\n\t  xform = (0, _mathUtils.rotate)(xform, viewport.rotation);\n\t\n\t  var offset = (0, _appendChild.getTranslation)(viewport);\n\t  xform = (0, _mathUtils.translate)(xform, offset.x, offset.y);\n\t\n\t  return (0, _mathUtils.applyTransform)(pt, xform);\n\t}\n\t\n\t/**\n\t * Adjust scale from rendered scale to a normalized scale (100%).\n\t *\n\t * @param {SVGElement} svg The SVG to gather metadata from\n\t * @param {Object} rect A map of numeric values to scale\n\t * @return {Object} A copy of `rect` with values scaled down\n\t */\n\tfunction scaleDown(svg, rect) {\n\t  var result = {};\n\t\n\t  var _getMetadata5 = getMetadata(svg);\n\t\n\t  var viewport = _getMetadata5.viewport;\n\t\n\t\n\t  Object.keys(rect).forEach(function (key) {\n\t    result[key] = rect[key] / viewport.scale;\n\t  });\n\t\n\t  return result;\n\t}\n\t\n\t/**\n\t * Get the scroll position of an element, accounting for parent elements\n\t *\n\t * @param {Element} el The element to get the scroll position for\n\t * @return {Object} The scrollTop and scrollLeft position\n\t */\n\tfunction getScroll(el) {\n\t  var scrollTop = 0;\n\t  var scrollLeft = 0;\n\t  var parentNode = el;\n\t\n\t  while ((parentNode = parentNode.parentNode) && parentNode !== document) {\n\t    scrollTop += parentNode.scrollTop;\n\t    scrollLeft += parentNode.scrollLeft;\n\t  }\n\t\n\t  return { scrollTop: scrollTop, scrollLeft: scrollLeft };\n\t}\n\t\n\t/**\n\t * Get the offset position of an element, accounting for parent elements\n\t *\n\t * @param {Element} el The element to get the offset position for\n\t * @return {Object} The offsetTop and offsetLeft position\n\t */\n\tfunction getOffset(el) {\n\t  var parentNode = el;\n\t\n\t  while ((parentNode = parentNode.parentNode) && parentNode !== document) {\n\t    if (parentNode.nodeName.toUpperCase() === 'SVG') {\n\t      break;\n\t    }\n\t  }\n\t\n\t  var rect = parentNode.getBoundingClientRect();\n\t\n\t  return { offsetLeft: rect.left, offsetTop: rect.top };\n\t}\n\t\n\t/**\n\t * Disable user ability to select text on page\n\t */\n\tfunction disableUserSelect() {\n\t  if (!userSelectStyleSheet.parentNode) {\n\t    document.head.appendChild(userSelectStyleSheet);\n\t  }\n\t}\n\t\n\t/**\n\t * Enable user ability to select text on page\n\t */\n\tfunction enableUserSelect() {\n\t  if (userSelectStyleSheet.parentNode) {\n\t    userSelectStyleSheet.parentNode.removeChild(userSelectStyleSheet);\n\t  }\n\t}\n\t\n\t/**\n\t * Get the metadata for a SVG container\n\t *\n\t * @param {SVGElement} svg The SVG container to get metadata for\n\t */\n\tfunction getMetadata(svg) {\n\t  return {\n\t    documentId: svg.getAttribute('data-pdf-annotate-document'),\n\t    pageNumber: parseInt(svg.getAttribute('data-pdf-annotate-page'), 10),\n\t    viewport: JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'))\n\t  };\n\t}\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function createStyleSheet(blocks) {\n\t  var style = document.createElement('style');\n\t  var text = Object.keys(blocks).map(function (selector) {\n\t    return processRuleSet(selector, blocks[selector]);\n\t  }).join('\\n');\n\t  \n\t  style.setAttribute('type', 'text/css');\n\t  style.appendChild(document.createTextNode(text));\n\t\n\t  return style;\n\t}\n\t\n\tfunction processRuleSet(selector, block) {\n\t  return selector + ' {\\n' + processDeclarationBlock(block) + '\\n}';\n\t}\n\t\n\tfunction processDeclarationBlock(block) {\n\t  return Object.keys(block).map(function (prop) {\n\t    return processDeclaration(prop, block[prop]);\n\t  }).join('\\n');\n\t}\n\t\n\tfunction processDeclaration(prop, value) {\n\t  if (!isNaN(value) && value != 0) {\n\t    value = value + 'px';\n\t  }\n\t\n\t  return hyphenate(prop) + ': ' + value + ';';\n\t}\n\t\n\tfunction hyphenate(prop) {\n\t  return prop.replace(/[A-Z]/g, function (match) {\n\t    return '-' + match.toLowerCase();\n\t  });\n\t}\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getTranslation = getTranslation;\n\texports.appendChild = appendChild;\n\texports.transformChild = transformChild;\n\t\n\tvar _objectAssign = __webpack_require__(9);\n\t\n\tvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\t\n\tvar _renderLine = __webpack_require__(10);\n\t\n\tvar _renderLine2 = _interopRequireDefault(_renderLine);\n\t\n\tvar _renderPath = __webpack_require__(13);\n\t\n\tvar _renderPath2 = _interopRequireDefault(_renderPath);\n\t\n\tvar _renderPoint = __webpack_require__(14);\n\t\n\tvar _renderPoint2 = _interopRequireDefault(_renderPoint);\n\t\n\tvar _renderRect = __webpack_require__(15);\n\t\n\tvar _renderRect2 = _interopRequireDefault(_renderRect);\n\t\n\tvar _renderText = __webpack_require__(16);\n\t\n\tvar _renderText2 = _interopRequireDefault(_renderText);\n\t\n\tvar _renderCircle = __webpack_require__(17);\n\t\n\tvar _renderCircle2 = _interopRequireDefault(_renderCircle);\n\t\n\tvar _renderArrow = __webpack_require__(18);\n\t\n\tvar _renderArrow2 = _interopRequireDefault(_renderArrow);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar isFirefox = /firefox/i.test(navigator.userAgent);\n\t\n\t/**\n\t * Get the x/y translation to be used for transforming the annotations\n\t * based on the rotation of the viewport.\n\t *\n\t * @param {Object} viewport The viewport data from the page\n\t * @return {Object}\n\t */\n\tfunction getTranslation(viewport) {\n\t  var x = void 0;\n\t  var y = void 0;\n\t\n\t  // Modulus 360 on the rotation so that we only\n\t  // have to worry about four possible values.\n\t  switch (viewport.rotation % 360) {\n\t    case 0:\n\t      x = y = 0;\n\t      break;\n\t    case 90:\n\t      x = 0;\n\t      y = viewport.width / viewport.scale * -1;\n\t      break;\n\t    case 180:\n\t      x = viewport.width / viewport.scale * -1;\n\t      y = viewport.height / viewport.scale * -1;\n\t      break;\n\t    case 270:\n\t      x = viewport.height / viewport.scale * -1;\n\t      y = 0;\n\t      break;\n\t  }\n\t\n\t  return { x: x, y: y };\n\t}\n\t\n\t/**\n\t * Transform the rotation and scale of a node using SVG's native transform attribute.\n\t *\n\t * @param {Node} node The node to be transformed\n\t * @param {Object} viewport The page's viewport data\n\t * @return {Node}\n\t */\n\tfunction transform(node, viewport) {\n\t  var trans = getTranslation(viewport);\n\t\n\t  // Let SVG natively transform the element\n\t  node.setAttribute('transform', 'scale(' + viewport.scale + ') rotate(' + viewport.rotation + ') translate(' + trans.x + ', ' + trans.y + ')');\n\t\n\t  // Manually adjust x/y for nested SVG nodes\n\t  if (!isFirefox && node.nodeName.toLowerCase() === 'svg') {\n\t    node.setAttribute('x', parseInt(node.getAttribute('x'), 10) * viewport.scale);\n\t    node.setAttribute('y', parseInt(node.getAttribute('y'), 10) * viewport.scale);\n\t\n\t    var x = parseInt(node.getAttribute('x', 10));\n\t    var y = parseInt(node.getAttribute('y', 10));\n\t    var width = parseInt(node.getAttribute('width'), 10);\n\t    var height = parseInt(node.getAttribute('height'), 10);\n\t    var path = node.querySelector('path');\n\t    var svg = path.parentNode;\n\t\n\t    // Scale width/height\n\t    [node, svg, path, node.querySelector('rect')].forEach(function (n) {\n\t      n.setAttribute('width', parseInt(n.getAttribute('width'), 10) * viewport.scale);\n\t      n.setAttribute('height', parseInt(n.getAttribute('height'), 10) * viewport.scale);\n\t    });\n\t\n\t    // Transform path but keep scale at 100% since it will be handled natively\n\t    transform(path, (0, _objectAssign2.default)({}, viewport, { scale: 1 }));\n\t\n\t    switch (viewport.rotation % 360) {\n\t      case 90:\n\t        node.setAttribute('x', viewport.width - y - width);\n\t        node.setAttribute('y', x);\n\t        svg.setAttribute('x', 1);\n\t        svg.setAttribute('y', 0);\n\t        break;\n\t      case 180:\n\t        node.setAttribute('x', viewport.width - x - width);\n\t        node.setAttribute('y', viewport.height - y - height);\n\t        svg.setAttribute('y', 2);\n\t        break;\n\t      case 270:\n\t        node.setAttribute('x', y);\n\t        node.setAttribute('y', viewport.height - x - height);\n\t        svg.setAttribute('x', -1);\n\t        svg.setAttribute('y', 0);\n\t        break;\n\t    }\n\t  }\n\t\n\t  return node;\n\t}\n\t\n\t/**\n\t * Append an annotation as a child of an SVG.\n\t *\n\t * @param {SVGElement} svg The SVG element to append the annotation to\n\t * @param {Object} annotation The annotation definition to render and append\n\t * @param {Object} viewport The page's viewport data\n\t * @return {SVGElement} A node that was created and appended by this function\n\t */\n\tfunction appendChild(svg, annotation, viewport) {\n\t  if (!viewport) {\n\t    viewport = JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'));\n\t  }\n\t\n\t  var child = void 0;\n\t  switch (annotation.type) {\n\t    case 'area':\n\t    case 'highlight':\n\t      child = (0, _renderRect2.default)(annotation);\n\t      break;\n\t    case 'circle':\n\t    case 'fillcircle':\n\t    case 'emptycircle':\n\t      child = (0, _renderCircle2.default)(annotation);\n\t      break;\n\t    case 'strikeout':\n\t      child = (0, _renderLine2.default)(annotation);\n\t      break;\n\t    case 'point':\n\t      child = (0, _renderPoint2.default)(annotation);\n\t      break;\n\t    case 'textbox':\n\t      child = (0, _renderText2.default)(annotation);\n\t      break;\n\t    case 'drawing':\n\t      child = (0, _renderPath2.default)(annotation);\n\t      break;\n\t    case 'arrow':\n\t      child = (0, _renderArrow2.default)(annotation);\n\t      break;\n\t  }\n\t\n\t  // If no type was provided for an annotation it will result in node being null.\n\t  // Skip appending/transforming if node doesn't exist.\n\t  if (child) {\n\t    // Set attributes\n\t    child.setAttribute('data-pdf-annotate-id', annotation.uuid);\n\t    child.setAttribute('data-pdf-annotate-type', annotation.type);\n\t    child.setAttribute('aria-hidden', true);\n\t\n\t    svg.appendChild(transform(child, viewport));\n\t  }\n\t\n\t  return child;\n\t}\n\t\n\t/**\n\t * Transform a child annotation of an SVG.\n\t *\n\t * @param {SVGElement} svg The SVG element with the child annotation\n\t * @param {Object} child The SVG child to transform\n\t * @param {Object} viewport The page's viewport data\n\t * @return {SVGElement} A node that was transformed by this function\n\t */\n\tfunction transformChild(svg, child, viewport) {\n\t  if (!viewport) {\n\t    viewport = JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'));\n\t  }\n\t\n\t  // If no type was provided for an annotation it will result in node being null.\n\t  // Skip transforming if node doesn't exist.\n\t  if (child) {\n\t    child = transform(child, viewport);\n\t  }\n\t\n\t  return child;\n\t}\n\t\n\texports.default = {\n\t  /**\n\t   * Get the x/y translation to be used for transforming the annotations\n\t   * based on the rotation of the viewport.\n\t   */\n\t  getTranslation: getTranslation,\n\t\n\t  /**\n\t   * Append an SVG child for an annotation\n\t   */\n\t  appendChild: appendChild,\n\t\n\t  /**\n\t   * Transform an existing SVG child\n\t   */\n\t  transformChild: transformChild\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t/* eslint-disable no-unused-vars */\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\t\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\t\n\t\treturn Object(val);\n\t}\n\t\n\tfunction shouldUseNative() {\n\t\ttry {\n\t\t\tif (!Object.assign) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// Detect buggy property enumeration order in older V8 versions.\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\t\tvar test1 = new String('abc');  // eslint-disable-line\n\t\t\ttest1[5] = 'de';\n\t\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test2 = {};\n\t\t\tfor (var i = 0; i < 10; i++) {\n\t\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t\t}\n\t\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\t\treturn test2[n];\n\t\t\t});\n\t\t\tif (order2.join('') !== '0123456789') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test3 = {};\n\t\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\t\ttest3[letter] = letter;\n\t\t\t});\n\t\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\t\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\t\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (Object.getOwnPropertySymbols) {\n\t\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn to;\n\t};\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderLine;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tvar _normalizeColor = __webpack_require__(12);\n\t\n\tvar _normalizeColor2 = _interopRequireDefault(_normalizeColor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Create SVGLineElements from an annotation definition.\n\t * This is used for anntations of type `strikeout`.\n\t *\n\t * @param {Object} a The annotation definition\n\t * @return {SVGGElement} A group of all lines to be rendered\n\t */\n\tfunction renderLine(a) {\n\t  var group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n\t  (0, _setAttributes2.default)(group, {\n\t    stroke: (0, _normalizeColor2.default)(a.color || '#f00'),\n\t    strokeWidth: 1\n\t  });\n\t\n\t  a.rectangles.forEach(function (r) {\n\t    var line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n\t\n\t    (0, _setAttributes2.default)(line, {\n\t      x1: r.x,\n\t      y1: r.y,\n\t      x2: r.x + r.width,\n\t      y2: r.y\n\t    });\n\t\n\t    group.appendChild(line);\n\t  });\n\t\n\t  return group;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = setAttributes;\n\tvar UPPER_REGEX = /[A-Z]/g;\n\t\n\t// Don't convert these attributes from camelCase to hyphenated-attributes\n\tvar BLACKLIST = ['viewBox'];\n\t\n\tvar keyCase = function keyCase(key) {\n\t  if (BLACKLIST.indexOf(key) === -1) {\n\t    key = key.replace(UPPER_REGEX, function (match) {\n\t      return '-' + match.toLowerCase();\n\t    });\n\t  }\n\t  return key;\n\t};\n\t\n\t/**\n\t * Set attributes for a node from a map\n\t *\n\t * @param {Node} node The node to set attributes on\n\t * @param {Object} attributes The map of key/value pairs to use for attributes\n\t */\n\tfunction setAttributes(node, attributes) {\n\t  Object.keys(attributes).forEach(function (key) {\n\t    node.setAttribute(keyCase(key), attributes[key]);\n\t  });\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = normalizeColor;\n\tvar REGEX_HASHLESS_HEX = /^([a-f0-9]{6}|[a-f0-9]{3})$/i;\n\t\n\t/**\n\t * Normalize a color value\n\t *\n\t * @param {String} color The color to normalize\n\t * @return {String}\n\t */\n\tfunction normalizeColor(color) {\n\t  if (REGEX_HASHLESS_HEX.test(color)) {\n\t    color = \"#\" + color;\n\t  }\n\t  return color;\n\t}\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderPath;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tvar _normalizeColor = __webpack_require__(12);\n\t\n\tvar _normalizeColor2 = _interopRequireDefault(_normalizeColor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Create SVGPathElement from an annotation definition.\n\t * This is used for anntations of type `drawing`.\n\t *\n\t * @param {Object} a The annotation definition\n\t * @return {SVGPathElement} The path to be rendered\n\t */\n\tfunction renderPath(a) {\n\t  var d = [];\n\t  var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t\n\t  for (var i = 0, l = a.lines.length; i < l; i++) {\n\t    var p1 = a.lines[i];\n\t    var p2 = a.lines[i + 1];\n\t    if (p2) {\n\t      d.push('M' + p1[0] + ' ' + p1[1] + ' ' + p2[0] + ' ' + p2[1]);\n\t    }\n\t  }\n\t\n\t  /*\n\t    \n\t     if(a.lines.length>2) {\n\t      var p1 = a.lines[0];\n\t      var p2 = a.lines[a.lines.length-1];\n\t  \n\t      var p3 = []; //arrow \n\t      var p4 = [];\n\t      var p0 = []; //arrow intersection\n\t  \n\t  \n\t   \n\t      if (p2) {\n\t        var k = -(p2[0]-p1[0])/(p2[1]-p1[1]);\n\t  \n\t        var deltaX = 3;\n\t        p0[0] = p1[0]+0.8*(p2[0]-p1[0]);\n\t        p0[1] = p1[1]+0.8*(p2[1]-p1[1]);\n\t  \n\t        p3[0] = p0[0] + deltaX;\n\t        p3[1] = p0[1] + k*deltaX;\n\t  \n\t        p4[0] = p0[0] - deltaX;\n\t        p4[1] = p0[1] - k*deltaX;\n\t  \n\t        if(Math.abs(p2[1]-p1[1]) < 20) {\n\t  \n\t          p3[0] = p0[0] ;\n\t          p3[1] = p0[1] + deltaX*1;\n\t  \n\t          p4[0] = p0[0] ;\n\t          p4[1] = p0[1] - deltaX*1;\n\t  \n\t        }\n\t  \n\t        d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n\t         //d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n\t        d.push(`M${p2[0]} ${p2[1]} ${p3[0]} ${p3[1]}`);\n\t        d.push(`M${p3[0]} ${p3[1]} ${p4[0]} ${p4[1]}`);\n\t        d.push(`M${p4[0]} ${p4[1]} ${p2[0]} ${p2[1]}`);\n\t       }\n\t      }*/\n\t\n\t  (0, _setAttributes2.default)(path, {\n\t    d: d.join(' ') + 'Z',\n\t    stroke: (0, _normalizeColor2.default)(a.color || '#000'),\n\t    strokeWidth: a.width || 1,\n\t    fill: 'none'\n\t  });\n\t\n\t  return path;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderPoint;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar SIZE = 25;\n\tvar D = 'M499.968 214.336q-113.832 0 -212.877 38.781t-157.356 104.625 -58.311 142.29q0 62.496 39.897 119.133t112.437 97.929l48.546 27.9 -15.066 53.568q-13.392 50.778 -39.06 95.976 84.816 -35.154 153.45 -95.418l23.994 -21.204 31.806 3.348q38.502 4.464 72.54 4.464 113.832 0 212.877 -38.781t157.356 -104.625 58.311 -142.29 -58.311 -142.29 -157.356 -104.625 -212.877 -38.781z';\n\t\n\t/**\n\t * Create SVGElement from an annotation definition.\n\t * This is used for anntations of type `comment`.\n\t *\n\t * @param {Object} a The annotation definition\n\t * @return {SVGElement} A svg to be rendered\n\t */\n\tfunction renderPoint(a) {\n\t  var outerSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t  var innerSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t  var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n\t  var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t\n\t  (0, _setAttributes2.default)(outerSVG, {\n\t    width: SIZE,\n\t    height: SIZE,\n\t    x: a.x,\n\t    y: a.y\n\t  });\n\t\n\t  (0, _setAttributes2.default)(innerSVG, {\n\t    width: SIZE,\n\t    height: SIZE,\n\t    x: 0,\n\t    y: SIZE * 0.05 * -1,\n\t    viewBox: '0 0 1000 1000'\n\t  });\n\t\n\t  (0, _setAttributes2.default)(rect, {\n\t    width: SIZE,\n\t    height: SIZE,\n\t    stroke: '#000',\n\t    fill: '#ff0'\n\t  });\n\t\n\t  (0, _setAttributes2.default)(path, {\n\t    d: D,\n\t    strokeWidth: 50,\n\t    stroke: '#000',\n\t    fill: '#fff'\n\t  });\n\t\n\t  innerSVG.appendChild(path);\n\t  outerSVG.appendChild(rect);\n\t  outerSVG.appendChild(innerSVG);\n\t\n\t  return outerSVG;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\texports.default = renderRect;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tvar _normalizeColor = __webpack_require__(12);\n\t\n\tvar _normalizeColor2 = _interopRequireDefault(_normalizeColor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Create SVGRectElements from an annotation definition.\n\t * This is used for anntations of type `area` and `highlight`.\n\t *\n\t * @param {Object} a The annotation definition\n\t * @return {SVGGElement|SVGRectElement} A group of all rects to be rendered\n\t */\n\tfunction renderRect(a) {\n\t  if (a.type === 'highlight') {\n\t    var _ret = function () {\n\t      var group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n\t      (0, _setAttributes2.default)(group, {\n\t        fill: (0, _normalizeColor2.default)(a.color || '#ff0'),\n\t        fillOpacity: 0.2\n\t      });\n\t\n\t      a.rectangles.forEach(function (r) {\n\t        group.appendChild(createRect(r));\n\t      });\n\t\n\t      return {\n\t        v: group\n\t      };\n\t    }();\n\t\n\t    if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t  } else {\n\t    var rect = createRect(a);\n\t    (0, _setAttributes2.default)(rect, {\n\t      stroke: (0, _normalizeColor2.default)(a.color || '#f00'),\n\t      fill: 'none'\n\t    });\n\t\n\t    return rect;\n\t  }\n\t}\n\t\n\tfunction createRect(r) {\n\t  var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n\t\n\t  (0, _setAttributes2.default)(rect, {\n\t    x: r.x,\n\t    y: r.y,\n\t    width: r.width,\n\t    height: r.height\n\t  });\n\t\n\t  return rect;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderText;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tvar _normalizeColor = __webpack_require__(12);\n\t\n\tvar _normalizeColor2 = _interopRequireDefault(_normalizeColor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Create SVGTextElement from an annotation definition.\n\t * This is used for anntations of type `textbox`.\n\t *\n\t * @param {Object} a The annotation definition\n\t * @return {SVGTextElement} A text to be rendered\n\t */\n\tfunction renderText(a) {\n\t  var text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n\t\n\t  (0, _setAttributes2.default)(text, {\n\t    x: a.x,\n\t    y: a.y + parseInt(a.size, 10),\n\t    fill: (0, _normalizeColor2.default)(a.color || '#000'),\n\t    fontSize: a.size\n\t  });\n\t  text.innerHTML = a.content;\n\t\n\t  return text;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderCircle;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tvar _normalizeColor = __webpack_require__(12);\n\t\n\tvar _normalizeColor2 = _interopRequireDefault(_normalizeColor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Create SVGRectElements from an annotation definition.\n\t * This is used for annotations of type `circle`.\n\t *\n\t * @param {Object} a The annotation definition\n\t * @return {SVGGElement|SVGCircleElement} A circle to be rendered\n\t */\n\tfunction renderCircle(a) {\n\t  var circle = createCircle(a);\n\t\n\t  if (a.type === 'circle') (0, _setAttributes2.default)(circle, {\n\t    stroke: (0, _normalizeColor2.default)(a.color || '#f00'),\n\t    fill: 'none',\n\t    'stroke-width': 5\n\t  });\n\t  if (a.type === 'emptycircle') (0, _setAttributes2.default)(circle, {\n\t    stroke: (0, _normalizeColor2.default)(a.color || '#f00'),\n\t    fill: 'none',\n\t    'stroke-width': 2\n\t  });\n\t\n\t  if (a.type === 'fillcircle') (0, _setAttributes2.default)(circle, {\n\t    stroke: (0, _normalizeColor2.default)(a.color || '#f00'),\n\t    fill: '#f00',\n\t    'stroke-width': 5\n\t  });\n\t\n\t  return circle;\n\t}\n\t\n\tfunction createCircle(r) {\n\t  var circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\t  (0, _setAttributes2.default)(circle, {\n\t    cx: r.cx,\n\t    cy: r.cy,\n\t    r: 30\n\t  });\n\t\n\t  return circle;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderArrow;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tvar _normalizeColor = __webpack_require__(12);\n\t\n\tvar _normalizeColor2 = _interopRequireDefault(_normalizeColor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Create SVGPathElement from an annotation definition.\n\t * This is used for anntations of type `drawing`.\n\t *\n\t * @param {Object} a The annotation definition\n\t * @return {SVGPathElement} The path to be rendered\n\t */\n\tfunction renderArrow(a) {\n\t  var d = [];\n\t  var arrow = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t\n\t  /*\n\t  for (let i=0, l=a.lines.length; i<l; i++) {\n\t    var p1 = a.lines[i];\n\t    var p2 = a.lines[i+1];\n\t    if (p2) {\n\t      d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n\t    }\n\t  }*/\n\t\n\t  if (a.lines.length > 2) {\n\t    var p1 = a.lines[0];\n\t    var p2 = a.lines[a.lines.length - 1];\n\t\n\t    var p3 = []; //arrow \n\t    var p4 = [];\n\t    var p0 = []; //arrow intersection\n\t\n\t\n\t    if (p2) {\n\t      var k = -(p2[0] - p1[0]) / (p2[1] - p1[1]);\n\t\n\t      var deltaX = 3;\n\t      p0[0] = p1[0] + 0.8 * (p2[0] - p1[0]);\n\t      p0[1] = p1[1] + 0.8 * (p2[1] - p1[1]);\n\t\n\t      p3[0] = p0[0] + deltaX;\n\t      p3[1] = p0[1] + k * deltaX;\n\t\n\t      p4[0] = p0[0] - deltaX;\n\t      p4[1] = p0[1] - k * deltaX;\n\t\n\t      //avoid the fat arrow\n\t      var dist = Math.sqrt((p4[0] - p3[0]) * (p4[0] - p3[0]) + (p4[1] - p3[1]) * (p4[1] - p3[1]));\n\t\n\t      if (Math.abs(p2[1] - p1[1]) < 20 || dist > 8) {\n\t\n\t        p3[0] = p0[0];\n\t        p3[1] = p0[1] + deltaX * 1;\n\t\n\t        p4[0] = p0[0];\n\t        p4[1] = p0[1] - deltaX * 1;\n\t      }\n\t      d.push('M' + p1[0] + ' ' + p1[1] + ' ' + p2[0] + ' ' + p2[1]);\n\t      //d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n\t      d.push('M' + p2[0] + ' ' + p2[1] + ' ' + p3[0] + ' ' + p3[1]);\n\t      d.push('M' + p3[0] + ' ' + p3[1] + ' ' + p4[0] + ' ' + p4[1]);\n\t      d.push('M' + p4[0] + ' ' + p4[1] + ' ' + p2[0] + ' ' + p2[1]);\n\t    }\n\t  }\n\t\n\t  (0, _setAttributes2.default)(arrow, {\n\t    d: d.join(' ') + 'Z',\n\t    stroke: (0, _normalizeColor2.default)(a.color || '#000'),\n\t    strokeWidth: a.width || 1,\n\t    fill: '#000'\n\t  });\n\t\n\t  return arrow;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.applyTransform = applyTransform;\n\texports.applyInverseTransform = applyInverseTransform;\n\texports.transform = transform;\n\texports.translate = translate;\n\texports.rotate = rotate;\n\texports.scale = scale;\n\t// Transform point by matrix\n\t//\n\tfunction applyTransform(p, m) {\n\t  var xt = p[0] * m[0] + p[1] * m[2] + m[4];\n\t  var yt = p[0] * m[1] + p[1] * m[3] + m[5];\n\t  return [xt, yt];\n\t};\n\t\n\t// Transform point by matrix inverse\n\t//\n\tfunction applyInverseTransform(p, m) {\n\t  var d = m[0] * m[3] - m[1] * m[2];\n\t  var xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n\t  var yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n\t  return [xt, yt];\n\t};\n\t\n\t// Concatenates two transformation matrices together and returns the result.\n\tfunction transform(m1, m2) {\n\t  return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n\t};\n\t\n\tfunction translate(m, x, y) {\n\t  return [m[0], m[1], m[2], m[3], m[0] * x + m[2] * y + m[4], m[1] * x + m[3] * y + m[5]];\n\t};\n\t\n\tfunction rotate(m, angle) {\n\t  angle = angle * Math.PI / 180;\n\t\n\t  var cosValue = Math.cos(angle);\n\t  var sinValue = Math.sin(angle);\n\t\n\t  return [m[0] * cosValue + m[2] * sinValue, m[1] * cosValue + m[3] * sinValue, m[0] * -sinValue + m[2] * cosValue, m[1] * -sinValue + m[3] * cosValue, m[4], m[5]];\n\t};\n\t\n\tfunction scale(m, x, y) {\n\t  return [m[0] * x, m[1] * x, m[2] * y, m[3] * y, m[4], m[5]];\n\t};\n\t\n\tfunction getInverseTransform(m) {\n\t  var d = m[0] * m[3] - m[1] * m[2];\n\t  return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n\t};\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _uuid = __webpack_require__(21);\n\t\n\tvar _uuid2 = _interopRequireDefault(_uuid);\n\t\n\tvar _StoreAdapter2 = __webpack_require__(2);\n\t\n\tvar _StoreAdapter3 = _interopRequireDefault(_StoreAdapter2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t// StoreAdapter for working with localStorage\n\t// This is ideal for testing, examples, and prototyping\n\tvar LocalStoreAdapter = function (_StoreAdapter) {\n\t  _inherits(LocalStoreAdapter, _StoreAdapter);\n\t\n\t  function LocalStoreAdapter() {\n\t    _classCallCheck(this, LocalStoreAdapter);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(LocalStoreAdapter).call(this, {\n\t      getAnnotations: function getAnnotations(documentId, pageNumber) {\n\t        return new Promise(function (resolve, reject) {\n\t          var annotations = _getAnnotations(documentId).filter(function (i) {\n\t            return i.page === pageNumber && i.class === 'Annotation';\n\t          });\n\t\n\t          resolve({\n\t            documentId: documentId,\n\t            pageNumber: pageNumber,\n\t            annotations: annotations\n\t          });\n\t        });\n\t      },\n\t      getAnnotation: function getAnnotation(documentId, annotationId) {\n\t        return Promise.resolve(_getAnnotations(documentId)[findAnnotation(documentId, annotationId)]);\n\t      },\n\t      addAnnotation: function addAnnotation(documentId, pageNumber, annotation) {\n\t        return new Promise(function (resolve, reject) {\n\t          annotation.class = 'Annotation';\n\t          annotation.uuid = (0, _uuid2.default)();\n\t          annotation.page = pageNumber;\n\t\n\t          var annotations = _getAnnotations(documentId);\n\t          annotations.push(annotation);\n\t          updateAnnotations(documentId, annotations);\n\t\n\t          resolve(annotation);\n\t        });\n\t      },\n\t      editAnnotation: function editAnnotation(documentId, annotationId, annotation) {\n\t        return new Promise(function (resolve, reject) {\n\t          var annotations = _getAnnotations(documentId);\n\t          annotations[findAnnotation(documentId, annotationId)] = annotation;\n\t          updateAnnotations(documentId, annotations);\n\t\n\t          resolve(annotation);\n\t        });\n\t      },\n\t      deleteAnnotation: function deleteAnnotation(documentId, annotationId) {\n\t        return new Promise(function (resolve, reject) {\n\t          var index = findAnnotation(documentId, annotationId);\n\t          if (index > -1) {\n\t            var annotations = _getAnnotations(documentId);\n\t            annotations.splice(index, 1);\n\t            updateAnnotations(documentId, annotations);\n\t          }\n\t\n\t          resolve(true);\n\t        });\n\t      },\n\t      getComments: function getComments(documentId, annotationId) {\n\t        return new Promise(function (resolve, reject) {\n\t          resolve(_getAnnotations(documentId).filter(function (i) {\n\t            return i.class === 'Comment' && i.annotation === annotationId;\n\t          }));\n\t        });\n\t      },\n\t      addComment: function addComment(documentId, annotationId, content) {\n\t        return new Promise(function (resolve, reject) {\n\t          var comment = {\n\t            class: 'Comment',\n\t            uuid: (0, _uuid2.default)(),\n\t            annotation: annotationId,\n\t            content: content\n\t          };\n\t\n\t          var annotations = _getAnnotations(documentId);\n\t          annotations.push(comment);\n\t          updateAnnotations(documentId, annotations);\n\t\n\t          resolve(comment);\n\t        });\n\t      },\n\t      deleteComment: function deleteComment(documentId, commentId) {\n\t        return new Promise(function (resolve, reject) {\n\t          _getAnnotations(documentId);\n\t          var index = -1;\n\t          var annotations = _getAnnotations(documentId);\n\t          for (var i = 0, l = annotations.length; i < l; i++) {\n\t            if (annotations[i].uuid === commentId) {\n\t              index = i;\n\t              break;\n\t            }\n\t          }\n\t\n\t          if (index > -1) {\n\t            annotations.splice(index, 1);\n\t            updateAnnotations(documentId, annotations);\n\t          }\n\t\n\t          resolve(true);\n\t        });\n\t      }\n\t    }));\n\t  }\n\t\n\t  return LocalStoreAdapter;\n\t}(_StoreAdapter3.default);\n\t\n\texports.default = LocalStoreAdapter;\n\t\n\t\n\tfunction _getAnnotations(documentId) {\n\t  return JSON.parse(localStorage.getItem(documentId + '/annotations')) || [];\n\t}\n\t\n\tfunction updateAnnotations(documentId, annotations) {\n\t  localStorage.setItem(documentId + '/annotations', JSON.stringify(annotations));\n\t}\n\t\n\tfunction findAnnotation(documentId, annotationId) {\n\t  var index = -1;\n\t  var annotations = _getAnnotations(documentId);\n\t  for (var i = 0, l = annotations.length; i < l; i++) {\n\t    if (annotations[i].uuid === annotationId) {\n\t      index = i;\n\t      break;\n\t    }\n\t  }\n\t  return index;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = uuid;\n\tvar REGEXP = /[xy]/g;\n\tvar PATTERN = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n\t\n\tfunction replacement(c) {\n\t  var r = Math.random() * 16 | 0;\n\t  var v = c == 'x' ? r : r & 0x3 | 0x8;\n\t  return v.toString(16);\n\t}\n\t\n\t/**\n\t * Generate a univierally unique identifier\n\t *\n\t * @return {String}\n\t */\n\tfunction uuid() {\n\t  return PATTERN.replace(REGEXP, replacement);\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = render;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _renderScreenReaderHints = __webpack_require__(23);\n\t\n\tvar _renderScreenReaderHints2 = _interopRequireDefault(_renderScreenReaderHints);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Render the response from PDFJSAnnotate.getStoreAdapter().getAnnotations to SVG\n\t *\n\t * @param {SVGElement} svg The SVG element to render the annotations to\n\t * @param {Object} viewport The page viewport data\n\t * @param {Object} data The response from PDFJSAnnotate.getStoreAdapter().getAnnotations\n\t * @return {Promise} Settled once rendering has completed\n\t *  A settled Promise will be either:\n\t *    - fulfilled: SVGElement\n\t *    - rejected: Error\n\t */\n\tfunction render(svg, viewport, data) {\n\t  return new Promise(function (resolve, reject) {\n\t    // Reset the content of the SVG\n\t    svg.setAttribute('data-pdf-annotate-container', true);\n\t    svg.setAttribute('data-pdf-annotate-viewport', JSON.stringify(viewport));\n\t    svg.removeAttribute('data-pdf-annotate-document');\n\t    svg.removeAttribute('data-pdf-annotate-page');\n\t\n\t    // If there's no data nothing can be done\n\t    if (!data) {\n\t      svg.innerHTML = '';\n\t      return resolve(svg);\n\t    }\n\t\n\t    svg.setAttribute('data-pdf-annotate-document', data.documentId);\n\t    svg.setAttribute('data-pdf-annotate-page', data.pageNumber);\n\t\n\t    // Make sure annotations is an array\n\t    if (!Array.isArray(data.annotations) || data.annotations.length === 0) {\n\t      return resolve(svg);\n\t    }\n\t\n\t    // Append or transform annotation to svg\n\t    data.annotations.forEach(function (a) {\n\t      var node = svg.querySelector('[data-pdf-annotate-id=\"' + a.uuid + '\"]');\n\t      if (node) {\n\t        (0, _appendChild.transformChild)(svg, node, viewport);\n\t      } else {\n\t        (0, _appendChild.appendChild)(svg, a, viewport);\n\t      }\n\t    });\n\t\n\t    resolve(svg);\n\t  });\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderScreenReaderHints;\n\t\n\tvar _insertScreenReaderHint = __webpack_require__(24);\n\t\n\tvar _insertScreenReaderHint2 = _interopRequireDefault(_insertScreenReaderHint);\n\t\n\tvar _initEventHandlers = __webpack_require__(31);\n\t\n\tvar _initEventHandlers2 = _interopRequireDefault(_initEventHandlers);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// TODO This is not the right place for this to live\n\t(0, _initEventHandlers2.default)();\n\t\n\t/**\n\t * Insert hints into the DOM for screen readers.\n\t *\n\t * @param {Array} annotations The annotations that hints are inserted for\n\t */\n\tfunction renderScreenReaderHints(annotations) {\n\t  annotations = Array.isArray(annotations) ? annotations : [];\n\t\n\t  // Insert hints for each type\n\t  Object.keys(SORT_TYPES).forEach(function (type) {\n\t    var sortBy = SORT_TYPES[type];\n\t    annotations.filter(function (a) {\n\t      return a.type === type;\n\t    }).sort(sortBy).forEach(function (a, i) {\n\t      return (0, _insertScreenReaderHint2.default)(a, i + 1);\n\t    });\n\t  });\n\t}\n\t\n\t// Sort annotations first by y, then by x.\n\t// This allows hints to be injected in the order they appear,\n\t// which makes numbering them easier.\n\tfunction sortByPoint(a, b) {\n\t  if (a.y < b.y) {\n\t    return a.x - b.x;\n\t  } else {\n\t    return 1;\n\t  }\n\t}\n\t\n\t// Sort annotation by it's first rectangle\n\tfunction sortByRectPoint(a, b) {\n\t  return sortByPoint(a.rectangles[0], b.rectangles[0]);\n\t}\n\t\n\t// Sort annotation by it's first line\n\tfunction sortByLinePoint(a, b) {\n\t  var lineA = a.lines[0];\n\t  var lineB = b.lines[0];\n\t  return sortByPoint({ x: lineA[0], y: lineA[1] }, { x: lineB[0], y: lineB[1] });\n\t}\n\t\n\t// Arrange supported types and associated sort methods\n\tvar SORT_TYPES = {\n\t  'highlight': sortByRectPoint,\n\t  'strikeout': sortByRectPoint,\n\t  'drawing': sortByLinePoint,\n\t  'textbox': sortByPoint,\n\t  'point': sortByPoint,\n\t  'area': sortByPoint\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = insertScreenReaderHint;\n\t\n\tvar _createScreenReaderOnly = __webpack_require__(25);\n\t\n\tvar _createScreenReaderOnly2 = _interopRequireDefault(_createScreenReaderOnly);\n\t\n\tvar _insertElementWithinChildren = __webpack_require__(26);\n\t\n\tvar _insertElementWithinChildren2 = _interopRequireDefault(_insertElementWithinChildren);\n\t\n\tvar _insertElementWithinElement = __webpack_require__(28);\n\t\n\tvar _insertElementWithinElement2 = _interopRequireDefault(_insertElementWithinElement);\n\t\n\tvar _renderScreenReaderComments = __webpack_require__(29);\n\t\n\tvar _renderScreenReaderComments2 = _interopRequireDefault(_renderScreenReaderComments);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// Annotation types that support comments\n\tvar COMMENT_TYPES = ['highlight', 'point', 'area', 'circle', 'emptycircle', 'fillcircle'];\n\t\n\t/**\n\t * Insert a hint into the DOM for screen readers for a specific annotation.\n\t *\n\t * @param {Object} annotation The annotation to insert a hint for\n\t * @param {Number} num The number of the annotation out of all annotations of the same type\n\t */\n\tfunction insertScreenReaderHint(annotation) {\n\t  var num = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];\n\t\n\t  switch (annotation.type) {\n\t    case 'highlight':\n\t    case 'strikeout':\n\t      var rects = annotation.rectangles;\n\t      var first = rects[0];\n\t      var last = rects[rects.length - 1];\n\t\n\t      (0, _insertElementWithinElement2.default)((0, _createScreenReaderOnly2.default)('Begin ' + annotation.type + ' annotation ' + num, annotation.uuid), first.x, first.y, annotation.page, true);\n\t\n\t      (0, _insertElementWithinElement2.default)((0, _createScreenReaderOnly2.default)('End ' + annotation.type + ' annotation ' + num, annotation.uuid + '-end'), last.x + last.width, last.y, annotation.page, false);\n\t      break;\n\t\n\t    case 'textbox':\n\t    case 'point':\n\t      var text = annotation.type === 'textbox' ? ' (content: ' + annotation.content + ')' : '';\n\t\n\t      (0, _insertElementWithinChildren2.default)((0, _createScreenReaderOnly2.default)(annotation.type + ' annotation ' + num + text, annotation.uuid), annotation.x, annotation.y, annotation.page);\n\t      break;\n\t\n\t    case 'drawing':\n\t    case 'area':\n\t      var x = typeof annotation.x !== 'undefined' ? annotation.x : annotation.lines[0][0];\n\t      var y = typeof annotation.y !== 'undefined' ? annotation.y : annotation.lines[0][1];\n\t\n\t      (0, _insertElementWithinChildren2.default)((0, _createScreenReaderOnly2.default)('Unlabeled drawing', annotation.uuid), x, y, annotation.page);\n\t      break;\n\t\n\t    case 'circle':\n\t    case 'fillcircle':\n\t    case 'emptycircle':\n\t      var x2 = typeof annotation.cx !== 'undefined' ? annotation.cx : annotation.lines[0][0];\n\t      var y2 = typeof annotation.cy !== 'undefined' ? annotation.cy : annotation.lines[0][1];\n\t\n\t      (0, _insertElementWithinChildren2.default)((0, _createScreenReaderOnly2.default)('Unlabeled drawing', annotation.uuid), x2, y2, annotation.page);\n\t      break;\n\t  }\n\t\n\t  // Include comments in screen reader hint\n\t  if (COMMENT_TYPES.includes(annotation.type)) {\n\t    (0, _renderScreenReaderComments2.default)(annotation.documentId, annotation.uuid);\n\t  }\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = createScreenReaderOnly;\n\t/**\n\t * Create a node that is only visible to screen readers\n\t *\n\t * @param {String} content The text content that should be read by screen reader\n\t * @param {String} [annotationId] The ID of the annotation assocaited\n\t * @return {Element} An Element that is only visible to screen readers\n\t */\n\tfunction createScreenReaderOnly(content, annotationId) {\n\t  var node = document.createElement('div');\n\t  var text = document.createTextNode(content);\n\t  node.appendChild(text);\n\t  node.setAttribute('id', 'pdf-annotate-screenreader-' + annotationId);\n\t  node.style.position = 'absolute';\n\t  node.style.left = '-10000px';\n\t  node.style.top = 'auto';\n\t  node.style.width = '1px';\n\t  node.style.height = '1px';\n\t  node.style.overflow = 'hidden';\n\t  return node;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = insertElementWithinChildren;\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _insertElementWithinElement = __webpack_require__(28);\n\t\n\tvar _insertElementWithinElement2 = _interopRequireDefault(_insertElementWithinElement);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\t/**\n\t * Insert an element at a point within the document.\n\t * This algorithm will try to insert between elements if possible.\n\t * It will however use `insertElementWithinElement` if it is more accurate.\n\t *\n\t * @param {Element} el The element to be inserted\n\t * @param {Number} x The x coordinate of the point\n\t * @param {Number} y The y coordinate of the point\n\t * @param {Number} pageNumber The page number to limit elements to\n\t * @return {Boolean} True if element was able to be inserted, otherwise false\n\t */\n\tfunction insertElementWithinChildren(el, x, y, pageNumber) {\n\t  // Try and use most accurate method of inserting within an element\n\t  if ((0, _insertElementWithinElement2.default)(el, x, y, pageNumber, true)) {\n\t    return true;\n\t  }\n\t\n\t  // Fall back to inserting between elements\n\t  var svg = document.querySelector('svg[data-pdf-annotate-page=\"' + pageNumber + '\"]');\n\t  var rect = svg.getBoundingClientRect();\n\t  var nodes = [].concat(_toConsumableArray(svg.parentNode.querySelectorAll(_config2.default.textClassQuery() + ' > div')));\n\t\n\t  y = (0, _utils.scaleUp)(svg, { y: y }).y + rect.top;\n\t  x = (0, _utils.scaleUp)(svg, { x: x }).x + rect.left;\n\t\n\t  // Find the best node to insert before\n\t  for (var i = 0, l = nodes.length; i < l; i++) {\n\t    var n = nodes[i];\n\t    var r = n.getBoundingClientRect();\n\t    if (y <= r.top) {\n\t      n.parentNode.insertBefore(el, n);\n\t      return true;\n\t    }\n\t  }\n\t\n\t  // If all else fails try to append to the bottom\n\t  var textLayer = svg.parentNode.querySelector(_config2.default.textClassQuery());\n\t  if (textLayer) {\n\t    var textRect = textLayer.getBoundingClientRect();\n\t    if ((0, _utils.pointIntersectsRect)(x, y, textRect)) {\n\t      textLayer.appendChild(el);\n\t      return true;\n\t    }\n\t  }\n\t\n\t  return false;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = {\n\t    annotationLayerName: 'annotationLayer',\n\t    textLayerName: 'textLayer',\n\t    annotationSvgQuery: function annotationSvgQuery() {\n\t        return 'svg.' + this.annotationLayerName;\n\t    },\n\t    annotationClassQuery: function annotationClassQuery() {\n\t        return '.' + this.annotationLayerName;\n\t    },\n\t    textClassQuery: function textClassQuery() {\n\t        return '.' + this.textLayerName;\n\t    }\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = insertElementWithinElement;\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\t/**\n\t * Insert an element at a point within the document.\n\t * This algorithm will only insert within an element amidst it's text content.\n\t *\n\t * @param {Element} el The element to be inserted\n\t * @param {Number} x The x coordinate of the point\n\t * @param {Number} y The y coordinate of the point\n\t * @param {Number} pageNumber The page number to limit elements to\n\t * @param {Boolean} insertBefore Whether the element is to be inserted before or after x\n\t * @return {Boolean} True if element was able to be inserted, otherwise false\n\t */\n\tfunction insertElementWithinElement(el, x, y, pageNumber, insertBefore) {\n\t  var OFFSET_ADJUST = 2;\n\t\n\t  // If inserting before adjust `x` by looking for element a few px to the right\n\t  // Otherwise adjust a few px to the left\n\t  // This is to allow a little tolerance by searching within the box, instead\n\t  // of getting a false negative by testing right on the border.\n\t  x = Math.max(x + OFFSET_ADJUST * (insertBefore ? 1 : -1), 0);\n\t\n\t  var node = textLayerElementFromPoint(x, y + OFFSET_ADJUST, pageNumber);\n\t  if (!node) {\n\t    return false;\n\t  }\n\t\n\t  // Now that node has been found inverse the adjustment for `x`.\n\t  // This is done to accomodate tolerance by cutting off on the outside of the\n\t  // text boundary, instead of missing a character by cutting off within.\n\t  x = x + OFFSET_ADJUST * (insertBefore ? -1 : 1);\n\t\n\t  var svg = document.querySelector('svg[data-pdf-annotate-page=\"' + pageNumber + '\"]');\n\t  var left = (0, _utils.scaleDown)(svg, { left: node.getBoundingClientRect().left }).left - svg.getBoundingClientRect().left;\n\t  var temp = node.cloneNode(true);\n\t  var head = temp.innerHTML.split('');\n\t  var tail = [];\n\t\n\t  // Insert temp off screen\n\t  temp.style.position = 'absolute';\n\t  temp.style.top = '-10000px';\n\t  temp.style.left = '-10000px';\n\t  document.body.appendChild(temp);\n\t\n\t  while (head.length) {\n\t    // Don't insert within HTML tags\n\t    if (head[head.length - 1] === '>') {\n\t      while (head.length) {\n\t        tail.unshift(head.pop());\n\t        if (tail[0] === '<') {\n\t          break;\n\t        }\n\t      }\n\t    }\n\t\n\t    // Check if width of temp based on current head value satisfies x\n\t    temp.innerHTML = head.join('');\n\t    var width = (0, _utils.scaleDown)(svg, { width: temp.getBoundingClientRect().width }).width;\n\t    if (left + width <= x) {\n\t      break;\n\t    }\n\t    tail.unshift(head.pop());\n\t  }\n\t\n\t  // Update original node with new markup, including element to be inserted\n\t  node.innerHTML = head.join('') + el.outerHTML + tail.join('');\n\t  temp.parentNode.removeChild(temp);\n\t\n\t  return true;\n\t}\n\t\n\t/**\n\t * Get a text layer element at a given point on a page\n\t *\n\t * @param {Number} x The x coordinate of the point\n\t * @param {Number} y The y coordinate of the point\n\t * @param {Number} pageNumber The page to limit elements to\n\t * @return {Element} First text layer element found at the point\n\t */\n\tfunction textLayerElementFromPoint(x, y, pageNumber) {\n\t  var svg = document.querySelector('svg[data-pdf-annotate-page=\"' + pageNumber + '\"]');\n\t  var rect = svg.getBoundingClientRect();\n\t  y = (0, _utils.scaleUp)(svg, { y: y }).y + rect.top;\n\t  x = (0, _utils.scaleUp)(svg, { x: x }).x + rect.left;\n\t  return [].concat(_toConsumableArray(svg.parentNode.querySelectorAll(_config2.default.textClassQuery() + ' [data-canvas-width]'))).filter(function (el) {\n\t    return (0, _utils.pointIntersectsRect)(x, y, el.getBoundingClientRect());\n\t  })[0];\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderScreenReaderComments;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _insertScreenReaderComment = __webpack_require__(30);\n\t\n\tvar _insertScreenReaderComment2 = _interopRequireDefault(_insertScreenReaderComment);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Insert the comments into the DOM to be available by screen reader\n\t *\n\t * Example output:\n\t *   <div class=\"screenReaderOnly\">\n\t *    <div>Begin highlight 1</div>\n\t *    <ol aria-label=\"Comments\">\n\t *      <li>Foo</li>\n\t *      <li>Bar</li>\n\t *      <li>Baz</li>\n\t *      <li>Qux</li>\n\t *    </ol>\n\t *  </div>\n\t *  <div>Some highlighted text goes here...</div>\n\t *  <div class=\"screenReaderOnly\">End highlight 1</div>\n\t *\n\t * NOTE: `screenReaderOnly` is not a real class, just used for brevity\n\t *\n\t * @param {String} documentId The ID of the document\n\t * @param {String} annotationId The ID of the annotation\n\t * @param {Array} [comments] Optionally preloaded comments to be rendered\n\t * @return {Promise}\n\t */\n\tfunction renderScreenReaderComments(documentId, annotationId, comments) {\n\t  var promise = void 0;\n\t\n\t  if (Array.isArray(comments)) {\n\t    promise = Promise.resolve(comments);\n\t  } else {\n\t    promise = _PDFJSAnnotate2.default.getStoreAdapter().getComments(documentId, annotationId);\n\t  }\n\t\n\t  return promise.then(function (comments) {\n\t    // Node needs to be found by querying DOM as it may have been inserted as innerHTML\n\t    // leaving `screenReaderNode` as an invalid reference (see `insertElementWithinElement`).\n\t    var node = document.getElementById('pdf-annotate-screenreader-' + annotationId);\n\t    if (node) {\n\t      var list = document.createElement('ol');\n\t      list.setAttribute('id', 'pdf-annotate-screenreader-comment-list-' + annotationId);\n\t      list.setAttribute('aria-label', 'Comments');\n\t      node.appendChild(list);\n\t      comments.forEach(_insertScreenReaderComment2.default);\n\t    }\n\t  });\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = insertScreenReaderComment;\n\t/**\n\t * Insert a comment into the DOM to be available by screen reader\n\t *\n\t * @param {Object} comment The comment to be inserted\n\t */\n\tfunction insertScreenReaderComment(comment) {\n\t  if (!comment) {\n\t    return;\n\t  }\n\t\n\t  var list = document.querySelector('#pdf-annotate-screenreader-' + comment.annotation + ' ol');\n\t  if (list) {\n\t    var item = document.createElement('li');\n\t    item.setAttribute('id', 'pdf-annotate-screenreader-comment-' + comment.uuid);\n\t    item.appendChild(document.createTextNode('' + comment.content));\n\t    list.appendChild(item);\n\t  }\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = initEventHandlers;\n\t\n\tvar _insertScreenReaderHint = __webpack_require__(24);\n\t\n\tvar _insertScreenReaderHint2 = _interopRequireDefault(_insertScreenReaderHint);\n\t\n\tvar _renderScreenReaderHints = __webpack_require__(23);\n\t\n\tvar _renderScreenReaderHints2 = _interopRequireDefault(_renderScreenReaderHints);\n\t\n\tvar _insertScreenReaderComment = __webpack_require__(30);\n\t\n\tvar _insertScreenReaderComment2 = _interopRequireDefault(_insertScreenReaderComment);\n\t\n\tvar _renderScreenReaderComments = __webpack_require__(29);\n\t\n\tvar _renderScreenReaderComments2 = _interopRequireDefault(_renderScreenReaderComments);\n\t\n\tvar _event = __webpack_require__(4);\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Initialize the event handlers for keeping screen reader hints synced with data\n\t */\n\tfunction initEventHandlers() {\n\t  (0, _event.addEventListener)('annotation:add', function (documentId, pageNumber, annotation) {\n\t    reorderAnnotationsByType(documentId, pageNumber, annotation.type);\n\t  });\n\t  (0, _event.addEventListener)('annotation:edit', function (documentId, annotationId, annotation) {\n\t    reorderAnnotationsByType(documentId, annotation.page, annotation.type);\n\t  });\n\t  (0, _event.addEventListener)('annotation:delete', removeAnnotation);\n\t  (0, _event.addEventListener)('comment:add', insertComment);\n\t  (0, _event.addEventListener)('comment:delete', removeComment);\n\t}\n\t\n\t/**\n\t * Reorder the annotation numbers by annotation type\n\t *\n\t * @param {String} documentId The ID of the document\n\t * @param {Number} pageNumber The page number of the annotations\n\t * @param {Strig} type The annotation type\n\t */\n\tfunction reorderAnnotationsByType(documentId, pageNumber, type) {\n\t  _PDFJSAnnotate2.default.getStoreAdapter().getAnnotations(documentId, pageNumber).then(function (annotations) {\n\t    return annotations.annotations.filter(function (a) {\n\t      return a.type === type;\n\t    });\n\t  }).then(function (annotations) {\n\t    annotations.forEach(function (a) {\n\t      removeAnnotation(documentId, a.uuid);\n\t    });\n\t\n\t    return annotations;\n\t  }).then(_renderScreenReaderHints2.default);\n\t}\n\t\n\t/**\n\t * Remove the screen reader hint for an annotation\n\t *\n\t * @param {String} documentId The ID of the document\n\t * @param {String} annotationId The Id of the annotation\n\t */\n\tfunction removeAnnotation(documentId, annotationId) {\n\t  removeElementById('pdf-annotate-screenreader-' + annotationId);\n\t  removeElementById('pdf-annotate-screenreader-' + annotationId + '-end');\n\t}\n\t\n\t/**\n\t * Insert a screen reader hint for a comment\n\t *\n\t * @param {String} documentId The ID of the document\n\t * @param {String} annotationId The ID of tha assocated annotation\n\t * @param {Object} comment The comment to insert a hint for\n\t */\n\tfunction insertComment(documentId, annotationId, comment) {\n\t  var list = document.querySelector('pdf-annotate-screenreader-comment-list-' + annotationId);\n\t  var promise = void 0;\n\t\n\t  if (!list) {\n\t    promise = (0, _renderScreenReaderComments2.default)(documentId, annotationId, []).then(function () {\n\t      list = document.querySelector('pdf-annotate-screenreader-comment-list-' + annotationId);\n\t      return true;\n\t    });\n\t  } else {\n\t    promise = Promise.resolve(true);\n\t  }\n\t\n\t  promise.then(function () {\n\t    (0, _insertScreenReaderComment2.default)(comment);\n\t  });\n\t}\n\t\n\t/**\n\t * Remove a screen reader hint for a comment\n\t *\n\t * @param {String} documentId The ID of the document\n\t * @param {String} commentId The ID of the comment\n\t */\n\tfunction removeComment(documentId, commentId) {\n\t  removeElementById('pdf-annotate-screenreader-comment-' + commentId);\n\t}\n\t\n\t/**\n\t * Remove an element from the DOM by it's ID if it exists\n\t *\n\t * @param {String} elementID The ID of the element to be removed\n\t */\n\tfunction removeElementById(elementId) {\n\t  var el = document.getElementById(elementId);\n\t  if (el) {\n\t    el.parentNode.removeChild(el);\n\t  }\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _event = __webpack_require__(4);\n\t\n\tvar _edit = __webpack_require__(33);\n\t\n\tvar _pen = __webpack_require__(34);\n\t\n\tvar _arrow = __webpack_require__(35);\n\t\n\tvar _point = __webpack_require__(36);\n\t\n\tvar _rect = __webpack_require__(37);\n\t\n\tvar _text = __webpack_require__(38);\n\t\n\tvar _page = __webpack_require__(39);\n\t\n\texports.default = {\n\t  addEventListener: _event.addEventListener, removeEventListener: _event.removeEventListener, fireEvent: _event.fireEvent,\n\t  disableEdit: _edit.disableEdit, enableEdit: _edit.enableEdit,\n\t  disablePen: _pen.disablePen, enablePen: _pen.enablePen, setPen: _pen.setPen,\n\t  disablePoint: _point.disablePoint, enablePoint: _point.enablePoint,\n\t  disableRect: _rect.disableRect, enableRect: _rect.enableRect,\n\t  disableArrow: _arrow.disableArrow, enableArrow: _arrow.enableArrow,\n\t  disableText: _text.disableText, enableText: _text.enableText, setText: _text.setText,\n\t  createPage: _page.createPage, renderPage: _page.renderPage\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\texports.enableEdit = enableEdit;\n\texports.disableEdit = disableEdit;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _event = __webpack_require__(4);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tvar _enabled = false;\n\tvar isDragging = false,\n\t    overlay = void 0;\n\tvar dragOffsetX = void 0,\n\t    dragOffsetY = void 0,\n\t    dragStartX = void 0,\n\t    dragStartY = void 0;\n\tvar OVERLAY_BORDER_SIZE = 3;\n\t\n\t/**\n\t * Create an overlay for editing an annotation.\n\t *\n\t * @param {Element} target The annotation element to apply overlay for\n\t */\n\tfunction createEditOverlay(target) {\n\t  destroyEditOverlay();\n\t\n\t  overlay = document.createElement('div');\n\t  var anchor = document.createElement('a');\n\t  var parentNode = (0, _utils.findSVGContainer)(target).parentNode;\n\t  var id = target.getAttribute('data-pdf-annotate-id');\n\t  var rect = (0, _utils.getOffsetAnnotationRect)(target);\n\t  var styleLeft = rect.left - OVERLAY_BORDER_SIZE;\n\t  var styleTop = rect.top - OVERLAY_BORDER_SIZE;\n\t\n\t  overlay.setAttribute('id', 'pdf-annotate-edit-overlay');\n\t  overlay.setAttribute('data-target-id', id);\n\t  overlay.style.boxSizing = 'content-box';\n\t  overlay.style.position = 'absolute';\n\t  overlay.style.top = styleTop + 'px';\n\t  overlay.style.left = styleLeft + 'px';\n\t  overlay.style.width = rect.width + 'px';\n\t  overlay.style.height = rect.height + 'px';\n\t  overlay.style.border = OVERLAY_BORDER_SIZE + 'px solid ' + _utils.BORDER_COLOR;\n\t  overlay.style.borderRadius = OVERLAY_BORDER_SIZE + 'px';\n\t\n\t  anchor.innerHTML = '×';\n\t  anchor.setAttribute('href', 'javascript://');\n\t  anchor.style.background = '#fff';\n\t  anchor.style.borderRadius = '20px';\n\t  anchor.style.border = '1px solid #bbb';\n\t  anchor.style.color = '#bbb';\n\t  anchor.style.fontSize = '16px';\n\t  anchor.style.padding = '2px';\n\t  anchor.style.textAlign = 'center';\n\t  anchor.style.textDecoration = 'none';\n\t  anchor.style.position = 'absolute';\n\t  anchor.style.top = '-13px';\n\t  anchor.style.right = '-13px';\n\t  anchor.style.width = '25px';\n\t  anchor.style.height = '25px';\n\t\n\t  overlay.appendChild(anchor);\n\t  parentNode.appendChild(overlay);\n\t  document.addEventListener('click', handleDocumentClick);\n\t  document.addEventListener('keyup', handleDocumentKeyup);\n\t  document.addEventListener('mousedown', handleDocumentMousedown);\n\t  anchor.addEventListener('click', deleteAnnotation);\n\t  anchor.addEventListener('mouseover', function () {\n\t    anchor.style.color = '#35A4DC';\n\t    anchor.style.borderColor = '#999';\n\t    anchor.style.boxShadow = '0 1px 1px #ccc';\n\t  });\n\t  anchor.addEventListener('mouseout', function () {\n\t    anchor.style.color = '#bbb';\n\t    anchor.style.borderColor = '#bbb';\n\t    anchor.style.boxShadow = '';\n\t  });\n\t  overlay.addEventListener('mouseover', function () {\n\t    if (!isDragging) {\n\t      anchor.style.display = '';\n\t    }\n\t  });\n\t  overlay.addEventListener('mouseout', function () {\n\t    anchor.style.display = 'none';\n\t  });\n\t}\n\t\n\t/**\n\t * Destroy the edit overlay if it exists.\n\t */\n\tfunction destroyEditOverlay() {\n\t  if (overlay) {\n\t    overlay.parentNode.removeChild(overlay);\n\t    overlay = null;\n\t  }\n\t\n\t  document.removeEventListener('click', handleDocumentClick);\n\t  document.removeEventListener('keyup', handleDocumentKeyup);\n\t  document.removeEventListener('mousedown', handleDocumentMousedown);\n\t  document.removeEventListener('mousemove', handleDocumentMousemove);\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t  (0, _utils.enableUserSelect)();\n\t}\n\t\n\t/**\n\t * Delete currently selected annotation\n\t */\n\tfunction deleteAnnotation() {\n\t  if (!overlay) {\n\t    return;\n\t  }\n\t\n\t  var annotationId = overlay.getAttribute('data-target-id');\n\t  var nodes = document.querySelectorAll('[data-pdf-annotate-id=\"' + annotationId + '\"]');\n\t  var svg = overlay.parentNode.querySelector(_config2.default.annotationSvgQuery());\n\t\n\t  var _getMetadata = (0, _utils.getMetadata)(svg);\n\t\n\t  var documentId = _getMetadata.documentId;\n\t\n\t\n\t  [].concat(_toConsumableArray(nodes)).forEach(function (n) {\n\t    n.parentNode.removeChild(n);\n\t  });\n\t\n\t  _PDFJSAnnotate2.default.getStoreAdapter().deleteAnnotation(documentId, annotationId);\n\t\n\t  destroyEditOverlay();\n\t}\n\t\n\t/**\n\t * Handle document.click event\n\t *\n\t * @param {Event} e The DOM event that needs to be handled\n\t */\n\tfunction handleDocumentClick(e) {\n\t  if (!(0, _utils.findSVGAtPoint)(e.clientX, e.clientY)) {\n\t    return;\n\t  }\n\t\n\t  // Remove current overlay\n\t  var overlay = document.getElementById('pdf-annotate-edit-overlay');\n\t  if (overlay) {\n\t    if (isDragging || e.target === overlay) {\n\t      return;\n\t    }\n\t\n\t    destroyEditOverlay();\n\t  }\n\t}\n\t\n\t/**\n\t * Handle document.keyup event\n\t *\n\t * @param {Event} e The DOM event that needs to be handled\n\t */\n\tfunction handleDocumentKeyup(e) {\n\t  if (overlay && e.keyCode === 46 && e.target.nodeName.toLowerCase() !== 'textarea' && e.target.nodeName.toLowerCase() !== 'input') {\n\t    deleteAnnotation();\n\t  }\n\t}\n\t\n\t/**\n\t * Handle document.mousedown event\n\t *\n\t * @param {Event} e The DOM event that needs to be handled\n\t */\n\tfunction handleDocumentMousedown(e) {\n\t  if (e.target !== overlay) {\n\t    return;\n\t  }\n\t\n\t  // Highlight and strikeout annotations are bound to text within the document.\n\t  // It doesn't make sense to allow repositioning these types of annotations.\n\t  var annotationId = overlay.getAttribute('data-target-id');\n\t  var target = document.querySelector('[data-pdf-annotate-id=\"' + annotationId + '\"]');\n\t  var type = target.getAttribute('data-pdf-annotate-type');\n\t\n\t  if (type === 'highlight' || type === 'strikeout') {\n\t    return;\n\t  }\n\t\n\t  isDragging = true;\n\t  dragOffsetX = e.clientX;\n\t  dragOffsetY = e.clientY;\n\t  dragStartX = overlay.offsetLeft;\n\t  dragStartY = overlay.offsetTop;\n\t\n\t  overlay.style.background = 'rgba(255, 255, 255, 0.7)';\n\t  overlay.style.cursor = 'move';\n\t  overlay.querySelector('a').style.display = 'none';\n\t\n\t  document.addEventListener('mousemove', handleDocumentMousemove);\n\t  document.addEventListener('mouseup', handleDocumentMouseup);\n\t  (0, _utils.disableUserSelect)();\n\t}\n\t\n\t/**\n\t * Handle document.mousemove event\n\t *\n\t * @param {Event} e The DOM event that needs to be handled\n\t */\n\tfunction handleDocumentMousemove(e) {\n\t  var annotationId = overlay.getAttribute('data-target-id');\n\t  var parentNode = overlay.parentNode;\n\t  var rect = parentNode.getBoundingClientRect();\n\t  var y = dragStartY + (e.clientY - dragOffsetY);\n\t  var x = dragStartX + (e.clientX - dragOffsetX);\n\t  var minY = 0;\n\t  var maxY = rect.height;\n\t  var minX = 0;\n\t  var maxX = rect.width;\n\t\n\t  if (y > minY && y + overlay.offsetHeight < maxY) {\n\t    overlay.style.top = y + 'px';\n\t  }\n\t\n\t  if (x > minX && x + overlay.offsetWidth < maxX) {\n\t    overlay.style.left = x + 'px';\n\t  }\n\t}\n\t\n\t/**\n\t * Handle document.mouseup event\n\t *\n\t * @param {Event} e The DOM event that needs to be handled\n\t */\n\tfunction handleDocumentMouseup(e) {\n\t  var annotationId = overlay.getAttribute('data-target-id');\n\t  var target = document.querySelectorAll('[data-pdf-annotate-id=\"' + annotationId + '\"]');\n\t  var type = target[0].getAttribute('data-pdf-annotate-type');\n\t  var svg = overlay.parentNode.querySelector(_config2.default.annotationSvgQuery());\n\t\n\t  var _getMetadata2 = (0, _utils.getMetadata)(svg);\n\t\n\t  var documentId = _getMetadata2.documentId;\n\t\n\t\n\t  overlay.querySelector('a').style.display = '';\n\t\n\t  _PDFJSAnnotate2.default.getStoreAdapter().getAnnotation(documentId, annotationId).then(function (annotation) {\n\t    var attribX = 'x';\n\t    var attribY = 'y';\n\t    if (['circle', 'fillcircle', 'emptycircle'].indexOf(type) > -1) {\n\t      attribX = 'cx';\n\t      attribY = 'cy';\n\t    }\n\t    if (['area', 'highlight', 'point', 'textbox', 'circle', 'fillcircle', 'emptycircle'].indexOf(type) > -1) {\n\t      (function () {\n\t        var modelStart = (0, _utils.convertToSvgPoint)([dragStartX, dragStartY], svg);\n\t        var modelEnd = (0, _utils.convertToSvgPoint)([overlay.offsetLeft, overlay.offsetTop], svg);\n\t        var modelDelta = {\n\t          x: modelEnd[0] - modelStart[0],\n\t          y: modelEnd[1] - modelStart[1]\n\t        };\n\t\n\t        [].concat(_toConsumableArray(target)).forEach(function (t, i) {\n\t          var modelX = parseInt(t.getAttribute(attribX), 10);\n\t          var modelY = parseInt(t.getAttribute(attribY), 10);\n\t          if (modelDelta.y !== 0) {\n\t            modelY = modelY + modelDelta.y;\n\t            var viewY = modelY;\n\t\n\t            if (type === 'textbox') {\n\t              viewY += annotation.size;\n\t            }\n\t\n\t            if (type === 'point') {\n\t              viewY = (0, _utils.scaleUp)(svg, { viewY: viewY }).viewY;\n\t            }\n\t\n\t            t.setAttribute(attribY, viewY);\n\t            if (annotation.rectangles && i < annotation.rectangles.length) {\n\t              annotation.rectangles[i].y = modelY;\n\t            } else if (annotation[attribY]) {\n\t              annotation[attribY] = modelY;\n\t            }\n\t          }\n\t          if (modelDelta.x !== 0) {\n\t            modelX = modelX + modelDelta.x;\n\t            var viewX = modelX;\n\t\n\t            if (type === 'point') {\n\t              viewX = (0, _utils.scaleUp)(svg, { viewX: viewX }).viewX;\n\t            }\n\t\n\t            t.setAttribute(attribX, viewX);\n\t            if (annotation.rectangles && i < annotation.rectangles.length) {\n\t              annotation.rectangles[i].x = modelX;\n\t            } else if (annotation[attribX]) {\n\t              annotation[attribX] = modelX;\n\t            }\n\t          }\n\t        });\n\t        // } else if (type === 'strikeout') {\n\t        //   let { deltaX, deltaY } = getDelta('x1', 'y1');\n\t        //   [...target].forEach(target, (t, i) => {\n\t        //     if (deltaY !== 0) {\n\t        //       t.setAttribute('y1', parseInt(t.getAttribute('y1'), 10) + deltaY);\n\t        //       t.setAttribute('y2', parseInt(t.getAttribute('y2'), 10) + deltaY);\n\t        //       annotation.rectangles[i].y = parseInt(t.getAttribute('y1'), 10);\n\t        //     }\n\t        //     if (deltaX !== 0) {\n\t        //       t.setAttribute('x1', parseInt(t.getAttribute('x1'), 10) + deltaX);\n\t        //       t.setAttribute('x2', parseInt(t.getAttribute('x2'), 10) + deltaX);\n\t        //       annotation.rectangles[i].x = parseInt(t.getAttribute('x1'), 10);\n\t        //     }\n\t        //   });\n\t      })();\n\t    } else if (type === 'drawing' || type === 'arrow') {\n\t      (function () {\n\t        var modelStart = (0, _utils.convertToSvgPoint)([dragStartX, dragStartY], svg);\n\t        var modelEnd = (0, _utils.convertToSvgPoint)([overlay.offsetLeft, overlay.offsetTop], svg);\n\t        var modelDelta = {\n\t          x: modelEnd[0] - modelStart[0],\n\t          y: modelEnd[1] - modelStart[1]\n\t        };\n\t\n\t        annotation.lines.forEach(function (line, i) {\n\t          var _annotation$lines$i = _slicedToArray(annotation.lines[i], 2);\n\t\n\t          var x = _annotation$lines$i[0];\n\t          var y = _annotation$lines$i[1];\n\t\n\t          annotation.lines[i][0] = x + modelDelta.x;\n\t          annotation.lines[i][1] = y + modelDelta.y;\n\t        });\n\t\n\t        target[0].parentNode.removeChild(target[0]);\n\t        (0, _appendChild.appendChild)(svg, annotation);\n\t      })();\n\t    }\n\t\n\t    _PDFJSAnnotate2.default.getStoreAdapter().editAnnotation(documentId, annotationId, annotation);\n\t  });\n\t\n\t  setTimeout(function () {\n\t    isDragging = false;\n\t  }, 0);\n\t\n\t  overlay.style.background = '';\n\t  overlay.style.cursor = '';\n\t\n\t  document.removeEventListener('mousemove', handleDocumentMousemove);\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t  (0, _utils.enableUserSelect)();\n\t}\n\t\n\t/**\n\t * Handle annotation.click event\n\t *\n\t * @param {Element} e The annotation element that was clicked\n\t */\n\tfunction handleAnnotationClick(target) {\n\t  createEditOverlay(target);\n\t}\n\t\n\t/**\n\t * Enable edit mode behavior.\n\t */\n\tfunction enableEdit() {\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  (0, _event.addEventListener)('annotation:click', handleAnnotationClick);\n\t};\n\t\n\t/**\n\t * Disable edit mode behavior.\n\t */\n\tfunction disableEdit() {\n\t  destroyEditOverlay();\n\t\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  (0, _event.removeEventListener)('annotation:click', handleAnnotationClick);\n\t};\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.setPen = setPen;\n\texports.enablePen = enablePen;\n\texports.disablePen = disablePen;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _enabled = false;\n\tvar _penSize = void 0;\n\tvar _penColor = void 0;\n\tvar path = void 0;\n\tvar lines = void 0;\n\t\n\t/**\n\t * Handle document.mousedown event\n\t */\n\tfunction handleDocumentMousedown() {\n\t  path = null;\n\t  lines = [];\n\t\n\t  document.addEventListener('mousemove', handleDocumentMousemove);\n\t  document.addEventListener('mouseup', handleDocumentMouseup);\n\t}\n\t\n\t/**\n\t * Handle document.mouseup event\n\t *\n\t * @param {Event} e The DOM event to be handled\n\t */\n\tfunction handleDocumentMouseup(e) {\n\t  var svg = void 0;\n\t  if (lines.length > 1 && (svg = (0, _utils.findSVGAtPoint)(e.clientX, e.clientY))) {\n\t    var _getMetadata = (0, _utils.getMetadata)(svg);\n\t\n\t    var documentId = _getMetadata.documentId;\n\t    var pageNumber = _getMetadata.pageNumber;\n\t\n\t\n\t    _PDFJSAnnotate2.default.getStoreAdapter().addAnnotation(documentId, pageNumber, {\n\t      type: 'drawing',\n\t      width: _penSize,\n\t      color: _penColor,\n\t      lines: lines\n\t    }).then(function (annotation) {\n\t      if (path) {\n\t        svg.removeChild(path);\n\t      }\n\t\n\t      (0, _appendChild.appendChild)(svg, annotation);\n\t    });\n\t  }\n\t\n\t  document.removeEventListener('mousemove', handleDocumentMousemove);\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t}\n\t\n\t/**\n\t * Handle document.mousemove event\n\t *\n\t * @param {Event} e The DOM event to be handled\n\t */\n\tfunction handleDocumentMousemove(e) {\n\t  savePoint(e.clientX, e.clientY);\n\t}\n\t\n\t/**\n\t * Handle document.keyup event\n\t *\n\t * @param {Event} e The DOM event to be handled\n\t */\n\tfunction handleDocumentKeyup(e) {\n\t  // Cancel rect if Esc is pressed\n\t  if (e.keyCode === 27) {\n\t    lines = null;\n\t    path.parentNode.removeChild(path);\n\t    document.removeEventListener('mousemove', handleDocumentMousemove);\n\t    document.removeEventListener('mouseup', handleDocumentMouseup);\n\t  }\n\t}\n\t\n\t/**\n\t * Save a point to the line being drawn.\n\t *\n\t * @param {Number} x The x coordinate of the point\n\t * @param {Number} y The y coordinate of the point\n\t */\n\tfunction savePoint(x, y) {\n\t  var svg = (0, _utils.findSVGAtPoint)(x, y);\n\t  if (!svg) {\n\t    return;\n\t  }\n\t\n\t  var rect = svg.getBoundingClientRect();\n\t  var point = (0, _utils.convertToSvgPoint)([x - rect.left, y - rect.top], svg);\n\t\n\t  lines.push(point);\n\t\n\t  if (lines.length <= 1) {\n\t    return;\n\t  }\n\t\n\t  if (path) {\n\t    svg.removeChild(path);\n\t  }\n\t\n\t  path = (0, _appendChild.appendChild)(svg, {\n\t    type: 'drawing',\n\t    color: _penColor,\n\t    width: _penSize,\n\t    lines: lines\n\t  });\n\t}\n\t\n\t/**\n\t * Set the attributes of the pen.\n\t *\n\t * @param {Number} penSize The size of the lines drawn by the pen\n\t * @param {String} penColor The color of the lines drawn by the pen\n\t */\n\tfunction setPen() {\n\t  var penSize = arguments.length <= 0 || arguments[0] === undefined ? 1 : arguments[0];\n\t  var penColor = arguments.length <= 1 || arguments[1] === undefined ? '000000' : arguments[1];\n\t\n\t  _penSize = parseInt(penSize, 10);\n\t  _penColor = penColor;\n\t}\n\t\n\t/**\n\t * Enable the pen behavior\n\t */\n\tfunction enablePen() {\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  document.addEventListener('mousedown', handleDocumentMousedown);\n\t  document.addEventListener('keyup', handleDocumentKeyup);\n\t  (0, _utils.disableUserSelect)();\n\t}\n\t\n\t/**\n\t * Disable the pen behavior\n\t */\n\tfunction disablePen() {\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  document.removeEventListener('mousedown', handleDocumentMousedown);\n\t  document.removeEventListener('keyup', handleDocumentKeyup);\n\t  (0, _utils.enableUserSelect)();\n\t}\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.setArrow = setArrow;\n\texports.enableArrow = enableArrow;\n\texports.disableArrow = disableArrow;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _enabled = false;\n\tvar _penSize = void 0;\n\tvar _penColor = void 0;\n\tvar path = void 0;\n\tvar lines = void 0;\n\tvar originY = void 0;\n\tvar originX = void 0;\n\t\n\t/**\n\t * Handle document.mousedown event\n\t */\n\tfunction handleDocumentMousedown(e) {\n\t  var target = (0, _utils.findAnnotationAtPoint)(e.clientX, e.clientY);\n\t  if (target === null) return;\n\t\n\t  var type = target.getAttribute('data-pdf-annotate-type');\n\t  if (type !== 'circle' && type !== 'fillcircle' && type !== 'emptycircle') {\n\t    return;\n\t  }\n\t\n\t  var svg = (0, _utils.findSVGContainer)(target);\n\t\n\t  var _getMetadata = (0, _utils.getMetadata)(svg);\n\t\n\t  var documentId = _getMetadata.documentId;\n\t\n\t  var annotationId = target.getAttribute('data-pdf-annotate-id');\n\t\n\t  var event = e;\n\t  _PDFJSAnnotate2.default.getStoreAdapter().getAnnotation(documentId, annotationId).then(function (annotation) {\n\t    if (annotation) {\n\t      path = null;\n\t      lines = [];\n\t\n\t      var point = (0, _utils.convertToScreenPoint)([annotation.cx, annotation.cy], svg);\n\t\n\t      var rect = svg.getBoundingClientRect();\n\t\n\t      originX = point[0] + rect.left;\n\t      originY = point[1] + rect.top;\n\t\n\t      document.addEventListener('mousemove', handleDocumentMousemove);\n\t      document.addEventListener('mouseup', handleDocumentMouseup);\n\t    }\n\t  });\n\t}\n\t\n\t/**\n\t * Handle document.mouseup event\n\t *\n\t * @param {Event} e The DOM event to be handled\n\t */\n\tfunction handleDocumentMouseup(e) {\n\t  var svg = void 0;\n\t  if (lines.length > 1 && (svg = (0, _utils.findSVGAtPoint)(e.clientX, e.clientY))) {\n\t    var _getMetadata2 = (0, _utils.getMetadata)(svg);\n\t\n\t    var documentId = _getMetadata2.documentId;\n\t    var pageNumber = _getMetadata2.pageNumber;\n\t\n\t\n\t    _PDFJSAnnotate2.default.getStoreAdapter().addAnnotation(documentId, pageNumber, {\n\t      type: 'arrow',\n\t      width: _penSize,\n\t      color: _penColor,\n\t      lines: lines\n\t    }).then(function (annotation) {\n\t      if (path) {\n\t        svg.removeChild(path);\n\t      }\n\t\n\t      (0, _appendChild.appendChild)(svg, annotation);\n\t    });\n\t  }\n\t\n\t  document.removeEventListener('mousemove', handleDocumentMousemove);\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t}\n\t\n\t/**\n\t * Handle document.mousemove event\n\t *\n\t * @param {Event} e The DOM event to be handled\n\t */\n\tfunction handleDocumentMousemove(e) {\n\t  var x = lines.length === 0 ? originX : e.clientX;\n\t  var y = lines.length === 0 ? originY : e.clientY;\n\t\n\t  savePoint(x, y);\n\t}\n\t\n\t/**\n\t * Handle document.keyup event\n\t *\n\t * @param {Event} e The DOM event to be handled\n\t */\n\tfunction handleDocumentKeyup(e) {\n\t  // Cancel rect if Esc is pressed\n\t  if (e.keyCode === 27) {\n\t    lines = null;\n\t    path.parentNode.removeChild(path);\n\t    document.removeEventListener('mousemove', handleDocumentMousemove);\n\t    document.removeEventListener('mouseup', handleDocumentMouseup);\n\t  }\n\t}\n\t\n\t/**\n\t * Save a point to the line being drawn.\n\t *\n\t * @param {Number} x The x coordinate of the point\n\t * @param {Number} y The y coordinate of the point\n\t */\n\tfunction savePoint(x, y) {\n\t  var svg = (0, _utils.findSVGAtPoint)(x, y);\n\t  if (!svg) {\n\t    return;\n\t  }\n\t\n\t  var rect = svg.getBoundingClientRect();\n\t  var point = (0, _utils.convertToSvgPoint)([x - rect.left, y - rect.top], svg);\n\t\n\t  lines.push(point);\n\t\n\t  if (lines.length <= 1) {\n\t    return;\n\t  }\n\t\n\t  if (path) {\n\t    svg.removeChild(path);\n\t  }\n\t\n\t  path = (0, _appendChild.appendChild)(svg, {\n\t    type: 'arrow',\n\t    color: _penColor,\n\t    width: _penSize,\n\t    lines: lines\n\t  });\n\t}\n\t\n\t/**\n\t * Set the attributes of the pen.\n\t *\n\t * @param {Number} penSize The size of the lines drawn by the pen\n\t * @param {String} penColor The color of the lines drawn by the pen\n\t */\n\tfunction setArrow() {\n\t  var penSize = arguments.length <= 0 || arguments[0] === undefined ? 1 : arguments[0];\n\t  var penColor = arguments.length <= 1 || arguments[1] === undefined ? '000000' : arguments[1];\n\t\n\t  _penSize = parseInt(penSize, 10);\n\t  _penColor = penColor;\n\t}\n\t\n\t/**\n\t * Enable the pen behavior\n\t */\n\tfunction enableArrow() {\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  document.addEventListener('mousedown', handleDocumentMousedown);\n\t  document.addEventListener('keyup', handleDocumentKeyup);\n\t  (0, _utils.disableUserSelect)();\n\t}\n\t\n\t/**\n\t * Disable the pen behavior\n\t */\n\tfunction disableArrow() {\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  document.removeEventListener('mousedown', handleDocumentMousedown);\n\t  document.removeEventListener('keyup', handleDocumentKeyup);\n\t  (0, _utils.enableUserSelect)();\n\t}\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\texports.enablePoint = enablePoint;\n\texports.disablePoint = disablePoint;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _enabled = false;\n\tvar input = void 0;\n\t\n\t/**\n\t * Handle document.mouseup event\n\t *\n\t * @param {Event} The DOM event to be handled\n\t */\n\tfunction handleDocumentMouseup(e) {\n\t  if (input || !(0, _utils.findSVGAtPoint)(e.clientX, e.clientY)) {\n\t    return;\n\t  }\n\t\n\t  input = document.createElement('input');\n\t  input.setAttribute('id', 'pdf-annotate-point-input');\n\t  input.setAttribute('placeholder', 'Enter comment');\n\t  input.style.border = '3px solid ' + _utils.BORDER_COLOR;\n\t  input.style.borderRadius = '3px';\n\t  input.style.position = 'absolute';\n\t  input.style.top = e.clientY + 'px';\n\t  input.style.left = e.clientX + 'px';\n\t\n\t  input.addEventListener('blur', handleInputBlur);\n\t  input.addEventListener('keyup', handleInputKeyup);\n\t\n\t  document.body.appendChild(input);\n\t  input.focus();\n\t}\n\t\n\t/**\n\t * Handle input.blur event\n\t */\n\tfunction handleInputBlur() {\n\t  savePoint();\n\t}\n\t\n\t/**\n\t * Handle input.keyup event\n\t *\n\t * @param {Event} e The DOM event to handle\n\t */\n\tfunction handleInputKeyup(e) {\n\t  if (e.keyCode === 27) {\n\t    closeInput();\n\t  } else if (e.keyCode === 13) {\n\t    savePoint();\n\t  }\n\t}\n\t\n\t/**\n\t * Save a new point annotation from input\n\t */\n\tfunction savePoint() {\n\t  if (input.value.trim().length > 0) {\n\t    var _ret = function () {\n\t      var clientX = parseInt(input.style.left, 10);\n\t      var clientY = parseInt(input.style.top, 10);\n\t      var content = input.value.trim();\n\t      var svg = (0, _utils.findSVGAtPoint)(clientX, clientY);\n\t      if (!svg) {\n\t        return {\n\t          v: void 0\n\t        };\n\t      }\n\t\n\t      var rect = svg.getBoundingClientRect();\n\t\n\t      var _getMetadata = (0, _utils.getMetadata)(svg);\n\t\n\t      var documentId = _getMetadata.documentId;\n\t      var pageNumber = _getMetadata.pageNumber;\n\t\n\t      var annotation = Object.assign({\n\t        type: 'point'\n\t      }, (0, _utils.scaleDown)(svg, {\n\t        x: clientX - rect.left,\n\t        y: clientY - rect.top\n\t      }));\n\t\n\t      _PDFJSAnnotate2.default.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation).then(function (annotation) {\n\t        _PDFJSAnnotate2.default.getStoreAdapter().addComment(documentId, annotation.uuid, content);\n\t\n\t        (0, _appendChild.appendChild)(svg, annotation);\n\t      });\n\t    }();\n\t\n\t    if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t  }\n\t\n\t  closeInput();\n\t}\n\t\n\t/**\n\t * Close the input element\n\t */\n\tfunction closeInput() {\n\t  input.removeEventListener('blur', handleInputBlur);\n\t  input.removeEventListener('keyup', handleInputKeyup);\n\t  document.body.removeChild(input);\n\t  input = null;\n\t}\n\t\n\t/**\n\t * Enable point annotation behavior\n\t */\n\tfunction enablePoint() {\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  document.addEventListener('mouseup', handleDocumentMouseup);\n\t}\n\t\n\t/**\n\t * Disable point annotation behavior\n\t */\n\tfunction disablePoint() {\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t}\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.enableRect = enableRect;\n\texports.disableRect = disableRect;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tvar _enabled = false;\n\tvar _type = void 0;\n\tvar overlay = void 0;\n\tvar originY = void 0;\n\tvar originX = void 0;\n\t\n\t/**\n\t * Get the current window selection as rects\n\t *\n\t * @return {Array} An Array of rects\n\t */\n\tfunction getSelectionRects() {\n\t  try {\n\t    var selection = window.getSelection();\n\t    var range = selection.getRangeAt(0);\n\t    var rects = range.getClientRects();\n\t\n\t    if (rects.length > 0 && rects[0].width > 0 && rects[0].height > 0) {\n\t      return rects;\n\t    }\n\t  } catch (e) {}\n\t\n\t  return null;\n\t}\n\t\n\t/**\n\t * Handle document.mousedown event\n\t *\n\t * @param {Event} e The DOM event to handle\n\t */\n\tfunction handleDocumentMousedown(e) {\n\t  var svg = void 0;\n\t  if (_type !== 'area' && _type !== 'circle' && _type !== 'fillcircle' && _type !== 'emptycircle' || !(svg = (0, _utils.findSVGAtPoint)(e.clientX, e.clientY))) {\n\t    return;\n\t  }\n\t\n\t  var rect = svg.getBoundingClientRect();\n\t  originY = e.clientY;\n\t  originX = e.clientX;\n\t\n\t  overlay = document.createElement('div');\n\t  overlay.style.position = 'absolute';\n\t  overlay.style.top = originY - rect.top + 'px';\n\t  overlay.style.left = originX - rect.left + 'px';\n\t  overlay.style.border = '3px solid ' + _utils.BORDER_COLOR;\n\t  overlay.style.borderRadius = '3px';\n\t  svg.parentNode.appendChild(overlay);\n\t\n\t  document.addEventListener('mousemove', handleDocumentMousemove);\n\t  (0, _utils.disableUserSelect)();\n\t}\n\t\n\t/**\n\t * Handle document.mousemove event\n\t *\n\t * @param {Event} e The DOM event to handle\n\t */\n\tfunction handleDocumentMousemove(e) {\n\t  var svg = overlay.parentNode.querySelector(_config2.default.annotationSvgQuery());\n\t  var rect = svg.getBoundingClientRect();\n\t\n\t  if (originX + (e.clientX - originX) < rect.right) {\n\t    overlay.style.width = e.clientX - originX + 'px';\n\t  }\n\t\n\t  if (originY + (e.clientY - originY) < rect.bottom) {\n\t    overlay.style.height = e.clientY - originY + 'px';\n\t  }\n\t}\n\t\n\t/**\n\t * Handle document.mouseup event\n\t *\n\t * @param {Event} e The DOM event to handle\n\t */\n\tfunction handleDocumentMouseup(e) {\n\t  var rects = void 0;\n\t  if (_type !== 'area' && _type !== 'circle' && _type !== 'fillcircle' && _type !== 'emptycircle' && (rects = getSelectionRects())) {\n\t    var svg = (0, _utils.findSVGAtPoint)(rects[0].left, rects[0].top);\n\t    saveRect(_type, [].concat(_toConsumableArray(rects)).map(function (r) {\n\t      return {\n\t        top: r.top,\n\t        left: r.left,\n\t        width: r.width,\n\t        height: r.height\n\t      };\n\t    }));\n\t  } else if ((_type === 'area' || _type === 'circle' || _type === 'fillcircle' || _type === 'emptycircle') && overlay) {\n\t    var _svg = overlay.parentNode.querySelector(_config2.default.annotationSvgQuery());\n\t    var rect = _svg.getBoundingClientRect();\n\t    saveRect(_type, [{\n\t      top: parseInt(overlay.style.top, 10) + rect.top,\n\t      left: parseInt(overlay.style.left, 10) + rect.left,\n\t      width: parseInt(overlay.style.width, 10),\n\t      height: parseInt(overlay.style.height, 10)\n\t    }]);\n\t\n\t    overlay.parentNode.removeChild(overlay);\n\t    overlay = null;\n\t\n\t    document.removeEventListener('mousemove', handleDocumentMousemove);\n\t    (0, _utils.enableUserSelect)();\n\t  }\n\t}\n\t\n\t/**\n\t * Handle document.keyup event\n\t *\n\t * @param {Event} e The DOM event to handle\n\t */\n\tfunction handleDocumentKeyup(e) {\n\t  // Cancel rect if Esc is pressed\n\t  if (e.keyCode === 27) {\n\t    var selection = window.getSelection();\n\t    selection.removeAllRanges();\n\t    if (overlay && overlay.parentNode) {\n\t      overlay.parentNode.removeChild(overlay);\n\t      overlay = null;\n\t      document.removeEventListener('mousemove', handleDocumentMousemove);\n\t    }\n\t  }\n\t}\n\t\n\t/**\n\t * Save a rect annotation\n\t *\n\t * @param {String} type The type of rect (area, highlight, strikeout)\n\t * @param {Array} rects The rects to use for annotation\n\t * @param {String} color The color of the rects\n\t */\n\tfunction saveRect(type, rects, color) {\n\t  var svg = (0, _utils.findSVGAtPoint)(rects[0].left, rects[0].top);\n\t  var node = void 0;\n\t  var annotation = void 0;\n\t\n\t  if (!svg) {\n\t    return;\n\t  }\n\t\n\t  var boundingRect = svg.getBoundingClientRect();\n\t\n\t  if (!color) {\n\t    if (type === 'highlight') {\n\t      color = 'FFFF00';\n\t    } else if (type === 'strikeout') {\n\t      color = 'FF0000';\n\t    }\n\t  }\n\t\n\t  // Initialize the annotation\n\t  annotation = {\n\t    type: type,\n\t    color: color,\n\t    rectangles: [].concat(_toConsumableArray(rects)).map(function (r) {\n\t      var offset = 0;\n\t\n\t      if (type === 'strikeout') {\n\t        offset = r.height / 2;\n\t      }\n\t\n\t      return (0, _utils.screenToPdf)(svg, {\n\t        y: r.top + offset - boundingRect.top,\n\t        x: r.left - boundingRect.left,\n\t        width: r.width,\n\t        height: r.height\n\t      });\n\t    }).filter(function (r) {\n\t      return r.width > 0 && r.height > 0 && r.x > -1 && r.y > -1;\n\t    })\n\t  };\n\t\n\t  // Short circuit if no rectangles exist\n\t  if (annotation.rectangles.length === 0) {\n\t    return;\n\t  }\n\t\n\t  // Special treatment for area as it only supports a single rect\n\t  if (type === 'area') {\n\t    var rect = annotation.rectangles[0];\n\t    delete annotation.rectangles;\n\t    annotation.x = rect.x;\n\t    annotation.y = rect.y;\n\t    annotation.width = rect.width;\n\t    annotation.height = rect.height;\n\t  }\n\t\n\t  if (type === 'circle' || type === 'emptycircle' || type === 'fillcircle') {\n\t    var _rect = annotation.rectangles[0];\n\t    delete annotation.rectangles;\n\t    annotation.cx = _rect.x + _rect.width / 2;\n\t    annotation.cy = _rect.y + _rect.height / 2;\n\t    annotation.r = _rect.width; // ignored right now\n\t    annotation.r = _rect.height; // ignored right now\n\t  }\n\t\n\t  var _getMetadata = (0, _utils.getMetadata)(svg);\n\t\n\t  var documentId = _getMetadata.documentId;\n\t  var pageNumber = _getMetadata.pageNumber;\n\t\n\t  // Add the annotation\n\t\n\t  _PDFJSAnnotate2.default.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation).then(function (annotation) {\n\t    (0, _appendChild.appendChild)(svg, annotation);\n\t  });\n\t}\n\t\n\t/**\n\t * Enable rect behavior\n\t */\n\tfunction enableRect(type) {\n\t  _type = type;\n\t\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  document.addEventListener('mouseup', handleDocumentMouseup);\n\t  document.addEventListener('mousedown', handleDocumentMousedown);\n\t  document.addEventListener('keyup', handleDocumentKeyup);\n\t}\n\t\n\t/**\n\t * Disable rect behavior\n\t */\n\tfunction disableRect() {\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t  document.removeEventListener('mousedown', handleDocumentMousedown);\n\t  document.removeEventListener('keyup', handleDocumentKeyup);\n\t}\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\texports.setText = setText;\n\texports.enableText = enableText;\n\texports.disableText = disableText;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _enabled = false;\n\tvar input = void 0;\n\tvar _textSize = void 0;\n\tvar _textColor = void 0;\n\t\n\t/**\n\t * Handle document.mouseup event\n\t *\n\t * @param {Event} e The DOM event to handle\n\t */\n\tfunction handleDocumentMouseup(e) {\n\t  if (input || !(0, _utils.findSVGAtPoint)(e.clientX, e.clientY)) {\n\t    return;\n\t  }\n\t\n\t  input = document.createElement('input');\n\t  input.setAttribute('id', 'pdf-annotate-text-input');\n\t  input.setAttribute('placeholder', 'Enter text');\n\t  input.style.border = '3px solid ' + _utils.BORDER_COLOR;\n\t  input.style.borderRadius = '3px';\n\t  input.style.position = 'absolute';\n\t  input.style.top = e.clientY + 'px';\n\t  input.style.left = e.clientX + 'px';\n\t  input.style.fontSize = _textSize + 'px';\n\t\n\t  input.addEventListener('blur', handleInputBlur);\n\t  input.addEventListener('keyup', handleInputKeyup);\n\t\n\t  document.body.appendChild(input);\n\t  input.focus();\n\t}\n\t\n\t/**\n\t * Handle input.blur event\n\t */\n\tfunction handleInputBlur() {\n\t  saveText();\n\t}\n\t\n\t/**\n\t * Handle input.keyup event\n\t *\n\t * @param {Event} e The DOM event to handle\n\t */\n\tfunction handleInputKeyup(e) {\n\t  if (e.keyCode === 27) {\n\t    closeInput();\n\t  } else if (e.keyCode === 13) {\n\t    saveText();\n\t  }\n\t}\n\t\n\t/**\n\t * Save a text annotation from input\n\t */\n\tfunction saveText() {\n\t  if (input.value.trim().length > 0) {\n\t    var _ret = function () {\n\t      var clientX = parseInt(input.style.left, 10);\n\t      var clientY = parseInt(input.style.top, 10);\n\t      var svg = (0, _utils.findSVGAtPoint)(clientX, clientY);\n\t      if (!svg) {\n\t        return {\n\t          v: void 0\n\t        };\n\t      }\n\t\n\t      var _getMetadata = (0, _utils.getMetadata)(svg);\n\t\n\t      var documentId = _getMetadata.documentId;\n\t      var pageNumber = _getMetadata.pageNumber;\n\t\n\t      var rect = svg.getBoundingClientRect();\n\t      var annotation = Object.assign({\n\t        type: 'textbox',\n\t        size: _textSize,\n\t        color: _textColor,\n\t        content: input.value.trim()\n\t      }, (0, _utils.scaleDown)(svg, {\n\t        x: clientX - rect.left,\n\t        y: clientY - rect.top,\n\t        width: input.offsetWidth,\n\t        height: input.offsetHeight\n\t      }));\n\t\n\t      _PDFJSAnnotate2.default.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation).then(function (annotation) {\n\t        (0, _appendChild.appendChild)(svg, annotation);\n\t      });\n\t    }();\n\t\n\t    if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t  }\n\t\n\t  closeInput();\n\t}\n\t\n\t/**\n\t * Close the input\n\t */\n\tfunction closeInput() {\n\t  if (input) {\n\t    input.removeEventListener('blur', handleInputBlur);\n\t    input.removeEventListener('keyup', handleInputKeyup);\n\t    document.body.removeChild(input);\n\t    input = null;\n\t  }\n\t}\n\t\n\t/**\n\t * Set the text attributes\n\t *\n\t * @param {Number} textSize The size of the text\n\t * @param {String} textColor The color of the text\n\t */\n\tfunction setText() {\n\t  var textSize = arguments.length <= 0 || arguments[0] === undefined ? 12 : arguments[0];\n\t  var textColor = arguments.length <= 1 || arguments[1] === undefined ? '000000' : arguments[1];\n\t\n\t  _textSize = parseInt(textSize, 10);\n\t  _textColor = textColor;\n\t}\n\t\n\t/**\n\t * Enable text behavior\n\t */\n\tfunction enableText() {\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  document.addEventListener('mouseup', handleDocumentMouseup);\n\t}\n\t\n\t/**\n\t * Disable text behavior\n\t */\n\tfunction disableText() {\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t}\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\texports.createPage = createPage;\n\texports.renderPage = renderPage;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _renderScreenReaderHints = __webpack_require__(23);\n\t\n\tvar _renderScreenReaderHints2 = _interopRequireDefault(_renderScreenReaderHints);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// Template for creating a new page\n\tvar PAGE_TEMPLATE = '\\n  <div style=\"visibility: hidden;\" class=\"page\" data-loaded=\"false\">\\n    <div class=\"canvasWrapper\">\\n      <canvas></canvas>\\n    </div>\\n    <svg class=\"' + _config2.default.annotationLayerName + '\"></svg>\\n    <div class=\"' + _config2.default.textLayerName + '\"></div>\\n  </div>\\n';\n\t\n\t/**\n\t * Create a new page to be appended to the DOM.\n\t *\n\t * @param {Number} pageNumber The page number that is being created\n\t * @return {HTMLElement}\n\t */\n\tfunction createPage(pageNumber) {\n\t  var temp = document.createElement('div');\n\t  temp.innerHTML = PAGE_TEMPLATE;\n\t\n\t  var page = temp.children[0];\n\t  var canvas = page.querySelector('canvas');\n\t\n\t  page.setAttribute('id', 'pageContainer' + pageNumber);\n\t  page.setAttribute('data-page-number', pageNumber);\n\t\n\t  canvas.mozOpaque = true;\n\t  canvas.setAttribute('id', 'page' + pageNumber);\n\t\n\t  return page;\n\t}\n\t\n\t/**\n\t * Render a page that has already been created.\n\t *\n\t * @param {Number} pageNumber The page number to be rendered\n\t * @param {Object} renderOptions The options for rendering\n\t * @return {Promise} Settled once rendering has completed\n\t *  A settled Promise will be either:\n\t *    - fulfilled: [pdfPage, annotations]\n\t *    - rejected: Error\n\t */\n\tfunction renderPage(pageNumber, renderOptions) {\n\t  var documentId = renderOptions.documentId;\n\t  var pdfDocument = renderOptions.pdfDocument;\n\t  var scale = renderOptions.scale;\n\t  var rotate = renderOptions.rotate;\n\t\n\t  // Load the page and annotations\n\t\n\t  return Promise.all([pdfDocument.getPage(pageNumber), _PDFJSAnnotate2.default.getAnnotations(documentId, pageNumber)]).then(function (_ref) {\n\t    var _ref2 = _slicedToArray(_ref, 2);\n\t\n\t    var pdfPage = _ref2[0];\n\t    var annotations = _ref2[1];\n\t\n\t    var page = document.getElementById('pageContainer' + pageNumber);\n\t    var svg = page.querySelector(_config2.default.annotationClassQuery());\n\t    var canvas = page.querySelector('.canvasWrapper canvas');\n\t    var canvasContext = canvas.getContext('2d', { alpha: false });\n\t    var totalRotation = (rotate + pdfPage.rotate) % 360;\n\t    var viewport = pdfPage.getViewport(scale, totalRotation);\n\t    var transform = scalePage(pageNumber, viewport, canvasContext);\n\t\n\t    // Render the page\n\t    return Promise.all([pdfPage.render({ canvasContext: canvasContext, viewport: viewport, transform: transform }), _PDFJSAnnotate2.default.render(svg, viewport, annotations)]).then(function () {\n\t      // Text content is needed for a11y, but is also necessary for creating\n\t      // highlight and strikeout annotations which require selecting text.\n\t      return pdfPage.getTextContent({ normalizeWhitespace: true }).then(function (textContent) {\n\t        return new Promise(function (resolve, reject) {\n\t          // Render text layer for a11y of text content\n\t          var textLayer = page.querySelector(_config2.default.textClassQuery());\n\t          var textLayerFactory = new PDFJS.DefaultTextLayerFactory();\n\t          var textLayerBuilder = textLayerFactory.createTextLayerBuilder(textLayer, pageNumber - 1, viewport);\n\t          textLayerBuilder.setTextContent(textContent);\n\t          textLayerBuilder.render();\n\t\n\t          // Enable a11y for annotations\n\t          // Timeout is needed to wait for `textLayerBuilder.render`\n\t          setTimeout(function () {\n\t            try {\n\t              (0, _renderScreenReaderHints2.default)(annotations.annotations);\n\t              resolve();\n\t            } catch (e) {\n\t              reject(e);\n\t            }\n\t          });\n\t        });\n\t      });\n\t    }).then(function () {\n\t      // Indicate that the page was loaded\n\t      page.setAttribute('data-loaded', 'true');\n\t\n\t      return [pdfPage, annotations];\n\t    });\n\t  });\n\t}\n\t\n\t/**\n\t * Scale the elements of a page.\n\t *\n\t * @param {Number} pageNumber The page number to be scaled\n\t * @param {Object} viewport The viewport of the PDF page (see pdfPage.getViewport(scale, rotate))\n\t * @param {Object} context The canvas context that the PDF page is rendered to\n\t * @return {Array} The transform data for rendering the PDF page\n\t */\n\tfunction scalePage(pageNumber, viewport, context) {\n\t  var page = document.getElementById('pageContainer' + pageNumber);\n\t  var canvas = page.querySelector('.canvasWrapper canvas');\n\t  var svg = page.querySelector(_config2.default.annotationClassQuery());\n\t  var wrapper = page.querySelector('.canvasWrapper');\n\t  var textLayer = page.querySelector(_config2.default.textClassQuery());\n\t  var outputScale = getOutputScale(context);\n\t  var transform = !outputScale.scaled ? null : [outputScale.sx, 0, 0, outputScale.sy, 0, 0];\n\t  var sfx = approximateFraction(outputScale.sx);\n\t  var sfy = approximateFraction(outputScale.sy);\n\t\n\t  // Adjust width/height for scale\n\t  page.style.visibility = '';\n\t  canvas.width = roundToDivide(viewport.width * outputScale.sx, sfx[0]);\n\t  canvas.height = roundToDivide(viewport.height * outputScale.sy, sfy[0]);\n\t  canvas.style.width = roundToDivide(viewport.width, sfx[1]) + 'px';\n\t  canvas.style.height = roundToDivide(viewport.height, sfx[1]) + 'px';\n\t  svg.setAttribute('width', viewport.width);\n\t  svg.setAttribute('height', viewport.height);\n\t  svg.style.width = viewport.width + 'px';\n\t  svg.style.height = viewport.height + 'px';\n\t  page.style.width = viewport.width + 'px';\n\t  page.style.height = viewport.height + 'px';\n\t  wrapper.style.width = viewport.width + 'px';\n\t  wrapper.style.height = viewport.height + 'px';\n\t  textLayer.style.width = viewport.width + 'px';\n\t  textLayer.style.height = viewport.height + 'px';\n\t\n\t  return transform;\n\t}\n\t\n\t/**\n\t * Approximates a float number as a fraction using Farey sequence (max order of 8).\n\t *\n\t * @param {Number} x Positive float number\n\t * @return {Array} Estimated fraction: the first array item is a numerator,\n\t *                 the second one is a denominator.\n\t */\n\tfunction approximateFraction(x) {\n\t  // Fast path for int numbers or their inversions.\n\t  if (Math.floor(x) === x) {\n\t    return [x, 1];\n\t  }\n\t\n\t  var xinv = 1 / x;\n\t  var limit = 8;\n\t  if (xinv > limit) {\n\t    return [1, limit];\n\t  } else if (Math.floor(xinv) === xinv) {\n\t    return [1, xinv];\n\t  }\n\t\n\t  var x_ = x > 1 ? xinv : x;\n\t\n\t  // a/b and c/d are neighbours in Farey sequence.\n\t  var a = 0,\n\t      b = 1,\n\t      c = 1,\n\t      d = 1;\n\t\n\t  // Limit search to order 8.\n\t  while (true) {\n\t    // Generating next term in sequence (order of q).\n\t    var p = a + c,\n\t        q = b + d;\n\t    if (q > limit) {\n\t      break;\n\t    }\n\t    if (x_ <= p / q) {\n\t      c = p;d = q;\n\t    } else {\n\t      a = p;b = q;\n\t    }\n\t  }\n\t\n\t  // Select closest of neighbours to x.\n\t  if (x_ - a / b < c / d - x_) {\n\t    return x_ === x ? [a, b] : [b, a];\n\t  } else {\n\t    return x_ === x ? [c, d] : [d, c];\n\t  }\n\t}\n\t\n\tfunction getOutputScale(ctx) {\n\t  var devicePixelRatio = window.devicePixelRatio || 1;\n\t  var backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n\t  var pixelRatio = devicePixelRatio / backingStoreRatio;\n\t  return {\n\t    sx: pixelRatio,\n\t    sy: pixelRatio,\n\t    scaled: pixelRatio !== 1\n\t  };\n\t}\n\t\n\tfunction roundToDivide(x, div) {\n\t  var r = x % div;\n\t  return r === 0 ? x : Math.round(x - r + div);\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** dist/pdf-annotate.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 7befe8d2a1e31d4efe09\n **/","import PDFJSAnnotate from './src/PDFJSAnnotate';\n\nexport default PDFJSAnnotate;\n\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","import StoreAdapter from './adapter/StoreAdapter';\nimport LocalStoreAdapter from './adapter/LocalStoreAdapter';\nimport render from './render';\nimport UI from './UI';\nimport config from './config';\nimport uuid from './utils/uuid';\nimport { findAnnotationAtPoint, findSVGContainer } from './UI/utils';\n\nexport default {\n  findAnnotationAtPoint,\n  findSVGContainer,\n\n  /**\n   * Abstract class that needs to be defined so PDFJSAnnotate\n   * knows how to communicate with your server.\n   */\n  StoreAdapter,\n\n  /**\n   * Implementation of StoreAdapter that stores annotation data to localStorage.\n   */\n  LocalStoreAdapter,\n\n  /**\n   * Abstract instance of StoreAdapter\n   */\n  __storeAdapter: new StoreAdapter(),\n\n  /**\n   * Getter for the underlying StoreAdapter property\n   *\n   * @return {StoreAdapter}\n   */\n  getStoreAdapter() {\n    return this.__storeAdapter;\n  },\n\n  /**\n   * Setter for the underlying StoreAdapter property\n   *\n   * @param {StoreAdapter} adapter The StoreAdapter implementation to be used.\n   */\n  setStoreAdapter(adapter) {\n    // TODO this throws an error when bundled\n    // if (!(adapter instanceof StoreAdapter)) {\n    //   throw new Error('adapter must be an instance of StoreAdapter');\n    // }\n\n    this.__storeAdapter = adapter;\n  },\n\n  /**\n   * UI is a helper for instrumenting UI interactions for creating,\n   * editing, and deleting annotations in the browser.\n   */\n  UI,\n\n  /**\n   * Render the annotations for a page in the PDF Document\n   *\n   * @param {SVGElement} svg The SVG element that annotations should be rendered to\n   * @param {PageViewport} viewport The PDFPage.getViewport data\n   * @param {Object} data The StoreAdapter.getAnnotations data\n   * @return {Promise}\n   */\n  render,\n\n  /**\n   * Convenience method for getting annotation data\n   *\n   * @alias StoreAdapter.getAnnotations\n   * @param {String} documentId The ID of the document\n   * @param {String} pageNumber The page number\n   * @return {Promise}\n   */\n  getAnnotations(documentId, pageNumber) {\n    return this.getStoreAdapter().getAnnotations(...arguments);\n  },\n\n  config,\n\n  uuid\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/PDFJSAnnotate.js\n **/","import abstractFunction from '../utils/abstractFunction';\nimport { fireEvent } from '../UI/event';\n\n// Adapter should never be invoked publicly\nexport default class StoreAdapter {\n  /**\n   * Create a new StoreAdapter instance\n   *\n   * @param {Object} [definition] The definition to use for overriding abstract methods\n   */\n  constructor(definition = {}) {\n    // Copy each function from definition if it is a function we know about\n    Object.keys(definition).forEach((key) => {\n      if (typeof definition[key] === 'function' &&\n          typeof this[key] === 'function') {\n        this[key] = definition[key];\n      }\n    });\n  }\n\n  /**\n   * Get all the annotations for a given document and page number.\n   *\n   * @param {String} documentId The ID for the document the annotations belong to\n   * @param {Number} pageNumber The number of the page the annotations belong to\n   * @return {Promise}\n   */\n  __getAnnotations(documentId, pageNumber) { abstractFunction('getAnnotations'); }\n  get getAnnotations() { return this.__getAnnotations; }\n  set getAnnotations(fn) {\n    this.__getAnnotations = function getAnnotations(documentId, pageNumber) {\n      return fn(...arguments).then((annotations) => {\n        // TODO may be best to have this happen on the server\n        if (annotations.annotations) {\n          annotations.annotations.forEach((a) => {\n            a.documentId = documentId;\n          });\n        }\n        return annotations;\n      });\n    };\n  }\n\n  /**\n   * Get the definition for a specific annotation.\n   *\n   * @param {String} documentId The ID for the document the annotation belongs to\n   * @param {String} annotationId The ID for the annotation\n   * @return {Promise}\n   */\n  getAnnotation(documentId, annotationId) { abstractFunction('getAnnotation'); }\n\n  /**\n   * Add an annotation\n   *\n   * @param {String} documentId The ID for the document to add the annotation to\n   * @param {String} pageNumber The page number to add the annotation to\n   * @param {Object} annotation The definition for the new annotation\n   * @return {Promise}\n   */\n  __addAnnotation(documentId, pageNumber, annotation) { abstractFunction('addAnnotation'); }\n  get addAnnotation() { return this.__addAnnotation; }\n  set addAnnotation(fn) {\n    this.__addAnnotation = function addAnnotation(documentId, pageNumber, annotation) {\n      return fn(...arguments).then((annotation) => {\n        fireEvent('annotation:add', documentId, pageNumber, annotation);\n        return annotation;\n      });\n    };\n  }\n\n  /**\n   * Edit an annotation\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} pageNumber the page number of the annotation\n   * @param {Object} annotation The definition of the modified annotation\n   * @return {Promise}\n   */\n  __editAnnotation(documentId, pageNumber, annotation) { abstractFunction('editAnnotation'); }\n  get editAnnotation() { return this.__editAnnotation; }\n  set editAnnotation(fn) {\n    this.__editAnnotation = function editAnnotation(documentId, annotationId, annotation) {\n      return fn(...arguments).then((annotation) => {\n        fireEvent('annotation:edit', documentId, annotationId, annotation);\n        return annotation;\n      });\n    };\n  }\n\n  /**\n   * Delete an annotation\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} annotationId The ID for the annotation\n   * @return {Promise}\n   */\n  __deleteAnnotation(documentId, annotationId) { abstractFunction('deleteAnnotation'); }\n  get deleteAnnotation() { return this.__deleteAnnotation; }\n  set deleteAnnotation(fn) {\n    this.__deleteAnnotation = function deleteAnnotation(documentId, annotationId) {\n      return fn(...arguments).then((success) => {\n        if (success) {\n          fireEvent('annotation:delete', documentId, annotationId);\n        }\n        return success;\n      });\n    };\n  }\n\n  /**\n   * Get all the comments for an annotation\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} annotationId The ID for the annotation\n   * @return {Promise}\n   */\n  getComments(documentId, annotationId) { abstractFunction('getComments'); }\n\n  /**\n   * Add a new comment\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} annotationId The ID for the annotation\n   * @param {Object} content The definition of the comment\n   * @return {Promise}\n   */\n  __addComment(documentId, annotationId, content) { abstractFunction('addComment'); }\n  get addComment() { return this.__addComment; }\n  set addComment(fn) {\n    this.__addComment = function addComment(documentId, annotationId, content) {\n      return fn(...arguments).then((comment) => {\n        fireEvent('comment:add', documentId, annotationId, comment);\n        return comment;\n      });\n    };\n  }\n\n  /**\n   * Delete a comment\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} commentId The ID for the comment\n   * @return {Promise}\n   */\n  __deleteComment(documentId, commentId) { abstractFunction('deleteComment'); }\n  get deleteComment() { return this.__deleteComment; }\n  set deleteComment(fn) {\n    this.__deleteComment = function deleteComment(documentId, commentId) {\n      return fn(...arguments).then((success) => {\n        if (success) {\n          fireEvent('comment:delete', documentId, commentId);\n        }\n        return success;\n      });\n    };\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/adapter/StoreAdapter.js\n **/","/**\n * Throw an Error for an abstract function that hasn't been implemented.\n *\n * @param {String} name The name of the abstract function\n */\nexport default function abstractFunction(name) {\n  throw new Error(name + ' is not implemented');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/abstractFunction.js\n **/","import EventEmitter from 'events';\nimport {\n  findAnnotationAtPoint,\n  findSVGAtPoint\n} from './utils';\n\nconst emitter = new EventEmitter;\n\nlet clickNode;\n\n/**\n * Handle document.click event\n *\n * @param {Event} e The DOM event to be handled\n */\ndocument.addEventListener('click', function handleDocumentClick(e) {\n  if (!findSVGAtPoint(e.clientX, e.clientY)) { return; }\n\n  let target = findAnnotationAtPoint(e.clientX, e.clientY);\n\n  // Emit annotation:blur if clickNode is no longer clicked\n  if (clickNode && clickNode !== target) {\n    emitter.emit('annotation:blur', clickNode);\n  }\n\n  // Emit annotation:click if target was clicked\n  if (target) {\n    emitter.emit('annotation:click', target);\n  }\n\n  clickNode = target;\n});\n\n// let mouseOverNode;\n// document.addEventListener('mousemove', function handleDocumentMousemove(e) {\n//   let target = findAnnotationAtPoint(e.clientX, e.clientY);\n//\n//   // Emit annotation:mouseout if target was mouseout'd\n//   if (mouseOverNode && !target) {\n//     emitter.emit('annotation:mouseout', mouseOverNode);\n//   }\n//\n//   // Emit annotation:mouseover if target was mouseover'd\n//   if (target && mouseOverNode !== target) {\n//     emitter.emit('annotation:mouseover', target);\n//   }\n//\n//   mouseOverNode = target;\n// });\n\nexport function fireEvent() { emitter.emit(...arguments); };\nexport function addEventListener() { emitter.on(...arguments); };\nexport function removeEventListener() { emitter.removeListener(...arguments); };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/event.js\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/events/events.js\n ** module id = 5\n ** module chunks = 0\n **/","import createStyleSheet from 'create-stylesheet';\nimport { getTranslation } from '../render/appendChild';\nimport { \n  applyTransform, \n  applyInverseTransform, \n  translate,\n  rotate,\n  scale \n} from '../utils/mathUtils';\n\n\nexport const BORDER_COLOR = '#00BFFF';\n\nconst userSelectStyleSheet = createStyleSheet({\n  body: {\n    '-webkit-user-select': 'none',\n       '-moz-user-select': 'none',\n        '-ms-user-select': 'none',\n            'user-select': 'none'\n  }\n});\nuserSelectStyleSheet.setAttribute('data-pdf-annotate-user-select', 'true');\n\n/**\n * Find the SVGElement that contains all the annotations for a page\n *\n * @param {Element} node An annotation within that container\n * @return {SVGElement} The container SVG or null if it can't be found\n */\nexport function findSVGContainer(node) {\n  let parentNode = node;\n\n  while ((parentNode = parentNode.parentNode) &&\n          parentNode !== document) {\n    if (parentNode.nodeName.toUpperCase() === 'SVG' &&\n        parentNode.getAttribute('data-pdf-annotate-container') === 'true') {\n      return parentNode;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Find an SVGElement container at a given point\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @return {SVGElement} The container SVG or null if one can't be found\n */\nexport function findSVGAtPoint(x, y) {\n  let elements = document.querySelectorAll('svg[data-pdf-annotate-container=\"true\"]');\n\n  for (let i=0, l=elements.length; i<l; i++) {\n    let el = elements[i];\n    let rect = el.getBoundingClientRect();\n\n    if (pointIntersectsRect(x, y, rect)) {\n      return el;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Find an Element that represents an annotation at a given point\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @return {Element} The annotation element or null if one can't be found\n */\nexport function findAnnotationAtPoint(x, y) {\n  let svg = findSVGAtPoint(x, y);\n  if (!svg) { return; }\n  let elements = svg.querySelectorAll('[data-pdf-annotate-type]');\n\n  // Find a target element within SVG\n  for (let i=0, l=elements.length; i<l; i++) {\n    let el = elements[i];\n    if (pointIntersectsRect(x, y, el.getBoundingClientRect())) {   \n      return el;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Determine if a point intersects a rect\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @param {Object} rect The points of a rect (likely from getBoundingClientRect)\n * @return {Boolean} True if a collision occurs, otherwise false\n */\nexport function pointIntersectsRect(x, y, rect) {\n  return y >= rect.top && y <= rect.bottom && x >= rect.left && x <= rect.right;\n}\n\n/**\n * Get the rect of an annotation element accounting for offset.\n *\n * @param {Element} el The element to get the rect of\n * @return {Object} The dimensions of the element\n */\nexport function getOffsetAnnotationRect(el) {\n  let rect = el.getBoundingClientRect();\n  let { offsetLeft, offsetTop } = getOffset(el);\n  return {\n    top: rect.top - offsetTop,\n    left: rect.left - offsetLeft,\n    right: rect.right - offsetLeft,\n    bottom: rect.bottom - offsetTop,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\n/**\n * Get the rect of an annotation element.\n *\n * @param {Element} el The element to get the rect of\n * @return {Object} The dimensions of the element\n */\nexport function getAnnotationRect(el) {\n  // findSVGContainer(target)\n  let h = 0, w = 0, x = 0, y = 0;\n  let rect = el.getBoundingClientRect();\n  // TODO this should be calculated somehow\n  const LINE_OFFSET = 16;\n\n  switch (el.nodeName.toLowerCase()) {\n    case 'path':\n    let minX, maxX, minY, maxY;\n\n    el.getAttribute('d').replace(/Z/, '').split('M').splice(1).forEach((p) => {\n      var s = p.split(' ').map(i => parseInt(i, 10));\n\n      if (typeof minX === 'undefined' || s[0] < minX) { minX = s[0]; }\n      if (typeof maxX === 'undefined' || s[2] > maxX) { maxX = s[2]; }\n      if (typeof minY === 'undefined' || s[1] < minY) { minY = s[1]; }\n      if (typeof maxY === 'undefined' || s[3] > maxY) { maxY = s[3]; }\n    });\n\n    h = maxY - minY;\n    w = maxX - minX;\n    x = minX;\n    y = minY;\n    break;\n\n    case 'line':\n    h = parseInt(el.getAttribute('y2'), 10) - parseInt(el.getAttribute('y1'), 10);\n    w = parseInt(el.getAttribute('x2'), 10) - parseInt(el.getAttribute('x1'), 10);\n    x = parseInt(el.getAttribute('x1'), 10);\n    y = parseInt(el.getAttribute('y1'), 10);\n\n    if (h === 0) {\n      h += LINE_OFFSET;\n      y -= (LINE_OFFSET / 2);\n    }\n    break;\n\n    case 'text':\n    h = rect.height;\n    w = rect.width;\n    x = parseInt(el.getAttribute('x'), 10);\n    y = parseInt(el.getAttribute('y'), 10) - h;\n    break;\n\n    case 'g':\n    let { offsetLeft, offsetTop } = getOffset(el);\n    h = rect.height;\n    w = rect.width;\n    x = rect.left - offsetLeft;\n    y = rect.top - offsetTop;\n\n    if (el.getAttribute('data-pdf-annotate-type') === 'strikeout') {\n      h += LINE_OFFSET;\n      y -= (LINE_OFFSET / 2);\n    }\n    break;\n\n    case 'rect':\n    case 'svg':\n    h = parseInt(el.getAttribute('height'), 10);\n    w = parseInt(el.getAttribute('width'), 10);\n    x = parseInt(el.getAttribute('x'), 10);\n    y = parseInt(el.getAttribute('y'), 10);\n    break;\n\n    case 'circle':\n    case 'fillcircle':\n    case 'emptycircle':\n    case 'svg':\n    h = parseInt(el.getAttribute('r'), 10)*2;\n    w = parseInt(el.getAttribute('r'), 10)*2;\n    x = parseInt(el.getAttribute('cx'), 10)-h/2;\n    y = parseInt(el.getAttribute('cy'), 10)-w/2;\n    break;\n\n    case 'arrow':\n    let minX1, maxX1, minY1, maxY1;\n\n    el.getAttribute('d').replace(/Z/, '').split('M').splice(1).forEach((p) => {\n      var s = p.split(' ').map(i => parseInt(i, 10));\n\n      if (typeof minX1 === 'undefined' || s[0] < minX1) { minX1 = s[0]; }\n      if (typeof maxX1 === 'undefined' || s[2] > maxX1) { maxX1 = s[2]; }\n      if (typeof minY1 === 'undefined' || s[1] < minY1) { minY1 = s[1]; }\n      if (typeof maxY1 === 'undefined' || s[3] > maxY1) { maxY1 = s[3]; }\n    });\n\n    h = maxY1 - minY1;\n    w = maxX1 - minX1;\n    x = minX1;\n    y = minY1;\n    break;\n  }\n\n  // Result provides same properties as getBoundingClientRect\n  let result = {\n    top: y,\n    left: x,\n    width: w,\n    height: h,\n    right: x + w,\n    bottom: y + h\n  };\n\n  // For the case of nested SVG (point annotations) and grouped\n  // lines or rects no adjustment needs to be made for scale.\n  // I assume that the scale is already being handled\n  // natively by virtue of the `transform` attribute.\n  if (!['svg', 'g'].includes(el.nodeName.toLowerCase())) {\n    result = scaleUp(findSVGAtPoint(rect.left, rect.top), result);\n  }\n\n  return result;\n}\n\n/**\n * Adjust scale from normalized scale (100%) to rendered scale.\n *\n * @param {SVGElement} svg The SVG to gather metadata from\n * @param {Object} rect A map of numeric values to scale\n * @return {Object} A copy of `rect` with values scaled up\n */\nexport function scaleUp(svg, rect) {\n  let result = {};\n  let { viewport } = getMetadata(svg);\n\n  Object.keys(rect).forEach((key) => {\n    result[key] = rect[key] * viewport.scale;\n  });\n\n  return result;\n}\n\nexport function screenToPdf(svg, rect) {\n  let result = {};\n  let { viewport } = getMetadata(svg);\n\n  let xform = [ 1, 0, 0, 1, 0, 0 ];\n  let trans = getTranslation(viewport);\n  xform = scale(xform, viewport.scale, viewport.scale);\n  xform = rotate(xform, viewport.rotation);\n  xform = translate(xform, trans.x, trans.y);\n\n\t  var pt1 = [rect.x, rect.y];\n\t  var pt2 = [rect.x + rect.width, rect.y + rect.height];\n\n\t  pt1 = applyInverseTransform(pt1, xform);\n\t  pt2 = applyInverseTransform(pt2, xform);\n\n\n  var width = Math.abs(pt2[0] - pt1[0]);\n  var height = Math.abs(pt2[1] - pt1[1]);\n\n  //result.x = pt1[0];\n  //result.y = pt1[1];\n\n  switch (viewport.rotation % 360) {\n    case 0:\n      result.x = pt1[0];\n      result.y = pt1[1];\n      break;\n    case 90:\n      result.x = pt1[0];\n      result.y = pt1[1] - height;\n      break;\n    case 180:\n      result.x = pt1[0] - width;\n      result.y = pt1[1] - height;\n      break;\n    case 270:\n      result.x = pt1[0] - width;\n      result.y = pt1[1];\n      break;\n  }\n  \n  result.width = width;\n  result.height = height;\n\n  return result;\n}\n\nexport function convertToSvgPoint(pt, svg) {\n  let result = {};\n  let { viewport } = getMetadata(svg);\n\n  let xform = [ 1, 0, 0, 1, 0, 0 ];\n  xform = scale(xform, viewport.scale, viewport.scale);\n  xform = rotate(xform, viewport.rotation);\n\n  let offset = getTranslation(viewport);\n  xform = translate(xform, offset.x, offset.y);\n\n  return applyInverseTransform(pt, xform);\n}\n\nexport function convertToScreenPoint(pt, svg) {\n  let result = {};\n  let { viewport } = getMetadata(svg);\n\n  let xform = [ 1, 0, 0, 1, 0, 0 ];\n  xform = scale(xform, viewport.scale, viewport.scale);\n  xform = rotate(xform, viewport.rotation);\n\n  let offset = getTranslation(viewport);\n  xform = translate(xform, offset.x, offset.y);\n\n  return applyTransform(pt, xform);\n}\n\n/**\n * Adjust scale from rendered scale to a normalized scale (100%).\n *\n * @param {SVGElement} svg The SVG to gather metadata from\n * @param {Object} rect A map of numeric values to scale\n * @return {Object} A copy of `rect` with values scaled down\n */\nexport function scaleDown(svg, rect) {\n  let result = {};\n  let { viewport } = getMetadata(svg);\n\n  Object.keys(rect).forEach((key) => {\n    result[key] = rect[key] / viewport.scale;\n  });\n\n  return result;\n}\n\n/**\n * Get the scroll position of an element, accounting for parent elements\n *\n * @param {Element} el The element to get the scroll position for\n * @return {Object} The scrollTop and scrollLeft position\n */\nexport function getScroll(el) {\n  let scrollTop = 0;\n  let scrollLeft = 0;\n  let parentNode = el;\n\n  while ((parentNode = parentNode.parentNode) &&\n          parentNode !== document) {\n    scrollTop += parentNode.scrollTop;\n    scrollLeft += parentNode.scrollLeft;\n  }\n\n  return { scrollTop, scrollLeft };\n}\n\n/**\n * Get the offset position of an element, accounting for parent elements\n *\n * @param {Element} el The element to get the offset position for\n * @return {Object} The offsetTop and offsetLeft position\n */\nexport function getOffset(el) {\n  let parentNode = el;\n\n  while ((parentNode = parentNode.parentNode) &&\n          parentNode !== document) {\n    if (parentNode.nodeName.toUpperCase() === 'SVG') {\n      break;\n    }\n  }\n\n  let rect = parentNode.getBoundingClientRect();\n\n  return { offsetLeft: rect.left, offsetTop: rect.top };\n}\n\n/**\n * Disable user ability to select text on page\n */\nexport function disableUserSelect() {\n  if (!userSelectStyleSheet.parentNode) {\n    document.head.appendChild(userSelectStyleSheet);\n  }\n}\n\n\n/**\n * Enable user ability to select text on page\n */\nexport function enableUserSelect() {\n  if (userSelectStyleSheet.parentNode) {\n    userSelectStyleSheet.parentNode.removeChild(userSelectStyleSheet);\n  }\n}\n\n/**\n * Get the metadata for a SVG container\n *\n * @param {SVGElement} svg The SVG container to get metadata for\n */\nexport function getMetadata(svg) {\n  return {\n    documentId: svg.getAttribute('data-pdf-annotate-document'),\n    pageNumber: parseInt(svg.getAttribute('data-pdf-annotate-page'), 10),\n    viewport: JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'))\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/utils.js\n **/","module.exports = function createStyleSheet(blocks) {\n  var style = document.createElement('style');\n  var text = Object.keys(blocks).map(function (selector) {\n    return processRuleSet(selector, blocks[selector]);\n  }).join('\\n');\n  \n  style.setAttribute('type', 'text/css');\n  style.appendChild(document.createTextNode(text));\n\n  return style;\n}\n\nfunction processRuleSet(selector, block) {\n  return selector + ' {\\n' + processDeclarationBlock(block) + '\\n}';\n}\n\nfunction processDeclarationBlock(block) {\n  return Object.keys(block).map(function (prop) {\n    return processDeclaration(prop, block[prop]);\n  }).join('\\n');\n}\n\nfunction processDeclaration(prop, value) {\n  if (!isNaN(value) && value != 0) {\n    value = value + 'px';\n  }\n\n  return hyphenate(prop) + ': ' + value + ';';\n}\n\nfunction hyphenate(prop) {\n  return prop.replace(/[A-Z]/g, function (match) {\n    return '-' + match.toLowerCase();\n  });\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/create-stylesheet/index.js\n ** module id = 7\n ** module chunks = 0\n **/","import objectAssign from 'object-assign';\nimport renderLine from './renderLine';\nimport renderPath from './renderPath';\nimport renderPoint from './renderPoint';\nimport renderRect from './renderRect';\nimport renderText from './renderText';\nimport renderCircle from './renderCircle';\nimport renderArrow from './renderArrow';\n\nconst isFirefox = /firefox/i.test(navigator.userAgent);\n\n/**\n * Get the x/y translation to be used for transforming the annotations\n * based on the rotation of the viewport.\n *\n * @param {Object} viewport The viewport data from the page\n * @return {Object}\n */\nexport function getTranslation(viewport) {\n  let x;\n  let y;\n\n  // Modulus 360 on the rotation so that we only\n  // have to worry about four possible values.\n  switch(viewport.rotation % 360) {\n    case 0:\n      x = y = 0;\n      break;\n    case 90:\n      x = 0;\n      y = (viewport.width / viewport.scale) * -1;\n      break;\n    case 180:\n      x = (viewport.width / viewport.scale) * -1;\n      y = (viewport.height / viewport.scale) * -1;\n      break;\n    case 270:\n      x = (viewport.height / viewport.scale) * -1;\n      y = 0;\n      break;\n  }\n\n  return { x, y };\n}\n\n/**\n * Transform the rotation and scale of a node using SVG's native transform attribute.\n *\n * @param {Node} node The node to be transformed\n * @param {Object} viewport The page's viewport data\n * @return {Node}\n */\nfunction transform(node, viewport) {\n  let trans = getTranslation(viewport);\n\n  // Let SVG natively transform the element\n  node.setAttribute('transform', `scale(${viewport.scale}) rotate(${viewport.rotation}) translate(${trans.x}, ${trans.y})`);\n  \n  // Manually adjust x/y for nested SVG nodes\n  if (!isFirefox && node.nodeName.toLowerCase() === 'svg') {\n    node.setAttribute('x', parseInt(node.getAttribute('x'), 10) * viewport.scale);\n    node.setAttribute('y', parseInt(node.getAttribute('y'), 10) * viewport.scale);\n\n    let x = parseInt(node.getAttribute('x', 10));\n    let y = parseInt(node.getAttribute('y', 10));\n    let width = parseInt(node.getAttribute('width'), 10);\n    let height = parseInt(node.getAttribute('height'), 10);\n    let path = node.querySelector('path');\n    let svg = path.parentNode;\n   \n    // Scale width/height\n    [node, svg, path, node.querySelector('rect')].forEach((n) => {\n      n.setAttribute('width', parseInt(n.getAttribute('width'), 10) * viewport.scale);\n      n.setAttribute('height', parseInt(n.getAttribute('height'), 10) * viewport.scale);\n    });\n\n    // Transform path but keep scale at 100% since it will be handled natively\n    transform(path, objectAssign({}, viewport, { scale: 1 }));\n    \n    switch(viewport.rotation % 360) {\n      case 90:\n        node.setAttribute('x', viewport.width - y - width);\n        node.setAttribute('y', x);\n        svg.setAttribute('x', 1);\n        svg.setAttribute('y', 0);\n        break;\n      case 180:\n        node.setAttribute('x', viewport.width - x - width);\n        node.setAttribute('y', viewport.height - y - height);\n        svg.setAttribute('y', 2);\n        break;\n      case 270:\n        node.setAttribute('x', y);\n        node.setAttribute('y', viewport.height - x - height);\n        svg.setAttribute('x', -1);\n        svg.setAttribute('y', 0);\n        break;\n    }\n  }\n\n  return node;\n}\n\n/**\n * Append an annotation as a child of an SVG.\n *\n * @param {SVGElement} svg The SVG element to append the annotation to\n * @param {Object} annotation The annotation definition to render and append\n * @param {Object} viewport The page's viewport data\n * @return {SVGElement} A node that was created and appended by this function\n */\nexport function appendChild(svg, annotation, viewport) {\n  if (!viewport) {\n    viewport = JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'));\n  }\n  \n  let child;\n  switch (annotation.type) {\n    case 'area':\n    case 'highlight':\n      child = renderRect(annotation);\n      break;\n    case 'circle':\n    case 'fillcircle':\n    case 'emptycircle':\n      child = renderCircle(annotation);\n      break;\n    case 'strikeout':\n      child = renderLine(annotation);\n      break;\n    case 'point':\n      child = renderPoint(annotation);\n      break;\n    case 'textbox':\n      child = renderText(annotation);\n      break;\n    case 'drawing':\n      child = renderPath(annotation);\n      break;\n    case 'arrow':\n      child = renderArrow(annotation);\n      break;\n  }\n\n  // If no type was provided for an annotation it will result in node being null.\n  // Skip appending/transforming if node doesn't exist.\n  if (child) {\n    // Set attributes\n    child.setAttribute('data-pdf-annotate-id', annotation.uuid);\n    child.setAttribute('data-pdf-annotate-type', annotation.type);\n    child.setAttribute('aria-hidden', true);\n\n    svg.appendChild(transform(child, viewport));\n  }\n\n  return child;\n}\n\n/**\n * Transform a child annotation of an SVG.\n *\n * @param {SVGElement} svg The SVG element with the child annotation\n * @param {Object} child The SVG child to transform\n * @param {Object} viewport The page's viewport data\n * @return {SVGElement} A node that was transformed by this function\n */\nexport function transformChild(svg, child, viewport) {\n  if (!viewport) {\n    viewport = JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'));\n  }\n\n  // If no type was provided for an annotation it will result in node being null.\n  // Skip transforming if node doesn't exist.\n  if (child) {\n    child = transform(child, viewport);\n  }\n\n  return child;\n}\n\nexport default {\n  /**\n   * Get the x/y translation to be used for transforming the annotations\n   * based on the rotation of the viewport.\n   */\n  getTranslation,\n  \n  /**\n   * Append an SVG child for an annotation\n   */\n  appendChild,\n\n  /**\n   * Transform an existing SVG child\n   */  \n  transformChild\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/appendChild.js\n **/","'use strict';\n/* eslint-disable no-unused-vars */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (e) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/object-assign/index.js\n ** module id = 9\n ** module chunks = 0\n **/","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGLineElements from an annotation definition.\n * This is used for anntations of type `strikeout`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGGElement} A group of all lines to be rendered\n */\nexport default function renderLine(a) {\n  let group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n  setAttributes(group, {\n    stroke: normalizeColor(a.color || '#f00'),\n    strokeWidth: 1\n  });\n\n  a.rectangles.forEach((r) => {\n    let line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n\n    setAttributes(line, {\n      x1: r.x,\n      y1: r.y,\n      x2: r.x + r.width,\n      y2: r.y,\n    });\n\n    group.appendChild(line);\n  });\n\n  return group;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderLine.js\n **/","const UPPER_REGEX = /[A-Z]/g;\n\n// Don't convert these attributes from camelCase to hyphenated-attributes\nconst BLACKLIST = [\n  'viewBox'\n];\n\nlet keyCase = (key) => {\n  if (BLACKLIST.indexOf(key) === -1) {\n    key = key.replace(UPPER_REGEX, match => '-' + match.toLowerCase());\n  }\n  return key;\n}\n\n/**\n * Set attributes for a node from a map\n *\n * @param {Node} node The node to set attributes on\n * @param {Object} attributes The map of key/value pairs to use for attributes\n */\nexport default function setAttributes(node, attributes) {\n  Object.keys(attributes).forEach((key) => {\n    node.setAttribute(keyCase(key), attributes[key]);\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/setAttributes.js\n **/","const REGEX_HASHLESS_HEX = /^([a-f0-9]{6}|[a-f0-9]{3})$/i;\n\n/**\n * Normalize a color value\n *\n * @param {String} color The color to normalize\n * @return {String}\n */\nexport default function normalizeColor(color) {\n  if (REGEX_HASHLESS_HEX.test(color)) {\n    color = `#${color}`;\n  }\n  return color;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/normalizeColor.js\n **/","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGPathElement from an annotation definition.\n * This is used for anntations of type `drawing`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGPathElement} The path to be rendered\n */\nexport default function renderPath(a) {\n  let d = [];\n  let path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n  \n  \n  for (let i=0, l=a.lines.length; i<l; i++) {\n    var p1 = a.lines[i];\n    var p2 = a.lines[i+1];\n    if (p2) {\n      d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n    }\n  }\n\n/*\n  \n   if(a.lines.length>2) {\n    var p1 = a.lines[0];\n    var p2 = a.lines[a.lines.length-1];\n\n    var p3 = []; //arrow \n    var p4 = [];\n    var p0 = []; //arrow intersection\n\n\n \n    if (p2) {\n      var k = -(p2[0]-p1[0])/(p2[1]-p1[1]);\n\n      var deltaX = 3;\n      p0[0] = p1[0]+0.8*(p2[0]-p1[0]);\n      p0[1] = p1[1]+0.8*(p2[1]-p1[1]);\n\n      p3[0] = p0[0] + deltaX;\n      p3[1] = p0[1] + k*deltaX;\n\n      p4[0] = p0[0] - deltaX;\n      p4[1] = p0[1] - k*deltaX;\n\n      if(Math.abs(p2[1]-p1[1]) < 20) {\n\n        p3[0] = p0[0] ;\n        p3[1] = p0[1] + deltaX*1;\n\n        p4[0] = p0[0] ;\n        p4[1] = p0[1] - deltaX*1;\n\n      }\n\n      d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n       //d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n      d.push(`M${p2[0]} ${p2[1]} ${p3[0]} ${p3[1]}`);\n      d.push(`M${p3[0]} ${p3[1]} ${p4[0]} ${p4[1]}`);\n      d.push(`M${p4[0]} ${p4[1]} ${p2[0]} ${p2[1]}`);\n     }\n    }*/\n  \n  setAttributes(path, {\n    d: `${d.join(' ')}Z`,\n    stroke: normalizeColor(a.color || '#000'),\n    strokeWidth: a.width || 1,\n    fill: 'none'\n  });\n\n  return path;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderPath.js\n **/","import setAttributes from '../utils/setAttributes';\n\nconst SIZE = 25;\nconst D = 'M499.968 214.336q-113.832 0 -212.877 38.781t-157.356 104.625 -58.311 142.29q0 62.496 39.897 119.133t112.437 97.929l48.546 27.9 -15.066 53.568q-13.392 50.778 -39.06 95.976 84.816 -35.154 153.45 -95.418l23.994 -21.204 31.806 3.348q38.502 4.464 72.54 4.464 113.832 0 212.877 -38.781t157.356 -104.625 58.311 -142.29 -58.311 -142.29 -157.356 -104.625 -212.877 -38.781z';\n\n/**\n * Create SVGElement from an annotation definition.\n * This is used for anntations of type `comment`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGElement} A svg to be rendered\n */\nexport default function renderPoint(a) {\n  let outerSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  let innerSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  let rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n  let path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\n  setAttributes(outerSVG,  {\n    width: SIZE,\n    height: SIZE,\n    x: a.x,\n    y: a.y\n  });\n\n  setAttributes(innerSVG, {\n    width: SIZE,\n    height: SIZE,\n    x: 0,\n    y: (SIZE * 0.05) * -1,\n    viewBox: '0 0 1000 1000'\n  });\n\n  setAttributes(rect, {\n    width: SIZE,\n    height: SIZE,\n    stroke: '#000',\n    fill: '#ff0'\n  });\n\n  setAttributes(path, {\n    d: D,\n    strokeWidth: 50,\n    stroke: '#000',\n    fill: '#fff'\n  });\n\n  innerSVG.appendChild(path);\n  outerSVG.appendChild(rect);\n  outerSVG.appendChild(innerSVG);\n\n  return outerSVG;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderPoint.js\n **/","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGRectElements from an annotation definition.\n * This is used for anntations of type `area` and `highlight`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGGElement|SVGRectElement} A group of all rects to be rendered\n */\nexport default function renderRect(a) {\n  if (a.type === 'highlight') {\n    let group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n    setAttributes(group, {\n      fill: normalizeColor(a.color || '#ff0'),\n      fillOpacity: 0.2\n    });\n    \n    a.rectangles.forEach((r) => {\n      group.appendChild(createRect(r));\n    });\n\n    return group;\n  } else {\n    let rect = createRect(a);\n    setAttributes(rect, {\n      stroke: normalizeColor(a.color || '#f00'),\n      fill: 'none'\n    });\n\n    return rect;\n  }\n}\n\nfunction createRect(r) {\n  let rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n\n  setAttributes(rect, {\n    x: r.x,\n    y: r.y,\n    width: r.width,\n    height: r.height\n  });\n\n  return rect;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderRect.js\n **/","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGTextElement from an annotation definition.\n * This is used for anntations of type `textbox`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGTextElement} A text to be rendered\n */\nexport default function renderText(a) {\n  var text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n\n  setAttributes(text, {\n    x: a.x,\n    y: a.y + parseInt(a.size, 10),\n    fill: normalizeColor(a.color || '#000'),\n    fontSize: a.size\n  });\n  text.innerHTML = a.content;\n\n  return text;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderText.js\n **/","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGRectElements from an annotation definition.\n * This is used for annotations of type `circle`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGGElement|SVGCircleElement} A circle to be rendered\n */\nexport default function renderCircle(a) {\n  let circle = createCircle(a);\n\n  if (a.type === 'circle')\n    setAttributes(circle, {\n      stroke: normalizeColor(a.color || '#f00'),\n      fill: 'none',\n      'stroke-width': 5\n    });\n  if (a.type === 'emptycircle')\n    setAttributes(circle, {\n      stroke: normalizeColor(a.color || '#f00'),\n      fill: 'none',\n      'stroke-width': 2\n    });\n\n  if (a.type === 'fillcircle')\n    setAttributes(circle, {\n      stroke: normalizeColor(a.color || '#f00'),\n      fill: '#f00',\n      'stroke-width': 5\n    });\n\n  return circle;\n}\n\nfunction createCircle(r) {\n  let circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n  setAttributes(circle, {\n    cx: r.cx,\n    cy: r.cy,\n    r:30\n  });\n\n  return circle;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderCircle.js\n **/","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGPathElement from an annotation definition.\n * This is used for anntations of type `drawing`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGPathElement} The path to be rendered\n */\nexport default function renderArrow(a) {\n  let d = [];\n  let arrow = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n  \n  /*\n  for (let i=0, l=a.lines.length; i<l; i++) {\n    var p1 = a.lines[i];\n    var p2 = a.lines[i+1];\n    if (p2) {\n      d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n    }\n  }*/\n\n  \n   if(a.lines.length>2) {\n    var p1 = a.lines[0];\n    var p2 = a.lines[a.lines.length-1];\n\n    var p3 = []; //arrow \n    var p4 = [];\n    var p0 = []; //arrow intersection\n\n\n \n    if (p2) {\n      var k = -(p2[0]-p1[0])/(p2[1]-p1[1]);\n\n      var deltaX = 3;\n      p0[0] = p1[0]+0.8*(p2[0]-p1[0]);\n      p0[1] = p1[1]+0.8*(p2[1]-p1[1]);\n\n      p3[0] = p0[0] + deltaX;\n      p3[1] = p0[1] + k*deltaX;\n\n      p4[0] = p0[0] - deltaX;\n      p4[1] = p0[1] - k*deltaX;\n\n\n      //avoid the fat arrow\n      var dist = Math.sqrt((p4[0]-p3[0])*(p4[0]-p3[0])+(p4[1]-p3[1])*(p4[1]-p3[1]))\n\n      if(Math.abs(p2[1]-p1[1]) < 20 || dist>8 ) {\n\n        p3[0] = p0[0] ;\n        p3[1] = p0[1] + deltaX*1;\n\n        p4[0] = p0[0] ;\n        p4[1] = p0[1] - deltaX*1;\n\n      }\n      d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n       //d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n      d.push(`M${p2[0]} ${p2[1]} ${p3[0]} ${p3[1]}`);\n      d.push(`M${p3[0]} ${p3[1]} ${p4[0]} ${p4[1]}`);\n      d.push(`M${p4[0]} ${p4[1]} ${p2[0]} ${p2[1]}`);\n     }\n    }\n  \n  setAttributes(arrow, {\n    d: `${d.join(' ')}Z`,\n    stroke: normalizeColor(a.color || '#000'),\n    strokeWidth: a.width || 1,\n    fill: '#000'\n  });\n\n  return arrow;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderArrow.js\n **/","// Transform point by matrix\n//\nexport function applyTransform(p, m) {\n  var xt = p[0] * m[0] + p[1] * m[2] + m[4];\n  var yt = p[0] * m[1] + p[1] * m[3] + m[5];\n  return [xt, yt];\n};\n\n// Transform point by matrix inverse\n//\nexport function applyInverseTransform(p, m) {\n  var d = m[0] * m[3] - m[1] * m[2];\n  var xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n  var yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n  return [xt, yt];\n};\n\n\n// Concatenates two transformation matrices together and returns the result.\nexport function transform(m1, m2) {\n  return [\n    m1[0] * m2[0] + m1[2] * m2[1],\n    m1[1] * m2[0] + m1[3] * m2[1],\n    m1[0] * m2[2] + m1[2] * m2[3],\n    m1[1] * m2[2] + m1[3] * m2[3],\n    m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n    m1[1] * m2[4] + m1[3] * m2[5] + m1[5]\n  ];\n};\n\nexport function translate(m, x, y) {\n  return [\n    m[0],\n    m[1],\n    m[2],\n    m[3],\n    m[0] * x + m[2] * y + m[4],\n    m[1] * x + m[3] * y + m[5]\n  ];\n};\n\n\nexport function rotate(m, angle) {\n  angle = angle * Math.PI / 180;\n\n  var cosValue = Math.cos(angle);\n  var sinValue = Math.sin(angle);\n\n  return [\n    m[0] * cosValue + m[2] * sinValue,\n    m[1] * cosValue + m[3] * sinValue,\n    m[0] * (-sinValue) + m[2] * cosValue,\n    m[1] * (-sinValue) + m[3] * cosValue,\n    m[4],\n    m[5]\n  ];\n};\n\nexport function scale(m, x, y) {\n  return [\n    m[0] * x,\n    m[1] * x,\n    m[2] * y,\n    m[3] * y,\n    m[4],\n    m[5]\n  ];\n};\n  \nfunction getInverseTransform(m) {\n  var d = m[0] * m[3] - m[1] * m[2];\n  return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d,\n    (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/mathUtils.js\n **/","import uuid from '../utils/uuid';\nimport StoreAdapter from './StoreAdapter';\n\n// StoreAdapter for working with localStorage\n// This is ideal for testing, examples, and prototyping\nexport default class LocalStoreAdapter extends StoreAdapter {\n  constructor() {\n    super({\n      getAnnotations(documentId, pageNumber) {\n        return new Promise((resolve, reject) => {\n          let annotations = getAnnotations(documentId).filter((i) => {\n            return i.page === pageNumber && i.class === 'Annotation';\n          });\n\n          resolve({\n            documentId,\n            pageNumber,\n            annotations\n          });\n        });\n      },\n\n      getAnnotation(documentId, annotationId) {\n        return Promise.resolve(getAnnotations(documentId)[findAnnotation(documentId, annotationId)]);\n      },\n\n      addAnnotation(documentId, pageNumber, annotation) {\n        return new Promise((resolve, reject) => {\n          annotation.class = 'Annotation';\n          annotation.uuid = uuid();\n          annotation.page = pageNumber;\n\n          let annotations = getAnnotations(documentId);\n          annotations.push(annotation);\n          updateAnnotations(documentId, annotations);\n\n          resolve(annotation);\n        });\n      },\n\n      editAnnotation(documentId, annotationId, annotation) {\n        return new Promise((resolve, reject) => {\n          let annotations = getAnnotations(documentId);\n          annotations[findAnnotation(documentId, annotationId)] = annotation;\n          updateAnnotations(documentId, annotations);\n\n          resolve(annotation);\n        });\n      },\n\n      deleteAnnotation(documentId, annotationId) {\n        return new Promise((resolve, reject) => {\n          let index = findAnnotation(documentId, annotationId);\n          if (index > -1) {\n            let annotations = getAnnotations(documentId);\n            annotations.splice(index, 1);\n            updateAnnotations(documentId, annotations);\n          }\n\n          resolve(true);\n        });\n      },\n\n      getComments(documentId, annotationId) {\n        return new Promise((resolve, reject) => {\n          resolve(getAnnotations(documentId).filter((i) => {\n            return i.class === 'Comment' && i.annotation === annotationId;\n          }));\n        });\n      },\n\n      addComment(documentId, annotationId, content) {\n        return new Promise((resolve, reject) => {\n          let comment = {\n            class: 'Comment',\n            uuid: uuid(),\n            annotation: annotationId,\n            content: content\n          };\n\n          let annotations = getAnnotations(documentId);\n          annotations.push(comment);\n          updateAnnotations(documentId, annotations);\n\n          resolve(comment);\n        });\n      },\n\n      deleteComment(documentId, commentId) {\n        return new Promise((resolve, reject) => {\n          getAnnotations(documentId);\n          let index = -1;\n          let annotations = getAnnotations(documentId);\n          for (let i=0, l=annotations.length; i<l; i++) {\n            if (annotations[i].uuid === commentId) {\n              index = i;\n              break;\n            }\n          }\n\n          if (index > -1) {\n            annotations.splice(index, 1);\n            updateAnnotations(documentId, annotations);\n          }\n\n          resolve(true);\n        });\n      }\n    });\n  }\n}\n\nfunction getAnnotations(documentId) {\n  return JSON.parse(localStorage.getItem(`${documentId}/annotations`)) || [];\n}\n\nfunction updateAnnotations(documentId, annotations) {\n  localStorage.setItem(`${documentId}/annotations`, JSON.stringify(annotations));\n}\n\nfunction findAnnotation(documentId, annotationId) {\n  let index = -1;\n  let annotations = getAnnotations(documentId);\n  for (let i=0, l=annotations.length; i<l; i++) {\n    if (annotations[i].uuid === annotationId) {\n      index = i;\n      break;\n    }\n  }\n  return index;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/adapter/LocalStoreAdapter.js\n **/","const REGEXP = /[xy]/g\nconst PATTERN = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n\nfunction replacement(c) {\n  let r = Math.random()*16|0;\n  let v = c == 'x' ? r : (r&0x3|0x8);\n  return v.toString(16);\n}\n\n/**\n * Generate a univierally unique identifier\n *\n * @return {String}\n */\nexport default function uuid() {\n  return PATTERN.replace(REGEXP, replacement);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/uuid.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport { appendChild, transformChild } from './appendChild';\nimport renderScreenReaderHints from '../a11y/renderScreenReaderHints';\n\n/**\n * Render the response from PDFJSAnnotate.getStoreAdapter().getAnnotations to SVG\n *\n * @param {SVGElement} svg The SVG element to render the annotations to\n * @param {Object} viewport The page viewport data\n * @param {Object} data The response from PDFJSAnnotate.getStoreAdapter().getAnnotations\n * @return {Promise} Settled once rendering has completed\n *  A settled Promise will be either:\n *    - fulfilled: SVGElement\n *    - rejected: Error\n */\nexport default function render(svg, viewport, data) {\n  return new Promise((resolve, reject) => {\n    // Reset the content of the SVG\n    svg.setAttribute('data-pdf-annotate-container', true);\n    svg.setAttribute('data-pdf-annotate-viewport', JSON.stringify(viewport));\n    svg.removeAttribute('data-pdf-annotate-document');\n    svg.removeAttribute('data-pdf-annotate-page');\n\n    // If there's no data nothing can be done\n    if (!data) {\n      svg.innerHTML = ''; \n      return resolve(svg);\n    }\n\n    svg.setAttribute('data-pdf-annotate-document', data.documentId);\n    svg.setAttribute('data-pdf-annotate-page', data.pageNumber);\n  \n    // Make sure annotations is an array\n    if (!Array.isArray(data.annotations) || data.annotations.length === 0) {\n      return resolve(svg);\n    }\n\n    // Append or transform annotation to svg\n    data.annotations.forEach((a) => {\n      var node = svg.querySelector('[data-pdf-annotate-id=\"' + a.uuid + '\"]');\n      if (node) {\n        transformChild(svg, node, viewport);\n      } else {\n        appendChild(svg, a, viewport);\n      }\n    });\n\n    resolve(svg);\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/index.js\n **/","import insertScreenReaderHint from './insertScreenReaderHint';\nimport initEventHandlers from './initEventHandlers';\n\n// TODO This is not the right place for this to live\ninitEventHandlers();\n\n/**\n * Insert hints into the DOM for screen readers.\n *\n * @param {Array} annotations The annotations that hints are inserted for\n */\nexport default function renderScreenReaderHints(annotations) {\n  annotations = Array.isArray(annotations) ? annotations : [];\n\n  // Insert hints for each type\n  Object.keys(SORT_TYPES).forEach((type) => {\n    let sortBy = SORT_TYPES[type];\n    annotations\n      .filter((a) => a.type === type)\n      .sort(sortBy)\n      .forEach((a, i) => insertScreenReaderHint(a, i + 1));\n  });\n}\n\n// Sort annotations first by y, then by x.\n// This allows hints to be injected in the order they appear,\n// which makes numbering them easier.\nfunction sortByPoint(a, b) {\n  if (a.y < b.y) {\n    return a.x - b.x;\n  } else {\n    return 1;\n  }\n}\n\n// Sort annotation by it's first rectangle\nfunction sortByRectPoint(a, b) {\n  return sortByPoint(a.rectangles[0], b.rectangles[0]);\n}\n\n// Sort annotation by it's first line\nfunction sortByLinePoint(a, b) {\n  let lineA = a.lines[0];\n  let lineB = b.lines[0];\n  return sortByPoint(\n    {x: lineA[0], y: lineA[1]},\n    {x: lineB[0], y: lineB[1]}\n  );\n}\n\n// Arrange supported types and associated sort methods\nconst SORT_TYPES = {\n  'highlight': sortByRectPoint,\n  'strikeout': sortByRectPoint,\n  'drawing': sortByLinePoint,\n  'textbox': sortByPoint,\n  'point': sortByPoint,\n  'area': sortByPoint\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/renderScreenReaderHints.js\n **/","import createScreenReaderOnly from './createScreenReaderOnly';\nimport insertElementWithinChildren from './insertElementWithinChildren';\nimport insertElementWithinElement from './insertElementWithinElement';\nimport renderScreenReaderComments from './renderScreenReaderComments';\n\n// Annotation types that support comments\nconst COMMENT_TYPES = ['highlight', 'point', 'area','circle','emptycircle','fillcircle'];\n\n/**\n * Insert a hint into the DOM for screen readers for a specific annotation.\n *\n * @param {Object} annotation The annotation to insert a hint for\n * @param {Number} num The number of the annotation out of all annotations of the same type\n */\nexport default function insertScreenReaderHint(annotation, num = 0) {\n  switch (annotation.type) {\n    case 'highlight':\n    case 'strikeout':\n      let rects = annotation.rectangles;\n      let first = rects[0];\n      let last = rects[rects.length - 1];\n\n      insertElementWithinElement(\n        createScreenReaderOnly(`Begin ${annotation.type} annotation ${num}`, annotation.uuid),\n        first.x, first.y, annotation.page, true\n      );\n\n      insertElementWithinElement(\n        createScreenReaderOnly(`End ${annotation.type} annotation ${num}`, `${annotation.uuid}-end`),\n        last.x + last.width, last.y, annotation.page, false\n      );\n      break;\n\n    case 'textbox':\n    case 'point':\n      let text = annotation.type === 'textbox' ? ` (content: ${annotation.content})` : '';\n\n      insertElementWithinChildren(\n        createScreenReaderOnly(`${annotation.type} annotation ${num}${text}`, annotation.uuid),\n        annotation.x, annotation.y, annotation.page\n      );\n      break;\n\n    case 'drawing':\n    case 'area':\n      let x = typeof annotation.x !== 'undefined' ? annotation.x : annotation.lines[0][0];\n      let y = typeof annotation.y !== 'undefined' ? annotation.y : annotation.lines[0][1];\n\n      insertElementWithinChildren(\n        createScreenReaderOnly(`Unlabeled drawing`, annotation.uuid),\n        x, y, annotation.page\n      );\n      break;\n\n    case 'circle':\n    case 'fillcircle':\n    case 'emptycircle':\n      let x2 = typeof annotation.cx !== 'undefined' ? annotation.cx : annotation.lines[0][0];\n      let y2 = typeof annotation.cy !== 'undefined' ? annotation.cy : annotation.lines[0][1];\n\n      insertElementWithinChildren(\n        createScreenReaderOnly(`Unlabeled drawing`, annotation.uuid),\n        x2, y2, annotation.page\n      );\n      break;\n  }\n\n  // Include comments in screen reader hint\n  if (COMMENT_TYPES.includes(annotation.type)) {\n    renderScreenReaderComments(annotation.documentId, annotation.uuid);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/insertScreenReaderHint.js\n **/","/**\n * Create a node that is only visible to screen readers\n *\n * @param {String} content The text content that should be read by screen reader\n * @param {String} [annotationId] The ID of the annotation assocaited\n * @return {Element} An Element that is only visible to screen readers\n */\nexport default function createScreenReaderOnly(content, annotationId) {\n  let node = document.createElement('div');\n  let text = document.createTextNode(content);\n  node.appendChild(text);\n  node.setAttribute('id', `pdf-annotate-screenreader-${annotationId}`);\n  node.style.position = 'absolute';\n  node.style.left = '-10000px';\n  node.style.top = 'auto';\n  node.style.width = '1px';\n  node.style.height = '1px';\n  node.style.overflow = 'hidden';\n  return node;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/createScreenReaderOnly.js\n **/","import config from '../config';\nimport insertElementWithinElement from './insertElementWithinElement';\nimport { pointIntersectsRect } from '../UI/utils';\nimport { scaleUp } from '../UI/utils'; \n\n/**\n * Insert an element at a point within the document.\n * This algorithm will try to insert between elements if possible.\n * It will however use `insertElementWithinElement` if it is more accurate.\n *\n * @param {Element} el The element to be inserted\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @param {Number} pageNumber The page number to limit elements to\n * @return {Boolean} True if element was able to be inserted, otherwise false\n */\nexport default function insertElementWithinChildren(el, x, y, pageNumber) {\n  // Try and use most accurate method of inserting within an element\n  if (insertElementWithinElement(el, x, y, pageNumber, true)) {\n    return true;\n  }\n\n  // Fall back to inserting between elements\n  let svg = document.querySelector(`svg[data-pdf-annotate-page=\"${pageNumber}\"]`);\n  let rect = svg.getBoundingClientRect();\n  let nodes = [...svg.parentNode.querySelectorAll(config.textClassQuery() + ' > div')];\n\n  y = scaleUp(svg, {y}).y + rect.top;\n  x = scaleUp(svg, {x}).x + rect.left;\n\n  // Find the best node to insert before\n  for (let i=0, l=nodes.length; i<l; i++) {\n    let n = nodes[i];\n    let r = n.getBoundingClientRect();\n    if (y <= r.top) {\n      n.parentNode.insertBefore(el, n);\n      return true;\n    }\n  }\n\n  // If all else fails try to append to the bottom\n  let textLayer = svg.parentNode.querySelector(config.textClassQuery());\n  if (textLayer) {\n    let textRect = textLayer.getBoundingClientRect();\n    if (pointIntersectsRect(x, y, textRect)) {\n      textLayer.appendChild(el);\n      return true;\n    }\n  }\n\n  return false;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/insertElementWithinChildren.js\n **/","export default {\n    annotationLayerName: 'annotationLayer',\n    textLayerName: 'textLayer',\n    annotationSvgQuery: function () {\n        return 'svg.' + this.annotationLayerName;\n    },\n    annotationClassQuery: function () {\n        return '.' + this.annotationLayerName;\n    },\n    textClassQuery: function () {\n        return '.' + this.textLayerName;\n    }    \n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/config.js\n **/","import config from '../config'\nimport {\n  pointIntersectsRect,\n  scaleUp,\n  scaleDown\n} from '../UI/utils'; \n\n/**\n * Insert an element at a point within the document.\n * This algorithm will only insert within an element amidst it's text content.\n *\n * @param {Element} el The element to be inserted\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @param {Number} pageNumber The page number to limit elements to\n * @param {Boolean} insertBefore Whether the element is to be inserted before or after x\n * @return {Boolean} True if element was able to be inserted, otherwise false\n */\nexport default function insertElementWithinElement(el, x, y, pageNumber, insertBefore) {\n  const OFFSET_ADJUST = 2;\n\n  // If inserting before adjust `x` by looking for element a few px to the right\n  // Otherwise adjust a few px to the left\n  // This is to allow a little tolerance by searching within the box, instead\n  // of getting a false negative by testing right on the border.\n  x = Math.max(x + (OFFSET_ADJUST * (insertBefore ? 1 : -1)), 0);\n\n  let node = textLayerElementFromPoint(x, y + OFFSET_ADJUST, pageNumber);\n  if (!node) {\n    return false;\n  }\n  \n  // Now that node has been found inverse the adjustment for `x`.\n  // This is done to accomodate tolerance by cutting off on the outside of the\n  // text boundary, instead of missing a character by cutting off within.\n  x = x + (OFFSET_ADJUST * (insertBefore ? -1 : 1));\n\n  let svg = document.querySelector(`svg[data-pdf-annotate-page=\"${pageNumber}\"]`);\n  let left = scaleDown(svg, {left: node.getBoundingClientRect().left}).left - svg.getBoundingClientRect().left;\n  let temp = node.cloneNode(true);\n  let head = temp.innerHTML.split('');\n  let tail = [];\n\n  // Insert temp off screen\n  temp.style.position = 'absolute';\n  temp.style.top = '-10000px';\n  temp.style.left = '-10000px';\n  document.body.appendChild(temp);\n\n  while (head.length) {\n    // Don't insert within HTML tags\n    if (head[head.length - 1] === '>') {\n      while(head.length) {\n        tail.unshift(head.pop());\n        if (tail[0] === '<') {\n          break;\n        }\n      }\n    }\n    \n    // Check if width of temp based on current head value satisfies x\n    temp.innerHTML = head.join('');\n    let width = scaleDown(svg, {width: temp.getBoundingClientRect().width}).width;\n    if (left + width <= x) {\n      break;\n    }\n    tail.unshift(head.pop());\n  }\n  \n  // Update original node with new markup, including element to be inserted\n  node.innerHTML = head.join('') + el.outerHTML + tail.join('');\n  temp.parentNode.removeChild(temp);\n\n  return true;\n}\n\n/**\n * Get a text layer element at a given point on a page\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @param {Number} pageNumber The page to limit elements to\n * @return {Element} First text layer element found at the point\n */\nfunction textLayerElementFromPoint(x, y, pageNumber) {\n  let svg = document.querySelector(`svg[data-pdf-annotate-page=\"${pageNumber}\"]`);\n  let rect = svg.getBoundingClientRect();\n  y = scaleUp(svg, {y}).y + rect.top;\n  x = scaleUp(svg, {x}).x + rect.left;\n  return [...svg.parentNode.querySelectorAll(config.textClassQuery() + ' [data-canvas-width]')].filter((el) => {\n    return pointIntersectsRect(x, y, el.getBoundingClientRect());\n  })[0];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/insertElementWithinElement.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport insertScreenReaderComment from './insertScreenReaderComment';\n\n/**\n * Insert the comments into the DOM to be available by screen reader\n *\n * Example output:\n *   <div class=\"screenReaderOnly\">\n *    <div>Begin highlight 1</div>\n *    <ol aria-label=\"Comments\">\n *      <li>Foo</li>\n *      <li>Bar</li>\n *      <li>Baz</li>\n *      <li>Qux</li>\n *    </ol>\n *  </div>\n *  <div>Some highlighted text goes here...</div>\n *  <div class=\"screenReaderOnly\">End highlight 1</div>\n *\n * NOTE: `screenReaderOnly` is not a real class, just used for brevity\n *\n * @param {String} documentId The ID of the document\n * @param {String} annotationId The ID of the annotation\n * @param {Array} [comments] Optionally preloaded comments to be rendered\n * @return {Promise}\n */\nexport default function renderScreenReaderComments(documentId, annotationId, comments) {\n  let promise;\n\n  if (Array.isArray(comments)) {\n    promise = Promise.resolve(comments);\n  } else {\n    promise = PDFJSAnnotate.getStoreAdapter().getComments(documentId, annotationId);\n  }\n\n  return promise.then((comments) => {\n    // Node needs to be found by querying DOM as it may have been inserted as innerHTML\n    // leaving `screenReaderNode` as an invalid reference (see `insertElementWithinElement`).\n    let node = document.getElementById(`pdf-annotate-screenreader-${annotationId}`);\n    if (node) { \n      let list = document.createElement('ol');\n      list.setAttribute('id', `pdf-annotate-screenreader-comment-list-${annotationId}`);\n      list.setAttribute('aria-label', 'Comments');\n      node.appendChild(list);\n      comments.forEach(insertScreenReaderComment);\n    }\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/renderScreenReaderComments.js\n **/","/**\n * Insert a comment into the DOM to be available by screen reader\n *\n * @param {Object} comment The comment to be inserted\n */\nexport default function insertScreenReaderComment(comment) {\n  if (!comment) {\n    return;\n  }\n\n  let list = document.querySelector(`#pdf-annotate-screenreader-${comment.annotation} ol`);\n  if (list) {\n    let item = document.createElement('li');\n    item.setAttribute('id', `pdf-annotate-screenreader-comment-${comment.uuid}`);\n    item.appendChild(document.createTextNode(`${comment.content}`));\n    list.appendChild(item);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/insertScreenReaderComment.js\n **/","import insertScreenReaderHint from './insertScreenReaderHint';\nimport renderScreenReaderHints from './renderScreenReaderHints';\nimport insertScreenReaderComment from './insertScreenReaderComment';\nimport renderScreenReaderComments from './renderScreenReaderComments';\nimport { addEventListener } from '../UI/event';\nimport PDFJSAnnotate from '../PDFJSAnnotate';\n\n/**\n * Initialize the event handlers for keeping screen reader hints synced with data\n */\nexport default function initEventHandlers() {\n  addEventListener('annotation:add', (documentId, pageNumber, annotation) => {\n    reorderAnnotationsByType(documentId, pageNumber, annotation.type);\n  });\n  addEventListener('annotation:edit', (documentId, annotationId, annotation) => {\n    reorderAnnotationsByType(documentId, annotation.page, annotation.type);\n  });\n  addEventListener('annotation:delete', removeAnnotation);\n  addEventListener('comment:add', insertComment);\n  addEventListener('comment:delete', removeComment);\n}\n\n/**\n * Reorder the annotation numbers by annotation type\n *\n * @param {String} documentId The ID of the document\n * @param {Number} pageNumber The page number of the annotations\n * @param {Strig} type The annotation type\n */\nfunction reorderAnnotationsByType(documentId, pageNumber, type) {\n  PDFJSAnnotate.getStoreAdapter().getAnnotations(documentId, pageNumber)\n    .then((annotations) => {\n      return annotations.annotations.filter((a) => {\n        return a.type === type;\n      });\n    })\n    .then((annotations) => {\n      annotations.forEach((a) => {\n        removeAnnotation(documentId, a.uuid);\n      });\n\n      return annotations;\n    })\n    .then(renderScreenReaderHints);\n}\n\n/**\n * Remove the screen reader hint for an annotation\n *\n * @param {String} documentId The ID of the document\n * @param {String} annotationId The Id of the annotation\n */\nfunction removeAnnotation(documentId, annotationId) {\n  removeElementById(`pdf-annotate-screenreader-${annotationId}`);\n  removeElementById(`pdf-annotate-screenreader-${annotationId}-end`);\n}\n\n/**\n * Insert a screen reader hint for a comment\n *\n * @param {String} documentId The ID of the document\n * @param {String} annotationId The ID of tha assocated annotation\n * @param {Object} comment The comment to insert a hint for\n */\nfunction insertComment(documentId, annotationId, comment) {\n  let list = document.querySelector(`pdf-annotate-screenreader-comment-list-${annotationId}`);\n  let promise;\n\n  if (!list) {\n    promise = renderScreenReaderComments(documentId, annotationId, []).then(() => {\n      list = document.querySelector(`pdf-annotate-screenreader-comment-list-${annotationId}`);\n      return true;\n    });\n  } else {\n    promise = Promise.resolve(true);\n  }\n\n  promise.then(() => {\n    insertScreenReaderComment(comment);\n  });\n}\n\n/**\n * Remove a screen reader hint for a comment\n *\n * @param {String} documentId The ID of the document\n * @param {String} commentId The ID of the comment\n */\nfunction removeComment(documentId, commentId) {\n  removeElementById(`pdf-annotate-screenreader-comment-${commentId}`);\n}\n\n/**\n * Remove an element from the DOM by it's ID if it exists\n *\n * @param {String} elementID The ID of the element to be removed\n */\nfunction removeElementById(elementId) {\n  let el = document.getElementById(elementId);\n  if (el) {\n    el.parentNode.removeChild(el);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/initEventHandlers.js\n **/","import { addEventListener, removeEventListener, fireEvent } from './event';\nimport { disableEdit, enableEdit } from './edit';\nimport { disablePen, enablePen, setPen } from './pen';\nimport { disableArrow, enableArrow, setArrow } from './arrow';\nimport { disablePoint, enablePoint } from './point';\nimport { disableRect, enableRect } from './rect';\nimport { disableText, enableText, setText } from './text';\nimport { createPage, renderPage } from './page';\n\nexport default {\n  addEventListener, removeEventListener, fireEvent,\n  disableEdit, enableEdit,\n  disablePen, enablePen, setPen,\n  disablePoint, enablePoint,\n  disableRect, enableRect,\n  disableArrow, enableArrow,\n  disableText, enableText, setText,\n  createPage, renderPage\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/index.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport config from '../config';\nimport { appendChild } from '../render/appendChild';\nimport {\n  addEventListener,\n  removeEventListener\n} from './event';\nimport {\n  BORDER_COLOR,\n  disableUserSelect,\n  enableUserSelect,\n  findSVGContainer,\n  findSVGAtPoint,\n  getAnnotationRect,\n  getOffsetAnnotationRect,\n  getMetadata,\n  scaleDown,\n  scaleUp,\n  convertToSvgPoint\n} from './utils';\n\nlet _enabled = false;\nlet isDragging = false, overlay;\nlet dragOffsetX, dragOffsetY, dragStartX, dragStartY;\nconst OVERLAY_BORDER_SIZE = 3;\n\n/**\n * Create an overlay for editing an annotation.\n *\n * @param {Element} target The annotation element to apply overlay for\n */\nfunction createEditOverlay(target) {\n  destroyEditOverlay();\n\n  overlay = document.createElement('div');\n  let anchor = document.createElement('a');\n  let parentNode = findSVGContainer(target).parentNode;\n  let id = target.getAttribute('data-pdf-annotate-id');\n  let rect = getOffsetAnnotationRect(target);\n  let styleLeft = rect.left - OVERLAY_BORDER_SIZE;\n  let styleTop = rect.top - OVERLAY_BORDER_SIZE;\n  \n  overlay.setAttribute('id', 'pdf-annotate-edit-overlay');\n  overlay.setAttribute('data-target-id', id);\n  overlay.style.boxSizing = 'content-box';\n  overlay.style.position = 'absolute';\n  overlay.style.top = `${styleTop}px`;\n  overlay.style.left = `${styleLeft}px`;\n  overlay.style.width = `${rect.width}px`;\n  overlay.style.height = `${rect.height}px`;\n  overlay.style.border = `${OVERLAY_BORDER_SIZE}px solid ${BORDER_COLOR}`;\n  overlay.style.borderRadius = `${OVERLAY_BORDER_SIZE}px`;\n\n  anchor.innerHTML = '×';\n  anchor.setAttribute('href', 'javascript://');\n  anchor.style.background = '#fff';\n  anchor.style.borderRadius = '20px';\n  anchor.style.border = '1px solid #bbb';\n  anchor.style.color = '#bbb';\n  anchor.style.fontSize = '16px';\n  anchor.style.padding = '2px';\n  anchor.style.textAlign = 'center';\n  anchor.style.textDecoration = 'none';\n  anchor.style.position = 'absolute';\n  anchor.style.top = '-13px';\n  anchor.style.right = '-13px';\n  anchor.style.width = '25px';\n  anchor.style.height = '25px';\n  \n  overlay.appendChild(anchor);\n  parentNode.appendChild(overlay);\n  document.addEventListener('click', handleDocumentClick);\n  document.addEventListener('keyup', handleDocumentKeyup);\n  document.addEventListener('mousedown', handleDocumentMousedown);\n  anchor.addEventListener('click', deleteAnnotation);\n  anchor.addEventListener('mouseover', () => {\n    anchor.style.color = '#35A4DC';\n    anchor.style.borderColor = '#999';\n    anchor.style.boxShadow = '0 1px 1px #ccc';\n  });\n  anchor.addEventListener('mouseout', () => {\n    anchor.style.color = '#bbb';\n    anchor.style.borderColor = '#bbb';\n    anchor.style.boxShadow = '';\n  });\n  overlay.addEventListener('mouseover', () => {\n    if (!isDragging) { anchor.style.display = ''; }\n  });\n  overlay.addEventListener('mouseout', () => {\n    anchor.style.display = 'none';\n  });\n}\n\n/**\n * Destroy the edit overlay if it exists.\n */\nfunction destroyEditOverlay() {\n  if (overlay) {\n    overlay.parentNode.removeChild(overlay);\n    overlay = null;\n  }\n\n  document.removeEventListener('click', handleDocumentClick);\n  document.removeEventListener('keyup', handleDocumentKeyup);\n  document.removeEventListener('mousedown', handleDocumentMousedown);\n  document.removeEventListener('mousemove', handleDocumentMousemove);\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n  enableUserSelect();\n}\n\n/**\n * Delete currently selected annotation\n */\nfunction deleteAnnotation() {\n  if (!overlay) { return; }\n\n  let annotationId = overlay.getAttribute('data-target-id');\n  let nodes = document.querySelectorAll(`[data-pdf-annotate-id=\"${annotationId}\"]`);\n  let svg = overlay.parentNode.querySelector(config.annotationSvgQuery());\n  let { documentId } = getMetadata(svg);\n\n  [...nodes].forEach((n) => {\n    n.parentNode.removeChild(n);\n  });\n  \n  PDFJSAnnotate.getStoreAdapter().deleteAnnotation(documentId, annotationId);\n\n  destroyEditOverlay();\n}\n\n/**\n * Handle document.click event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentClick(e) {\n  if (!findSVGAtPoint(e.clientX, e.clientY)) { return; }\n\n  // Remove current overlay\n  let overlay = document.getElementById('pdf-annotate-edit-overlay');\n  if (overlay) {\n    if (isDragging || e.target === overlay) {\n      return;\n    }\n\n    destroyEditOverlay();\n  }\n}\n\n/**\n * Handle document.keyup event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentKeyup(e) {\n  if (overlay && e.keyCode === 46 &&\n      e.target.nodeName.toLowerCase() !== 'textarea' &&\n      e.target.nodeName.toLowerCase() !== 'input') {\n    deleteAnnotation();\n  }\n}\n\n/**\n * Handle document.mousedown event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentMousedown(e) {\n  if (e.target !== overlay) { return; }\n\n  // Highlight and strikeout annotations are bound to text within the document.\n  // It doesn't make sense to allow repositioning these types of annotations.\n  let annotationId = overlay.getAttribute('data-target-id');\n  let target = document.querySelector(`[data-pdf-annotate-id=\"${annotationId}\"]`);\n  let type = target.getAttribute('data-pdf-annotate-type');\n\n  if (type === 'highlight' || type === 'strikeout') { return; }\n\n  isDragging = true;\n  dragOffsetX = e.clientX;\n  dragOffsetY = e.clientY;\n  dragStartX = overlay.offsetLeft;\n  dragStartY = overlay.offsetTop;\n\n  overlay.style.background = 'rgba(255, 255, 255, 0.7)';\n  overlay.style.cursor = 'move';\n  overlay.querySelector('a').style.display = 'none';\n\n  document.addEventListener('mousemove', handleDocumentMousemove);\n  document.addEventListener('mouseup', handleDocumentMouseup);\n  disableUserSelect();\n}\n\n/**\n * Handle document.mousemove event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentMousemove(e) {\n  let annotationId = overlay.getAttribute('data-target-id');\n  let parentNode = overlay.parentNode;\n  let rect = parentNode.getBoundingClientRect();\n  let y = (dragStartY + (e.clientY - dragOffsetY));\n  let x = (dragStartX + (e.clientX - dragOffsetX));\n  let minY = 0;\n  let maxY = rect.height;\n  let minX = 0;\n  let maxX = rect.width;\n\n  if (y > minY && y + overlay.offsetHeight < maxY) {\n    overlay.style.top = `${y}px`;\n  }\n\n  if (x > minX && x + overlay.offsetWidth < maxX) {\n    overlay.style.left = `${x}px`;\n  }\n}\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentMouseup(e) {\n  let annotationId = overlay.getAttribute('data-target-id');\n  let target = document.querySelectorAll(`[data-pdf-annotate-id=\"${annotationId}\"]`);\n  let type = target[0].getAttribute('data-pdf-annotate-type');\n  let svg = overlay.parentNode.querySelector(config.annotationSvgQuery());\n  let { documentId } = getMetadata(svg);\n  \n  overlay.querySelector('a').style.display = '';\n\n  PDFJSAnnotate.getStoreAdapter().getAnnotation(documentId, annotationId).then((annotation) => {\n    let attribX = 'x';\n    let attribY = 'y';\n    if (['circle', 'fillcircle', 'emptycircle'].indexOf(type) > -1) {\n      attribX = 'cx';\n      attribY = 'cy';\n    }\n    if (['area', 'highlight', 'point', 'textbox', 'circle', 'fillcircle', 'emptycircle'].indexOf(type) > -1) {\n      let modelStart = convertToSvgPoint([dragStartX, dragStartY], svg);\n      let modelEnd = convertToSvgPoint([overlay.offsetLeft, overlay.offsetTop], svg);\n      let modelDelta = {\n        x: modelEnd[0] - modelStart[0],\n        y: modelEnd[1] - modelStart[1]\n      };\n\n      [...target].forEach((t, i) => {\n        let modelX = parseInt(t.getAttribute(attribX), 10);\n        let modelY = parseInt(t.getAttribute(attribY), 10);\n        if (modelDelta.y !== 0) {\n          modelY = modelY + modelDelta.y;\n          let viewY = modelY;\n\n          if (type === 'textbox') {\n            viewY += annotation.size;\n          }\n\n          if (type === 'point') {\n            viewY = scaleUp(svg, { viewY }).viewY;\n          }\n\n          t.setAttribute(attribY, viewY);\n          if (annotation.rectangles && i < annotation.rectangles.length) {\n            annotation.rectangles[i].y = modelY;\n          } else if (annotation[attribY]) {\n            annotation[attribY] = modelY;\n          }\n        }\n        if (modelDelta.x !== 0) {\n          modelX = modelX + modelDelta.x;\n          let viewX = modelX;\n\n          if (type === 'point') {\n            viewX = scaleUp(svg, { viewX }).viewX;\n          }\n\n          t.setAttribute(attribX, viewX);\n          if (annotation.rectangles  && i < annotation.rectangles.length) {\n            annotation.rectangles[i].x = modelX;\n          } else if (annotation[attribX]) {\n            annotation[attribX] = modelX;\n          }\n        }\n      });\n    // } else if (type === 'strikeout') {\n    //   let { deltaX, deltaY } = getDelta('x1', 'y1');\n    //   [...target].forEach(target, (t, i) => {\n    //     if (deltaY !== 0) {\n    //       t.setAttribute('y1', parseInt(t.getAttribute('y1'), 10) + deltaY);\n    //       t.setAttribute('y2', parseInt(t.getAttribute('y2'), 10) + deltaY);\n    //       annotation.rectangles[i].y = parseInt(t.getAttribute('y1'), 10);\n    //     }\n    //     if (deltaX !== 0) {\n    //       t.setAttribute('x1', parseInt(t.getAttribute('x1'), 10) + deltaX);\n    //       t.setAttribute('x2', parseInt(t.getAttribute('x2'), 10) + deltaX);\n    //       annotation.rectangles[i].x = parseInt(t.getAttribute('x1'), 10);\n    //     }\n    //   });\n    } else if (type === 'drawing' || type === 'arrow') {\n      let modelStart = convertToSvgPoint([dragStartX, dragStartY], svg);\n      let modelEnd = convertToSvgPoint([overlay.offsetLeft, overlay.offsetTop], svg);\n      let modelDelta = {\n        x: modelEnd[0] - modelStart[0],\n        y: modelEnd[1] - modelStart[1]\n      };\n\n      annotation.lines.forEach((line, i) => {\n        let [x, y] = annotation.lines[i];\n        annotation.lines[i][0] = x + modelDelta.x;\n        annotation.lines[i][1] = y + modelDelta.y;\n      });\n\n      target[0].parentNode.removeChild(target[0]);\n      appendChild(svg, annotation);\n    } \n\n    PDFJSAnnotate.getStoreAdapter().editAnnotation(documentId, annotationId, annotation);\n  });\n\n  setTimeout(() => {\n    isDragging = false;\n  }, 0);\n\n  overlay.style.background = '';\n  overlay.style.cursor = '';\n\n  document.removeEventListener('mousemove', handleDocumentMousemove);\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n  enableUserSelect();\n}\n\n/**\n * Handle annotation.click event\n *\n * @param {Element} e The annotation element that was clicked\n */\nfunction handleAnnotationClick(target) {\n  createEditOverlay(target);\n}\n\n/**\n * Enable edit mode behavior.\n */\nexport function enableEdit () {\n  if (_enabled) { return; }\n\n  _enabled = true;\n  addEventListener('annotation:click', handleAnnotationClick);\n};\n\n/**\n * Disable edit mode behavior.\n */\nexport function disableEdit () {\n  destroyEditOverlay();\n\n  if (!_enabled) { return; }\n\n  _enabled = false;\n  removeEventListener('annotation:click', handleAnnotationClick);\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/edit.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport { appendChild } from '../render/appendChild';\nimport {\n  disableUserSelect,\n  enableUserSelect,\n  findSVGAtPoint,\n  getMetadata,\n  convertToSvgPoint\n} from './utils';\n\nlet _enabled = false;\nlet _penSize;\nlet _penColor;\nlet path;\nlet lines;\n\n/**\n * Handle document.mousedown event\n */\nfunction handleDocumentMousedown() {\n  path = null;\n  lines = [];\n\n  document.addEventListener('mousemove', handleDocumentMousemove);\n  document.addEventListener('mouseup', handleDocumentMouseup);\n}\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event to be handled\n */\nfunction handleDocumentMouseup(e) {\n  let svg;\n  if (lines.length > 1 && (svg = findSVGAtPoint(e.clientX, e.clientY))) {\n    let { documentId, pageNumber } = getMetadata(svg);\n\n    PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, {\n        type: 'drawing',\n        width: _penSize,\n        color: _penColor,\n        lines\n      }\n    ).then((annotation) => {\n      if (path) {\n        svg.removeChild(path);\n      }\n\n      appendChild(svg, annotation);\n    });\n  }\n\n  document.removeEventListener('mousemove', handleDocumentMousemove);\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n}\n\n/**\n * Handle document.mousemove event\n *\n * @param {Event} e The DOM event to be handled\n */\nfunction handleDocumentMousemove(e) {\n  savePoint(e.clientX, e.clientY);\n}\n\n/**\n * Handle document.keyup event\n *\n * @param {Event} e The DOM event to be handled\n */\nfunction handleDocumentKeyup(e) {\n  // Cancel rect if Esc is pressed\n  if (e.keyCode === 27) {\n    lines = null;\n    path.parentNode.removeChild(path);\n    document.removeEventListener('mousemove', handleDocumentMousemove);\n    document.removeEventListener('mouseup', handleDocumentMouseup);\n  }\n}\n\n/**\n * Save a point to the line being drawn.\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n */\nfunction savePoint(x, y) {\n  let svg = findSVGAtPoint(x, y);\n  if (!svg) {\n    return;\n  }\n\n  let rect = svg.getBoundingClientRect();\n  let point = convertToSvgPoint([\n    x - rect.left,\n    y - rect.top\n  ], svg);\n\n  lines.push(point);\n\n  if (lines.length <= 1) {\n    return;\n  }\n\n  if (path) {\n    svg.removeChild(path);\n  }\n\n  path = appendChild(svg, {\n    type: 'drawing',\n    color: _penColor,\n    width: _penSize,\n    lines\n  });\n}\n\n/**\n * Set the attributes of the pen.\n *\n * @param {Number} penSize The size of the lines drawn by the pen\n * @param {String} penColor The color of the lines drawn by the pen\n */\nexport function setPen(penSize = 1, penColor = '000000') {\n  _penSize = parseInt(penSize, 10);\n  _penColor = penColor;\n}\n\n/**\n * Enable the pen behavior\n */\nexport function enablePen() {\n  if (_enabled) { return; }\n\n  _enabled = true;\n  document.addEventListener('mousedown', handleDocumentMousedown);\n  document.addEventListener('keyup', handleDocumentKeyup);\n  disableUserSelect();\n}\n\n/**\n * Disable the pen behavior\n */\nexport function disablePen() {\n  if (!_enabled) { return; }\n\n  _enabled = false;\n  document.removeEventListener('mousedown', handleDocumentMousedown);\n  document.removeEventListener('keyup', handleDocumentKeyup);\n  enableUserSelect();\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/pen.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport { appendChild } from '../render/appendChild';\nimport {\n  disableUserSelect,\n  enableUserSelect,\n  findSVGAtPoint,\n  findSVGContainer,\n  getMetadata,\n  convertToSvgPoint,\n  convertToScreenPoint,\n  findAnnotationAtPoint\n} from './utils';\n\nlet _enabled = false;\nlet _penSize;\nlet _penColor;\nlet path;\nlet lines;\nlet originY;\nlet originX;\n\n/**\n * Handle document.mousedown event\n */\nfunction handleDocumentMousedown(e) {\n  let target = findAnnotationAtPoint(e.clientX, e.clientY);\n  if (target === null)\n    return;\n\n  let type = target.getAttribute('data-pdf-annotate-type');\n  if (type !== 'circle' && type !== 'fillcircle' && type !== 'emptycircle') {\n    return;\n  }\n\n  let svg = findSVGContainer(target);\n  let { documentId } = getMetadata(svg);\n  let annotationId = target.getAttribute('data-pdf-annotate-id');\n\n  let event = e;\n  PDFJSAnnotate.getStoreAdapter().getAnnotation(documentId, annotationId).then((annotation) => {\n    if (annotation) {\n      path = null;\n      lines = [];\n\n      let point = convertToScreenPoint([\n        annotation.cx,\n        annotation.cy\n      ], svg);\n\n      let rect = svg.getBoundingClientRect();\n\n      originX = point[0] + rect.left;\n      originY = point[1] + rect.top;    \n\n      document.addEventListener('mousemove', handleDocumentMousemove);\n      document.addEventListener('mouseup', handleDocumentMouseup);\n    }\n  });\n}\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event to be handled\n */\nfunction handleDocumentMouseup(e) {\n  let svg;\n  if (lines.length > 1 && (svg = findSVGAtPoint(e.clientX, e.clientY))) {\n    let { documentId, pageNumber } = getMetadata(svg);\n\n    PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, {\n        type: 'arrow',\n        width: _penSize,\n        color: _penColor,\n        lines\n      }\n    ).then((annotation) => {\n      if (path) {\n        svg.removeChild(path);\n      }\n\n      appendChild(svg, annotation);\n    });\n  }\n\n  document.removeEventListener('mousemove', handleDocumentMousemove);\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n}\n\n/**\n * Handle document.mousemove event\n *\n * @param {Event} e The DOM event to be handled\n */\nfunction handleDocumentMousemove(e) {\n  let x = lines.length === 0 ? originX : e.clientX;\n  let y = lines.length === 0 ? originY : e.clientY;\n\n  savePoint(x, y);\n}\n\n/**\n * Handle document.keyup event\n *\n * @param {Event} e The DOM event to be handled\n */\nfunction handleDocumentKeyup(e) {\n  // Cancel rect if Esc is pressed\n  if (e.keyCode === 27) {\n    lines = null;\n    path.parentNode.removeChild(path);\n    document.removeEventListener('mousemove', handleDocumentMousemove);\n    document.removeEventListener('mouseup', handleDocumentMouseup);\n  }\n}\n\n/**\n * Save a point to the line being drawn.\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n */\nfunction savePoint(x, y) {\n  let svg = findSVGAtPoint(x, y);\n  if (!svg) {\n    return;\n  }\n\n  let rect = svg.getBoundingClientRect();\n  let point = convertToSvgPoint([\n    x - rect.left,\n    y - rect.top\n  ], svg);\n\n  lines.push(point);\n\n  if (lines.length <= 1) {\n    return;\n  }\n\n  if (path) {\n    svg.removeChild(path);\n  }\n\n  path = appendChild(svg, {\n    type: 'arrow',\n    color: _penColor,\n    width: _penSize,\n    lines\n  });\n}\n\n/**\n * Set the attributes of the pen.\n *\n * @param {Number} penSize The size of the lines drawn by the pen\n * @param {String} penColor The color of the lines drawn by the pen\n */\nexport function setArrow(penSize = 1, penColor = '000000') {\n  _penSize = parseInt(penSize, 10);\n  _penColor = penColor;\n}\n\n/**\n * Enable the pen behavior\n */\nexport function enableArrow() {\n  if (_enabled) { return; }\n\n  _enabled = true;\n  document.addEventListener('mousedown', handleDocumentMousedown);\n  document.addEventListener('keyup', handleDocumentKeyup);\n  disableUserSelect();\n}\n\n/**\n * Disable the pen behavior\n */\nexport function disableArrow() {\n  if (!_enabled) { return; }\n\n  _enabled = false;\n  document.removeEventListener('mousedown', handleDocumentMousedown);\n  document.removeEventListener('keyup', handleDocumentKeyup);\n  enableUserSelect();\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/arrow.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport { appendChild } from '../render/appendChild';\nimport {\n  BORDER_COLOR,\n  findSVGAtPoint,\n  getMetadata,\n  scaleDown\n} from './utils';\n\nlet _enabled = false;\nlet input;\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} The DOM event to be handled\n */\nfunction handleDocumentMouseup(e) {\n  if (input || !findSVGAtPoint(e.clientX, e.clientY)) {\n    return\n  }\n  \n  input = document.createElement('input');\n  input.setAttribute('id', 'pdf-annotate-point-input');\n  input.setAttribute('placeholder', 'Enter comment');\n  input.style.border = `3px solid ${BORDER_COLOR}`;\n  input.style.borderRadius = '3px';\n  input.style.position = 'absolute';\n  input.style.top = `${e.clientY}px`;\n  input.style.left = `${e.clientX}px`;\n\n  input.addEventListener('blur', handleInputBlur);\n  input.addEventListener('keyup', handleInputKeyup);\n\n  document.body.appendChild(input);\n  input.focus();\n}\n\n/**\n * Handle input.blur event\n */\nfunction handleInputBlur() {\n  savePoint();\n}\n\n/**\n * Handle input.keyup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleInputKeyup(e) {\n  if (e.keyCode === 27) {\n    closeInput();\n  } else if (e.keyCode === 13) {\n    savePoint();\n  }\n}\n\n/**\n * Save a new point annotation from input\n */\nfunction savePoint() {\n  if (input.value.trim().length > 0) {\n    let clientX = parseInt(input.style.left, 10);\n    let clientY = parseInt(input.style.top, 10);\n    let content = input.value.trim();\n    let svg = findSVGAtPoint(clientX, clientY);\n    if (!svg) {\n      return;\n    }\n\n    let rect = svg.getBoundingClientRect();\n    let { documentId, pageNumber } = getMetadata(svg);\n    let annotation = Object.assign({\n        type: 'point'\n      }, scaleDown(svg, {\n        x: clientX - rect.left,\n        y: clientY - rect.top\n      })\n    );\n\n    PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation)\n      .then((annotation) => {\n        PDFJSAnnotate.getStoreAdapter().addComment(\n          documentId,\n          annotation.uuid,\n          content\n        );\n\n        appendChild(svg, annotation);\n      });\n  }\n\n  closeInput();\n}\n\n/**\n * Close the input element\n */\nfunction closeInput() {\n  input.removeEventListener('blur', handleInputBlur);\n  input.removeEventListener('keyup', handleInputKeyup);\n  document.body.removeChild(input);\n  input = null;\n}\n\n/**\n * Enable point annotation behavior\n */\nexport function enablePoint() {\n  if (_enabled) { return; }\n\n  _enabled = true;\n  document.addEventListener('mouseup', handleDocumentMouseup);\n}\n\n/**\n * Disable point annotation behavior\n */\nexport function disablePoint() {\n  if (!_enabled) { return; }\n\n  _enabled = false;\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/point.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport config from '../config';\nimport { appendChild } from '../render/appendChild';\nimport {\n  BORDER_COLOR,\n  disableUserSelect,\n  enableUserSelect,\n  findSVGAtPoint,\n  getMetadata,\n  screenToPdf\n} from './utils';\n\nlet _enabled = false;\nlet _type;\nlet overlay;\nlet originY;\nlet originX;\n\n/**\n * Get the current window selection as rects\n *\n * @return {Array} An Array of rects\n */\nfunction getSelectionRects() {\n  try {\n    let selection = window.getSelection();\n    let range = selection.getRangeAt(0);\n    let rects = range.getClientRects();\n\n    if (rects.length > 0 &&\n        rects[0].width > 0 &&\n        rects[0].height > 0) {\n      return rects;\n    }\n  } catch (e) {}\n  \n  return null;\n}\n\n/**\n * Handle document.mousedown event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMousedown(e) {\n  let svg;\n  if ((_type !== 'area' && _type !== 'circle' && _type !== 'fillcircle' && _type !== 'emptycircle')|| !(svg = findSVGAtPoint(e.clientX, e.clientY))) {\n    return;\n  }\n\n  let rect = svg.getBoundingClientRect();\n  originY = e.clientY;\n  originX = e.clientX;\n\n  overlay = document.createElement('div');\n  overlay.style.position = 'absolute';\n  overlay.style.top = `${originY - rect.top}px`;\n  overlay.style.left = `${originX - rect.left}px`;\n  overlay.style.border = `3px solid ${BORDER_COLOR}`;\n  overlay.style.borderRadius = '3px';\n  svg.parentNode.appendChild(overlay);\n  \n  document.addEventListener('mousemove', handleDocumentMousemove);\n  disableUserSelect();\n}\n\n/**\n * Handle document.mousemove event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMousemove(e) {\n  let svg = overlay.parentNode.querySelector(config.annotationSvgQuery());\n  let rect = svg.getBoundingClientRect();\n\n  if (originX + (e.clientX - originX) < rect.right) {\n    overlay.style.width = `${e.clientX - originX}px`;\n  }\n\n  if (originY + (e.clientY - originY) < rect.bottom) {\n    overlay.style.height = `${e.clientY - originY}px`;\n  }\n}\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMouseup(e) {\n  let rects;\n  if ((_type !== 'area' && _type !== 'circle'&& _type !== 'fillcircle'&& _type !== 'emptycircle') && (rects = getSelectionRects())) {\n    let svg = findSVGAtPoint(rects[0].left, rects[0].top);\n    saveRect(_type, [...rects].map((r) => {\n      return {\n        top: r.top,\n        left: r.left,\n        width: r.width,\n        height: r.height\n      };\n    }));\n  } else if ((_type === 'area' || _type === 'circle'|| _type === 'fillcircle'|| _type === 'emptycircle') && overlay) {\n    let svg = overlay.parentNode.querySelector(config.annotationSvgQuery());\n    let rect = svg.getBoundingClientRect();\n    saveRect(_type, [{\n      top: parseInt(overlay.style.top, 10) + rect.top,\n      left: parseInt(overlay.style.left, 10) + rect.left,\n      width: parseInt(overlay.style.width, 10),\n      height: parseInt(overlay.style.height, 10)\n    }]);\n\n    overlay.parentNode.removeChild(overlay);\n    overlay = null;\n\n    document.removeEventListener('mousemove', handleDocumentMousemove);\n    enableUserSelect();\n  }\n}\n\n/**\n * Handle document.keyup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentKeyup(e) {\n  // Cancel rect if Esc is pressed\n  if (e.keyCode === 27) {\n    let selection = window.getSelection();\n    selection.removeAllRanges();\n    if (overlay && overlay.parentNode) {\n      overlay.parentNode.removeChild(overlay);\n      overlay = null;\n      document.removeEventListener('mousemove', handleDocumentMousemove);\n    }\n  }\n}\n\n/**\n * Save a rect annotation\n *\n * @param {String} type The type of rect (area, highlight, strikeout)\n * @param {Array} rects The rects to use for annotation\n * @param {String} color The color of the rects\n */\nfunction saveRect(type, rects, color) {\n  let svg = findSVGAtPoint(rects[0].left, rects[0].top);\n  let node;\n  let annotation;\n\n  if (!svg) {\n    return;\n  }\n\n  let boundingRect = svg.getBoundingClientRect();\n\n  if (!color) {\n    if (type === 'highlight') {\n      color = 'FFFF00';\n    } else if (type === 'strikeout') {\n      color = 'FF0000';\n    }\n  }\n\n  // Initialize the annotation\n  annotation = {\n    type,\n    color,\n    rectangles: [...rects].map((r) => {\n      let offset = 0;\n\n      if (type === 'strikeout') {\n        offset = r.height / 2;\n      }\n\n      return screenToPdf(svg, {\n        y: (r.top + offset) - boundingRect.top,\n        x: r.left - boundingRect.left,\n        width: r.width,\n        height: r.height\n      });\n    }).filter((r) => r.width > 0 && r.height > 0 && r.x > -1 && r.y > -1)\n  };\n  \n  // Short circuit if no rectangles exist\n  if (annotation.rectangles.length === 0) {\n    return;\n  }\n\n  // Special treatment for area as it only supports a single rect\n  if (type === 'area') {\n    let rect = annotation.rectangles[0];\n    delete annotation.rectangles;\n    annotation.x = rect.x;\n    annotation.y = rect.y;\n    annotation.width = rect.width;\n    annotation.height = rect.height;\n  }\n\n   if (type === 'circle'||type === 'emptycircle'||type === 'fillcircle') {\n    let rect = annotation.rectangles[0];\n    delete annotation.rectangles;\n    annotation.cx = rect.x + rect.width / 2;\n    annotation.cy = rect.y + rect.height / 2;\n    annotation.r = rect.width;    // ignored right now\n    annotation.r = rect.height;   // ignored right now\n  }\n\n  let { documentId, pageNumber } = getMetadata(svg);\n\n  // Add the annotation\n  PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation)\n    .then((annotation) => {\n      appendChild(svg, annotation);\n    });\n}\n\n/**\n * Enable rect behavior\n */\nexport function enableRect(type) {\n  _type = type;\n  \n  if (_enabled) { return; }\n\n  _enabled = true;\n  document.addEventListener('mouseup', handleDocumentMouseup);\n  document.addEventListener('mousedown', handleDocumentMousedown);\n  document.addEventListener('keyup', handleDocumentKeyup);\n}\n\n/**\n * Disable rect behavior\n */\nexport function disableRect() {\n  if (!_enabled) { return; }\n\n  _enabled = false;\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n  document.removeEventListener('mousedown', handleDocumentMousedown);\n  document.removeEventListener('keyup', handleDocumentKeyup);\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/rect.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport { appendChild } from '../render/appendChild';\nimport {\n  BORDER_COLOR,\n  findSVGAtPoint,\n  getMetadata,\n  scaleDown,\n  screenToPdf\n} from './utils';\n\nlet _enabled = false;\nlet input;\nlet _textSize;\nlet _textColor;\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMouseup(e) {\n  if (input || !findSVGAtPoint(e.clientX, e.clientY)) {\n    return;\n  }\n\n  input = document.createElement('input');\n  input.setAttribute('id', 'pdf-annotate-text-input');\n  input.setAttribute('placeholder', 'Enter text');\n  input.style.border = `3px solid ${BORDER_COLOR}`;\n  input.style.borderRadius = '3px';\n  input.style.position = 'absolute';\n  input.style.top = `${e.clientY}px`;\n  input.style.left = `${e.clientX}px`;\n  input.style.fontSize = `${_textSize}px`;\n\n  input.addEventListener('blur', handleInputBlur);\n  input.addEventListener('keyup', handleInputKeyup);\n\n  document.body.appendChild(input);\n  input.focus();\n}\n\n/**\n * Handle input.blur event\n */\nfunction handleInputBlur() {\n  saveText();\n}\n\n/**\n * Handle input.keyup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleInputKeyup(e) {\n  if (e.keyCode === 27) {\n    closeInput();\n  } else if (e.keyCode === 13) {\n    saveText();\n  }\n}\n\n/**\n * Save a text annotation from input\n */\nfunction saveText() {\n  if (input.value.trim().length > 0) {\n    let clientX = parseInt(input.style.left, 10);\n    let clientY = parseInt(input.style.top, 10);\n    let svg = findSVGAtPoint(clientX, clientY);\n    if (!svg) {\n      return;\n    }\n\n    let { documentId, pageNumber } = getMetadata(svg);\n    let rect = svg.getBoundingClientRect();\n    let annotation = Object.assign({\n        type: 'textbox',\n        size: _textSize,\n        color: _textColor,\n        content: input.value.trim()\n      }, scaleDown(svg, {\n        x: clientX - rect.left,\n        y: clientY -  rect.top,\n        width: input.offsetWidth,\n        height: input.offsetHeight\n      })\n    );\n\n    PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation)\n      .then((annotation) => {\n        appendChild(svg, annotation);\n      });\n  }\n  \n  closeInput();\n}\n\n/**\n * Close the input\n */\nfunction closeInput() {\n  if (input) {\n    input.removeEventListener('blur', handleInputBlur);\n    input.removeEventListener('keyup', handleInputKeyup);\n    document.body.removeChild(input);\n    input = null;\n  }\n}\n\n/**\n * Set the text attributes\n *\n * @param {Number} textSize The size of the text\n * @param {String} textColor The color of the text\n */\nexport function setText(textSize = 12, textColor = '000000') {\n  _textSize = parseInt(textSize, 10);\n  _textColor = textColor;\n}\n\n\n/**\n * Enable text behavior\n */\nexport function enableText() {\n  if (_enabled) { return; }\n\n  _enabled = true;\n  document.addEventListener('mouseup', handleDocumentMouseup);\n}\n\n\n/**\n * Disable text behavior\n */\nexport function disableText() {\n  if (!_enabled) { return; }\n\n  _enabled = false;\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/text.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport config from '../config';\nimport renderScreenReaderHints from '../a11y/renderScreenReaderHints';\n\n// Template for creating a new page\nconst PAGE_TEMPLATE = `\n  <div style=\"visibility: hidden;\" class=\"page\" data-loaded=\"false\">\n    <div class=\"canvasWrapper\">\n      <canvas></canvas>\n    </div>\n    <svg class=\"` + config.annotationLayerName + `\"></svg>\n    <div class=\"` + config.textLayerName + `\"></div>\n  </div>\n`;\n\n/**\n * Create a new page to be appended to the DOM.\n *\n * @param {Number} pageNumber The page number that is being created\n * @return {HTMLElement}\n */\nexport function createPage(pageNumber) {\n  let temp = document.createElement('div');\n  temp.innerHTML = PAGE_TEMPLATE;\n\n  let page = temp.children[0];\n  let canvas = page.querySelector('canvas');\n\n  page.setAttribute('id', `pageContainer${pageNumber}`);\n  page.setAttribute('data-page-number', pageNumber);\n\n  canvas.mozOpaque = true;\n  canvas.setAttribute('id', `page${pageNumber}`);\n\n  return page;\n}\n\n/**\n * Render a page that has already been created.\n *\n * @param {Number} pageNumber The page number to be rendered\n * @param {Object} renderOptions The options for rendering\n * @return {Promise} Settled once rendering has completed\n *  A settled Promise will be either:\n *    - fulfilled: [pdfPage, annotations]\n *    - rejected: Error\n */\nexport function renderPage(pageNumber, renderOptions) {\n  let {\n    documentId,\n    pdfDocument,\n    scale,\n    rotate\n  } = renderOptions;\n\n  // Load the page and annotations\n  return Promise.all([\n    pdfDocument.getPage(pageNumber),\n    PDFJSAnnotate.getAnnotations(documentId, pageNumber)\n  ]).then(([pdfPage, annotations]) => {\n    let page = document.getElementById(`pageContainer${pageNumber}`);\n    let svg = page.querySelector(config.annotationClassQuery());\n    let canvas = page.querySelector('.canvasWrapper canvas');\n    let canvasContext = canvas.getContext('2d', {alpha: false});\n    let totalRotation = (rotate + pdfPage.rotate) % 360;\n    let viewport = pdfPage.getViewport(scale, totalRotation);\n    let transform = scalePage(pageNumber, viewport, canvasContext);\n\n    // Render the page\n    return Promise.all([\n      pdfPage.render({ canvasContext, viewport, transform }),\n      PDFJSAnnotate.render(svg, viewport, annotations)\n    ]).then(() => {\n      // Text content is needed for a11y, but is also necessary for creating\n      // highlight and strikeout annotations which require selecting text.\n      return pdfPage.getTextContent({normalizeWhitespace: true}).then((textContent) => {\n        return new Promise((resolve, reject) => {\n          // Render text layer for a11y of text content\n          let textLayer = page.querySelector(config.textClassQuery());\n          let textLayerFactory = new PDFJS.DefaultTextLayerFactory();\n          let textLayerBuilder = textLayerFactory.createTextLayerBuilder(textLayer, pageNumber -1, viewport);\n          textLayerBuilder.setTextContent(textContent);\n          textLayerBuilder.render();\n\n          // Enable a11y for annotations\n          // Timeout is needed to wait for `textLayerBuilder.render`\n          setTimeout(() => {\n            try {\n              renderScreenReaderHints(annotations.annotations);\n              resolve();\n            } catch (e) {\n              reject(e);\n            }\n          });\n        });\n      });\n    }).then(() => {\n      // Indicate that the page was loaded\n      page.setAttribute('data-loaded', 'true');\n\n      return [pdfPage, annotations];\n    });\n  });\n}\n\n/**\n * Scale the elements of a page.\n *\n * @param {Number} pageNumber The page number to be scaled\n * @param {Object} viewport The viewport of the PDF page (see pdfPage.getViewport(scale, rotate))\n * @param {Object} context The canvas context that the PDF page is rendered to\n * @return {Array} The transform data for rendering the PDF page\n */\nfunction scalePage(pageNumber, viewport, context) {\n  let page = document.getElementById(`pageContainer${pageNumber}`);\n  let canvas = page.querySelector('.canvasWrapper canvas');\n  let svg = page.querySelector(config.annotationClassQuery());\n  let wrapper = page.querySelector('.canvasWrapper');\n  let textLayer = page.querySelector(config.textClassQuery());\n  let outputScale = getOutputScale(context);\n  let transform = !outputScale.scaled ? null : [outputScale.sx, 0, 0, outputScale.sy, 0, 0];\n  let sfx = approximateFraction(outputScale.sx);\n  let sfy = approximateFraction(outputScale.sy);\n\n  // Adjust width/height for scale\n  page.style.visibility = '';\n  canvas.width = roundToDivide(viewport.width * outputScale.sx, sfx[0]);\n  canvas.height = roundToDivide(viewport.height * outputScale.sy, sfy[0]);\n  canvas.style.width = roundToDivide(viewport.width, sfx[1]) + 'px';\n  canvas.style.height = roundToDivide(viewport.height, sfx[1]) + 'px';\n  svg.setAttribute('width', viewport.width);\n  svg.setAttribute('height', viewport.height);\n  svg.style.width = `${viewport.width}px`;\n  svg.style.height = `${viewport.height}px`;\n  page.style.width = `${viewport.width}px`;\n  page.style.height = `${viewport.height}px`;\n  wrapper.style.width = `${viewport.width}px`;\n  wrapper.style.height = `${viewport.height}px`;\n  textLayer.style.width = `${viewport.width}px`;\n  textLayer.style.height = `${viewport.height}px`;\n\n  return transform;\n}\n\n\n/**\n * Approximates a float number as a fraction using Farey sequence (max order of 8).\n *\n * @param {Number} x Positive float number\n * @return {Array} Estimated fraction: the first array item is a numerator,\n *                 the second one is a denominator.\n */\nfunction approximateFraction(x) {\n  // Fast path for int numbers or their inversions.\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n\n  const xinv = 1 / x;\n  const limit = 8;\n  if (xinv > limit) {\n    return [1, limit];\n  } else if (Math.floor(xinv) === xinv) {\n    return [1, xinv];\n  }\n\n  const x_ = x > 1 ? xinv : x;\n  \n  // a/b and c/d are neighbours in Farey sequence.\n  let a = 0, b = 1, c = 1, d = 1;\n  \n  // Limit search to order 8.\n  while (true) {\n    // Generating next term in sequence (order of q).\n    let p = a + c, q = b + d;\n    if (q > limit) {\n      break;\n    }\n    if (x_ <= p / q) {\n      c = p; d = q;\n    } else {\n      a = p; b = q;\n    }\n  }\n\n  // Select closest of neighbours to x.\n  if (x_ - a / b < c / d - x_) {\n    return x_ === x ? [a, b] : [b, a];\n  } else {\n    return x_ === x ? [c, d] : [d, c];\n  }\n}\n\nfunction getOutputScale(ctx) {\n  let devicePixelRatio = window.devicePixelRatio || 1;\n  let backingStoreRatio = ctx.webkitBackingStorePixelRatio ||\n                          ctx.mozBackingStorePixelRatio ||\n                          ctx.msBackingStorePixelRatio ||\n                          ctx.oBackingStorePixelRatio ||\n                          ctx.backingStorePixelRatio || 1;\n  let pixelRatio = devicePixelRatio / backingStoreRatio;\n  return {\n    sx: pixelRatio,\n    sy: pixelRatio,\n    scaled: pixelRatio !== 1\n  };\n}\n\nfunction roundToDivide(x, div) {\n  let r = x % div;\n  return r === 0 ? x : Math.round(x - r + div);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/page.js\n **/"],"sourceRoot":""}